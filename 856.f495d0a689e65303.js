"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[856],{22856:(t,e,i)=>{i.r(e),i.d(e,{default:()=>it});var r=i(32510),n=i(92252),l=i(67550),c=i(107),a=i(7671),o=i(41075),s=i(83249),d=i(5896),Z=i(79906),u=i(62197),h=i(2784),f=i(61877),m=i(21548),y=i(12121),p=i(87985),b=i(9725),g=i(67732),x=i(56961),w=i(94657),P=i(41015),C=i(72055),k=i(98927),v=i(21845),A=i(52903);function I({pageKey:t,text:e="",modalTitle:i="",children:r}){const[n,l,c]=(0,w.Z)("true"!==localStorage.getItem(`infoShown_${t}`)),[d]=(0,h.useState)(Array.isArray(e)?(0,P.F_)(e):e),f=(0,h.useCallback)((()=>{c(),localStorage.setItem(`infoShown_${t}`,"true")}),[c,t]);return(0,A.BX)(p.Z,{children:[(0,A.BX)(o.ZP,{container:!0,children:[(0,A.tZ)(o.ZP,{item:!0,flexGrow:1,children:(0,A.tZ)(u.Z,{variant:"caption",pl:1,children:d})}),(0,A.tZ)(o.ZP,{item:!0,xs:"auto",children:(0,A.tZ)(s.Z,{size:"small",color:"info",variant:"contained",onClick:l,startIcon:(0,A.tZ)(g.G,{icon:b.Fuz}),children:(0,A.tZ)(v.v,{ns:"ui",key18:"info"})})})]}),(0,A.tZ)(k.Z,{containerProps:{maxWidth:"xl"},open:n,onClose:f,children:(0,A.BX)(p.Z,{children:[(0,A.tZ)(a.Z,{sx:{py:1},children:(0,A.BX)(o.ZP,{container:!0,children:[(0,A.tZ)(o.ZP,{item:!0,flexGrow:1,children:(0,A.tZ)(u.Z,{variant:"h6",children:i})}),(0,A.tZ)(o.ZP,{item:!0,children:(0,A.tZ)(C.Z,{onClick:f})})]})}),(0,A.tZ)(x.Z,{}),(0,A.tZ)(a.Z,{children:(0,A.tZ)(h.Suspense,{fallback:(0,A.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:500}),children:r})}),(0,A.tZ)(x.Z,{}),(0,A.tZ)(a.Z,{sx:{py:1},children:(0,A.tZ)(C.Z,{large:!0,onClick:f})})]})})]})}var B=i(46026),X=i(51650);function S(){const{database:t}=(0,h.useContext)(X.t),[e,i]=(0,h.useState)(t.displayArtifact.get());return(0,h.useEffect)((()=>t.displayArtifact.follow(((t,e)=>i(e)))),[t]),e}var F=i(36617),K=i(82716),G=i(69190),$=i(1661),E=i(85563),O=i(40535),T=i(54278),D=i(83673);const M=(0,h.lazy)((()=>Promise.all([i.e(237),i.e(592)]).then(i.bind(i,20370))));function U({numShowing:t,total:e}){const{t:i}=(0,m.$G)(["artifact","ui"]),{database:n}=(0,h.useContext)(X.t),{filterOption:l}=S(),c=(0,h.useCallback)((t=>n.displayArtifact.set({filterOption:Object.assign({},l,t)})),[n,l]);return(0,A.tZ)(h.Suspense,{fallback:(0,A.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:300}),children:(0,A.tZ)(p.Z,{children:(0,A.BX)(a.Z,{children:[(0,A.BX)(o.ZP,{container:!0,children:[(0,A.tZ)(o.ZP,{item:!0,children:(0,A.tZ)(u.Z,{variant:"h6",children:(0,A.tZ)(m.cC,{t:i,i18nKey:"artifactFilter",children:"Artifact Filter"})})}),(0,A.tZ)(o.ZP,{item:!0,flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",children:t!==e&&(0,A.BX)(u.Z,{children:["Filtered ",t," / ",e]})}),(0,A.tZ)(o.ZP,{item:!0,children:(0,A.tZ)(s.Z,{size:"small",color:"error",onClick:()=>n.displayArtifact.set({action:"reset"}),startIcon:(0,A.tZ)(r.Z,{}),children:(0,A.tZ)(m.cC,{t:i,i18nKey:"ui:reset"})})})]}),(0,A.tZ)(h.Suspense,{fallback:(0,A.tZ)(Z.Z,{variant:"rectangular",width:"100%",height:200}),children:(0,A.tZ)(M,{filterOption:l,filterOptionDispatch:c})})]})})})}function W({artifactIds:t}){const{t:e}=(0,m.$G)(["artifact","ui"]),{database:i}=(0,h.useContext)(X.t),{numDelete:r,numUnequip:n,numExclude:l,numInclude:c,numUnlock:a,numLock:d}=(0,h.useMemo)((()=>{const e=t.map((t=>i.arts.get(t))),r=e.reduce(((t,e)=>t+(e.lock?0:1)),0),n=e.length-r,l=r,c=e.reduce(((t,e)=>t+(e.location?1:0)),0),a=e.reduce(((t,e)=>t+(e.exclude?1:0)),0);return{numDelete:l,numUnequip:c,numExclude:a,numInclude:e.length-a,numUnlock:r,numLock:n}}),[t,i]);return(0,A.BX)(o.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,A.tZ)(o.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,A.BX)(s.Z,{fullWidth:!0,color:"error",disabled:!n,onClick:()=>window.confirm(`Are you sure you want to unequip ${n} artifacts currently equipped on characters?`)&&t.map((t=>i.arts.set(t,{location:""}))),startIcon:(0,A.tZ)(g.G,{icon:b.wOQ}),children:[(0,A.tZ)(m.cC,{t:e,i18nKey:"button.unequipArtifacts",children:"Unequip Artifacts"}),(0,A.tZ)(D.Z,{sx:{ml:1},color:n?"success":"secondary",children:n})]})}),(0,A.tZ)(o.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,A.BX)(s.Z,{fullWidth:!0,color:"error",disabled:!r,onClick:()=>window.confirm(`Are you sure you want to delete ${r} artifacts?`)&&t.map((t=>{var e;return!(null!=(e=i.arts.get(t))&&e.lock)&&i.arts.remove(t)})),startIcon:(0,A.tZ)(g.G,{icon:b.$aW}),children:[(0,A.tZ)(m.cC,{t:e,i18nKey:"button.deleteArtifacts",children:"Delete Artifacts"}),(0,A.tZ)(D.Z,{sx:{ml:1},color:r?"success":"secondary",children:r})]})}),(0,A.tZ)(o.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,A.BX)(s.Z,{fullWidth:!0,color:"error",disabled:!c,onClick:()=>window.confirm(`Are you sure you want to exclude ${c} artifacts from build generations?`)&&t.map((t=>i.arts.set(t,{exclude:!0}))),startIcon:(0,A.tZ)(g.G,{icon:b.gPx}),children:[(0,A.tZ)(m.cC,{t:e,i18nKey:"button.excludeArtifacts",children:"Exclude Artifacts"}),(0,A.tZ)(D.Z,{sx:{ml:1},color:c?"success":"secondary",children:c})]})}),(0,A.tZ)(o.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,A.BX)(s.Z,{fullWidth:!0,color:"error",disabled:!l,onClick:()=>window.confirm(`Are you sure you want to include ${l} artifacts in build generations?`)&&t.map((t=>i.arts.set(t,{exclude:!1}))),startIcon:(0,A.tZ)(g.G,{icon:b.Stf}),children:[(0,A.tZ)(m.cC,{t:e,i18nKey:"button.includeArtifacts",children:"Include Artifacts"}),(0,A.tZ)(D.Z,{sx:{ml:1},color:l?"success":"secondary",children:l})]})}),(0,A.tZ)(o.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,A.BX)(s.Z,{fullWidth:!0,color:"error",disabled:!d,onClick:()=>window.confirm(`Are you sure you want to unlock ${d} artifacts?`)&&t.map((t=>i.arts.set(t,{lock:!1}))),startIcon:(0,A.tZ)(O.Z,{}),children:[(0,A.tZ)(m.cC,{t:e,i18nKey:"button.unlockrtifacts",children:"Unlock Artifacts"}),(0,A.tZ)(D.Z,{sx:{ml:1},color:d?"success":"secondary",children:d})]})}),(0,A.tZ)(o.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,A.BX)(s.Z,{fullWidth:!0,color:"error",disabled:!a,onClick:()=>window.confirm(`Are you sure you want to lock ${a} artifacts?`)&&t.map((t=>i.arts.set(t,{lock:!0}))),startIcon:(0,A.tZ)(T.Z,{}),children:[(0,A.tZ)(m.cC,{t:e,i18nKey:"button.lockArtifacts",children:"Lock Artifacts"}),(0,A.tZ)(D.Z,{sx:{ml:1},color:a?"success":"secondary",children:a})]})}),(0,A.tZ)(o.ZP,{item:!0,xs:12,sm:12,md:6,display:"flex",justifyContent:"space-around",children:(0,A.tZ)(u.Z,{variant:"caption",color:"text.secondary",children:(0,A.BX)(m.cC,{t:e,i18nKey:"buttonHint",children:["Note: the red buttons above only applies to ",(0,A.tZ)("b",{children:"currently filtered artifacts"})]})})})]})}var q=i(71957),z=i(67937),j=i(2344),N=i(86953);const _=[...G._];function L({probabilityFilter:t={},setProbabilityFilter:e,disabled:i=!1}){return(0,A.BX)(p.Z,{children:[(0,A.tZ)(a.Z,{sx:{py:1},children:(0,A.tZ)(u.Z,{variant:"h6",children:"Roll Probability Calculator"})}),(0,A.tZ)(x.Z,{}),(0,A.tZ)(a.Z,{children:(0,A.BX)(o.ZP,{container:!0,spacing:1,children:[(0,A.tZ)(o.ZP,{item:!0,xs:12,md:6,children:(0,A.tZ)(z.Z,{children:(0,A.tZ)(a.Z,{children:(0,A.BX)(u.Z,{children:['This UI only pops up when "Sort by" ',(0,A.tZ)("strong",{children:"Probability"}),". In conjunction with the Artifact Filters above, this UI allows you to set a criteria for substats values, and it will sort the artifacts by those with the highest probability to roll into those criteria values.",(0,A.tZ)(j.Z,{color:"warning",children:" Artifacts that already reach the criteria(100%) or are at 0% are hidden."})]})})})}),(0,A.tZ)(o.ZP,{item:!0,xs:12,md:6,spacing:1,sx:{display:"flex",flexDirection:"column",gap:1},children:(0,A.tZ)(N.Z,{statKeys:_,statFilters:t,setStatFilters:e,disabled:i})})]})})]})}var Q=i(88408);let V,H,R=t=>t;const J=h.lazy((()=>Promise.all([i.e(592),i.e(794),i.e(49)]).then(i.bind(i,52267)))),Y=h.lazy((()=>Promise.all([i.e(592),i.e(530)]).then(i.bind(i,66066)))),tt={xs:1,sm:2,md:3,lg:3,xl:4},et={xs:10,sm:12,md:24,lg:24,xl:24};function it(){const{t}=(0,m.$G)(["artifact","ui"]),{database:e}=(0,h.useContext)(X.t),i=S(),[u,b,g]=(0,w.Z)(!1),x=(0,K.Z)(),C=et[x],{sortType:k,effFilter:v,ascending:O,probabilityFilter:T}=i,D="probability"===k,[M,z]=(0,h.useState)(0),j=(0,h.useRef)(null),[N,_]=(0,F.Z)(),it=(0,h.useMemo)((()=>new Set(v)),[v]),nt=(0,h.useCallback)((t=>e.arts.remove(t)),[e]);(0,h.useEffect)((()=>(f.ZP.send({hitType:"pageview",page:"/artifact"}),e.arts.followAny((()=>_())))),[e,_]);const lt=(0,h.useCallback)((t=>e.displayArtifact.set({probabilityFilter:t})),[e]),ct=(0,h.useMemo)((()=>!e.arts.values.length),[e]),at=(0,h.useMemo)((()=>(0,q.x3)(it,T)),[it,T]),ot=(0,h.useMemo)((()=>(0,q.EM)(it)),[it]),st=(0,h.useDeferredValue)(i),dt=(0,h.useDeferredValue)(T);(0,h.useEffect)((()=>{if(D)return e.arts.values.forEach((t=>e.arts.setProbability(t.id,(0,Q.B)(t,dt)))),()=>e.arts.values.forEach((t=>e.arts.setProbability(t.id,-1)))}),[e,D,dt]);const{artifactIds:Zt,totalArtNum:ut}=(0,h.useMemo)((()=>{var t;const{sortType:i=q.OQ[0],ascending:r=!1,filterOption:n}=st;let l=e.arts.values;D&&(l=l.filter((t=>t.probability&&1!==t.probability)));const c=l.filter((0,$.C)(n,ot)).sort((0,$.e)(null!=(t=q.t$[i])?t:[],r,at)).map((t=>t.id));return Object.assign({artifactIds:c,totalArtNum:l.length},N)}),[st,N,e,at,ot,D]),{artifactIdsToShow:ht,numPages:ft,currentPageIndex:mt}=(0,h.useMemo)((()=>{const t=Math.ceil(Zt.length/C),e=(0,P.uZ)(M,0,t-1);return{artifactIdsToShow:Zt.slice(e*C,(e+1)*C),numPages:t,currentPageIndex:e}}),[Zt,M,C]),yt=Zt.length!==ut?`${Zt.length}/${ut}`:`${ut}`,pt=(0,h.useCallback)(((t,e)=>{var i;null==(i=j.current)||i.scrollIntoView({behavior:"smooth"}),z(e-1)}),[z,j]);return(0,A.BX)(l.Z,{display:"flex",flexDirection:"column",gap:1,my:1,children:[(0,A.tZ)(h.Suspense,{fallback:!1,children:(0,A.tZ)(J,{artifactIdToEdit:u?"new":"",cancelEdit:g,allowUpload:!0,allowEmpty:!0})}),(0,A.tZ)(I,{pageKey:"artifactPage",modalTitle:t(V||(V=R`info.title`)),text:t("tipsOfTheDay",{returnObjects:!0}),children:(0,A.tZ)(Y,{})}),ct&&(0,A.tZ)(c.Z,{severity:"info",variant:"filled",children:"Looks like you haven't added any artifacts yet. If you want, there are automatic scanners that can speed up the import process!"}),(0,A.tZ)(U,{numShowing:Zt.length,total:ut}),(0,A.tZ)(p.Z,{ref:j,children:(0,A.BX)(a.Z,{children:[(0,A.BX)(o.ZP,{container:!0,sx:{mb:1},children:[(0,A.tZ)(o.ZP,{item:!0,flexGrow:1,children:(0,A.tZ)("span",{children:(0,A.tZ)(m.cC,{t,i18nKey:"efficiencyFilter.title",children:"Substats to use in efficiency calculation"})})}),(0,A.tZ)(o.ZP,{item:!0,children:(0,A.tZ)(s.Z,{size:"small",color:"error",onClick:()=>e.displayArtifact.set({effFilter:[...G._]}),startIcon:(0,A.tZ)(r.Z,{}),children:(0,A.tZ)(m.cC,{t,i18nKey:"ui:reset"})})})]}),(0,A.tZ)(y.Z,{selectedKeys:v,onChange:t=>e.displayArtifact.set({effFilter:t})})]})}),(0,A.tZ)(p.Z,{children:(0,A.BX)(a.Z,{children:[(0,A.BX)(o.ZP,{container:!0,alignItems:"center",sx:{pb:2},children:[(0,A.tZ)(o.ZP,{item:!0,flexGrow:1,children:(0,A.tZ)(d.Z,{count:ft,page:mt+1,onChange:pt})}),(0,A.tZ)(o.ZP,{item:!0,flexGrow:1,children:(0,A.tZ)(rt,{numShowing:ht.length,total:yt,t})}),(0,A.BX)(o.ZP,{item:!0,xs:12,sm:6,md:4,lg:4,xl:3,display:"flex",children:[(0,A.tZ)(l.Z,{flexGrow:1}),(0,A.tZ)(B.Z,{sortKeys:[...q.OQ],value:k,onChange:t=>e.displayArtifact.set({sortType:t}),ascending:O,onChangeAsc:t=>e.displayArtifact.set({ascending:t})})]})]}),(0,A.tZ)(W,{artifactIds:Zt})]})}),D&&(0,A.tZ)(L,{probabilityFilter:T,setProbabilityFilter:lt}),(0,A.tZ)(s.Z,{fullWidth:!0,onClick:b,color:"info",startIcon:(0,A.tZ)(n.Z,{}),children:t(H||(H=R`addNew`))}),(0,A.tZ)(h.Suspense,{fallback:(0,A.tZ)(Z.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:5e3}}),children:(0,A.tZ)(o.ZP,{container:!0,spacing:1,columns:tt,children:ht.map((t=>(0,A.tZ)(o.ZP,{item:!0,xs:1,children:(0,A.tZ)(E.Z,{artifactId:t,effFilter:it,onDelete:nt,editorProps:{},canExclude:!0,canEquip:!0})},t)))})}),ft>1&&(0,A.tZ)(p.Z,{children:(0,A.tZ)(a.Z,{children:(0,A.BX)(o.ZP,{container:!0,children:[(0,A.tZ)(o.ZP,{item:!0,flexGrow:1,children:(0,A.tZ)(d.Z,{count:ft,page:mt+1,onChange:pt})}),(0,A.tZ)(o.ZP,{item:!0,children:(0,A.tZ)(rt,{numShowing:ht.length,total:yt,t})})]})})})]})}function rt({numShowing:t,total:e,t:i}){return(0,A.tZ)(u.Z,{color:"text.secondary",children:(0,A.BX)(m.cC,{t:i,i18nKey:"showingNum",count:t,value:e,children:["Showing ",(0,A.tZ)("b",{children:{count:t}})," out of ",{value:e}," Artifacts"]})})}}}]);