import{a as j,q as he,s as pe,j as W,k as t,co as yt,cp as St,cq as bt,cr as Ct,cs as Dt,ct as _t,cu as wt,cv as It,cw as kt,cx as Mt,bl as Bt,bj as Rt,aX as fe,aB as te,cy as Nt,aD as ne,cz as F,aA as ae,ay as A,aC as J,cA as oe,u as Te,bb as Re,bc as zt,i as c,az as D,T as p,c as O,r as d,aQ as Ne,d as L,cB as Wt,U as $t,E as Et,b as V,cC as jt,aY as Tt,ba as Ht,N as Ft,B as h,x as K,n as T,a2 as He,bM as Fe,a6 as At,m as Gt,C as Ae,G,br as Lt,a5 as me,l as E,f as Ot,g as Ge,h as se,a7 as Le,ac as Vt,a4 as qt,c0 as Pt,cf as re,a3 as ie,c8 as ce,b2 as le,cD as Ut}from"./index-ae0e5ead.js";import{E as ge,s as Oe,K as S,L as _,M as w,N as g,G as B,c as I,O as q,P,Q as Qt,R as Jt,T as Ve,V as H,J as de,A as Xt,g as U,D as ze,W as Yt,X as Kt,y as ve,Y as Zt,Z as qe,q as Pe,S as k,r as en,x as Ue,u as C,w as Qe,n as Je,C as xe}from"./index-2c4aa6a3.js";import{g as Xe,p as tn,c as ye,L as nn,b as X,F as an,a as Ye,d as on,S as sn,h as Ke,k as rn}from"./StarDisplay-3a29ee7b.js";import{D as Z,C as Ze,a as cn}from"./FieldDisplay-7b50c48c.js";import{c as ln,g as dn,A as et}from"./index-d23e7aaf.js";import{g as Se,W as be}from"./index-ab1db78b.js";import{a as We,u as tt}from"./WeaponUtil-42644eba.js";import{B as Y}from"./Help-1fa4c6a0.js";import{S as un}from"./SlotIcon-eec7d7dd.js";import{i as Ce,I as hn,C as pn}from"./ColoredText-c98c28ec.js";function nt(e){const n=j();return Xe(n.chars,e)}function at(e){const n=j();return Xe(n.charMeta,e)}var De={},fn=pe;Object.defineProperty(De,"__esModule",{value:!0});var ot=De.default=void 0,mn=fn(he()),gn=W,vn=(0,mn.default)((0,gn.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"Favorite");ot=De.default=vn;function xn({statKey:e,iconProps:n={}}){switch(e){case"hp":case"hp_":case"base_hp":return t(Rt,{...n});case"atk":case"atk_":case"base_atk":return t(Bt,{...n});case"def":case"def_":case"base_def":return t(Mt,{...n});case"eleMas":return t(kt,{...n});case"critRate_":return t(It,{...n});case"critDMG_":return t(wt,{...n});case"enerRech_":return t(_t,{...n});case"incHeal_":return t(Dt,{...n});case"heal_":return t(Ct,{...n});case"cdRed_":return t(bt,{...n});case"shield_":return t(St,{...n});case"stamina":return t(yt,{...n})}const a=e.split("_")[0];return fe.includes(a)?t(yn,{ele:a,iconProps:n}):null}function yn({ele:e,iconProps:n={}}){switch(e){case"anemo":return t(oe,{...n});case"cryo":return t(J,{...n});case"dendro":return t(A,{...n});case"electro":return t(ae,{...n});case"geo":return t(F,{...n});case"hydro":return t(ne,{...n});case"physical":return t(Nt,{...n});case"pyro":return t(te,{...n})}}function Sn({statKey:e,value:n,color:a,prefix:o="",typographyProps:s={}}){const{t:r}=Te("statKey_gen"),i=Re(e),l=zt(n,Re(e));return c(p,{color:a?`${a}.main`:void 0,...s,children:[t(xn,{statKey:e,iconProps:D})," ",r(e)," ",t("strong",{children:`${o}${l}${i}`})]},e)}const Va=O(W.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever"),qa=O(W.jsx("path",{fillRule:"evenodd",d:"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM10 17H5v-2h5v2zm0-4H5v-2h5v2zm0-4H5V7h5v2zm4.82 6L12 12.16l1.41-1.41 1.41 1.42L17.99 9l1.42 1.42L14.82 15z"}),"FactCheck"),bn=O(W.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder"),Pa=O(W.jsx("path",{d:"M19.8 18.4 14 10.67V6.5l1.35-1.69c.26-.33.03-.81-.39-.81H9.04c-.42 0-.65.48-.39.81L10 6.5v4.17L4.2 18.4c-.49.66-.02 1.6.8 1.6h14c.82 0 1.29-.94.8-1.6z"}),"Science"),Ua=O(W.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp");var _e={},Cn=pe;Object.defineProperty(_e,"__esModule",{value:!0});var Dn=_e.default=void 0,_n=Cn(he()),wn=W,In=(0,_n.default)((0,wn.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");Dn=_e.default=In;function kn(e){const n=j();return d.useCallback(a=>{if(!e)return;const o=n.chars.get(e);if(o)if("type"in a)switch(a.type){case"enemyOverride":{const s=o.enemyOverride,{statKey:r,value:i}=a;if(s[r]===i)break;n.chars.set(e,{...o,enemyOverride:{...s,[r]:i}});break}case"editStats":{const{statKey:s,value:r}=a,i=Ne(o.bonusStats);if(i[s]===r)break;r?i[s]=r:delete i[s],n.chars.set(e,{...o,bonusStats:i});break}case"resetStats":{const{statKey:s}=a,r=o.bonusStats;delete r[s],n.chars.set(e,{...o,bonusStats:r});break}case"teamConditional":{const{teamMateKey:s,conditional:r}=a,i=Ne(o.teamConditional);i[s]=r,n.chars.set(e,{...o,teamConditional:i});break}case"team":{const{team:s}=o,r=[...s],{index:i,charKey:l}=a;r[i]=l,n.chars.set(e,{...o,team:r})}}else n.chars.set(e,{...o,...a})},[e,n])}function Mn({iconProps:e}){const[n,a]=d.useState(0);return d.useEffect(()=>{const o=setInterval(()=>a(s=>s+1),1e3);return()=>clearInterval(o)},[]),t(ge,{ele:L[n%L.length],iconProps:e})}const y=e=>t(Ve,{ns:"elementalResonance_gen",key18:e}),ue=e=>t(Ve,{ns:"elementalResonance",key18:e}),b=Oe(...L.map(e=>S[e])),st=Wt(fe,e=>[`${e}_res_`,_(I.charKey,g(S.ele,4,B(.15)),w.info(`${e}_res_`))]),Bn={name:y("ProtectiveCanopy.name"),desc:y("ProtectiveCanopy.desc"),icon:c("span",{children:[t(Mn,{iconProps:D})," x4"]}),canShow:e=>e.get(S.ele).value>=4,sections:[{teamBuff:!0,fields:Object.values(st).map(([e,n])=>({node:n}))}]},[Rn,Nn]=_(I.charKey,g(b,4,g(S.pyro,2,B(.25))),w.info("atk_")),zn={name:y("FerventFlames.name"),desc:y("FerventFlames.desc"),icon:c("span",{children:[t(te,{...D})," ",t(te,{...D})]}),canShow:e=>e.get(S.pyro).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,fields:[{text:H("effectDuration.cryo"),value:-40,unit:"%"},{node:Rn}]}]},[Wn,$n]=_(I.charKey,g(b,4,g(S.hydro,2,B(.25))),w.info("hp_")),En={name:y("SoothingWater.name"),desc:y("SoothingWater.desc"),icon:c("span",{children:[t(ne,{...D})," ",t(ne,{...D})]}),canShow:e=>e.get(S.hydro).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,fields:[{text:H("effectDuration.pyro"),value:-40,unit:"%"},{node:Wn}]}]},rt=["resonance","ShatteringIce"],it=q(rt),[jn,Tn]=_(I.charKey,g(b,4,g(S.cryo,2,P(it,"on",B(.15)))),w.info("critRate_")),Hn={name:y("ShatteringIce.name"),desc:y("ShatteringIce.desc"),icon:c("span",{children:[t(J,{...D})," ",t(J,{...D})]}),canShow:e=>e.get(S.cryo).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,fields:[{text:H("effectDuration.electro"),value:-40,unit:"%"}]},{teamBuff:!0,path:rt,value:it,name:H("enemyAffected.frozenOrCryo"),header:{title:y("ShatteringIce.name"),icon:t(J,{})},states:{on:{fields:[{node:jn}]}}}]},Fn={name:y("HighVoltage.name"),desc:y("HighVoltage.desc"),icon:c("span",{children:[t(ae,{...D})," ",t(ae,{...D})]}),canShow:e=>e.get(S.electro).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,fields:[{text:H("effectDuration.hydro"),value:-40,unit:"%"}]}]},[An,Gn]=_(I.charKey,g(b,4,g(S.anemo,2,B(-.15))),w.info("staminaDec_")),[Ln,On]=_(I.charKey,g(b,4,g(S.anemo,2,B(.1))),w.info("moveSPD_")),[Vn,qn]=_(I.charKey,g(b,4,g(S.anemo,2,B(-.05))),w.info("cdRed_")),Pn={name:y("ImpetuousWinds.name"),desc:y("ImpetuousWinds.desc"),icon:c("span",{children:[t(oe,{...D})," ",t(oe,{...D})]}),canShow:e=>e.get(S.anemo).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,fields:[{node:An},{node:Ln},{node:Vn}]}]},ct=["resonance","EnduringRock"],lt=q(ct),dt=["resonance","EnduringRockHit"],ut=q(dt),[Un,Qn]=_(I.charKey,g(b,4,g(S.geo,2,B(.15))),w.info("shield_")),[Jn,Xn]=_(I.charKey,g(b,4,g(S.geo,2,P(lt,"on",B(.15)))),w.info("all_dmg_")),[Yn,Kn]=_(I.charKey,g(b,4,g(S.geo,2,P(ut,"on",B(-.2)))),w.info("geo_enemyRes_")),Zn={name:y("EnduringRock.name"),desc:y("EnduringRock.desc"),icon:c("span",{children:[t(F,{...D})," ",t(F,{...D})]}),canShow:e=>e.get(S.geo).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,text:y("EnduringRock.desc"),fields:[{node:Un}]},{teamBuff:!0,path:ct,value:lt,header:{title:y("EnduringRock.name"),icon:t(F,{})},name:H("protectedByShield"),states:{on:{fields:[{node:Jn}]}}},{teamBuff:!0,path:dt,value:ut,header:{title:y("EnduringRock.name"),icon:t(F,{})},name:ue("EnduringRock.hitCond"),states:{on:{fields:[{node:Yn},{text:de("duration"),value:15,unit:"s"}]}}}]},ht=["resonance","SprawlingCanopy2ele"],pt=q(ht),ft=["resonance","SprawlingCanopy3ele"],mt=q(ft),[ea,ta]=_(I.charKey,g(b,4,g(S.dendro,2,50)),w.info("eleMas")),[na,aa]=_(I.charKey,g(b,4,g(S.dendro,2,P(pt,"on",30))),w.info("eleMas")),[oa,sa]=_(I.charKey,g(b,4,g(S.dendro,2,P(mt,"on",20))),w.info("eleMas")),ra={name:y("SprawlingGreenery.name"),desc:y("SprawlingGreenery.desc"),icon:c("span",{children:[t(A,{...D})," ",t(A,{...D})]}),canShow:e=>e.get(S.dendro).value>=2&&e.get(b).value>=4,sections:[{teamBuff:!0,text:y("SprawlingGreenery.desc"),fields:[{node:ea}]},{teamBuff:!0,path:ht,value:pt,header:{title:y("SprawlingGreenery.name"),icon:t(A,{})},name:ue("SprawlingGreenery.cond2ele"),states:{on:{fields:[{node:na},{text:de("duration"),value:6,unit:"s"}]}}},{teamBuff:!0,path:ft,value:mt,header:{title:y("SprawlingGreenery.name"),icon:t(A,{})},name:ue("SprawlingGreenery.cond3ele"),states:{on:{fields:[{node:oa},{text:de("duration"),value:6,unit:"s"}]}}}]},Qa=[Bn,zn,En,Hn,Fn,Pn,Zn,ra],ia=Qt({teamBuff:{premod:{...$t(st,([e,n])=>n),atk_:Nn,hp_:$n,staminaDec_:Gn,moveSPD_:On,cdRed_:qn,shield_:Qn,all_dmg_:Xn,geo_enemyRes_:Kn,eleMas:Jt(Oe(ta,aa,sa),{pivot:!0})},total:{critRate_:Tn}}});function ca(e,n=0,a,o){const s=j(),[r,i]=Et(),l=d.useDeferredValue(r),{gender:m}=V(),f=d.useMemo(()=>l&&la(s,e,n,m,a,o),[l,m,e,s,n,a,o]);return d.useEffect(()=>e?s.chars.follow(e,i):void 0,[e,i,s]),f}function la(e,n,a=0,o,s,r){if(!n)return;if(!a&&!s&&!r){const u=e._getTeamData(n);if(u)return u}const{teamData:i,teamBundle:l}=da(e,n,a,s,r)??{};if(!i||!l)return;const m=Xt(i,o,n),f=jt(m,(u,v)=>{const{data:x,...M}=l[v];return{...u,...M}});return!a&&!s&&!r&&e.cacheTeamData(n,f),f}function da(e,n,a=0,o,s){if(!n)return;const r=e.chars.get(n);if(!r)return;const i=$e(e,!0,a,r,s||(e.weapons.get(r.equippedWeapon)??We()),o??Object.values(r.equippedArtifacts).map(f=>e.arts.get(f)).filter(f=>f));if(!i)return;const l={[n]:i},m={[n]:i.data};return i.character.team.forEach(f=>{if(!f)return;const u=e.chars.get(f);if(!u)return;const v=$e(e,!1,0,{...u,conditional:r.teamConditional[f]??{}},e.weapons.get(u.equippedWeapon)??We(),Object.values(u.equippedArtifacts).map(x=>e.arts.get(x)).filter(x=>x));v&&(l[f]=v,m[f]=v.data)}),{teamData:m,teamBundle:l}}function $e(e,n=!1,a,o,s,r){const i=U(o.key,e.gender);if(!i)return;const l=Se(s.key);if(!l)return;const m=be.getAllDataOfType(i.weaponTypeKey),f=n?(()=>{const{display:M,...R}=l.data;return ze([R,m])})():l.data,u=ze([i.data,f,ln]),x=[...Array.isArray(r)?r.map(M=>Yt(M,a)):[r],Kt(o,n?u:void 0),ve(s),u,Zt,ia];return{character:o,weapon:s,characterSheet:i,weaponSheet:l,data:x}}function gt(e,n,a){const o=tn(e,n),s=qe(e,"icon",n);return a&&o?o:s||""}function ua({art:e,children:n}){const a=t(h,{children:t(K,{variant:"rectangular",width:100,height:100})}),o=t(d.Suspense,{fallback:a,children:t(ha,{art:e})});return t(Y,{placement:"top",title:o,disableInteractive:!0,children:n})}function ha({art:e}){const{t:n}=Te("statKey_gen"),a=dn(e.setKey),{slotKey:o,level:s,rarity:r,mainStatKey:i,substats:l}=e,m=a.getSlotName(o),f=Tt.getVariant(i);return c(h,{p:1,children:[c(p,{variant:"h6",children:[t(un,{slotKey:o,iconProps:D})," ",m]}),c(p,{variant:"subtitle1",color:`${f}.main`,children:[t(Pe,{statKey:i,iconProps:D})," ",n(i)," ",Ht(i,r,s)]}),c(p,{variant:"subtitle2",sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t(ye,{stars:r}),c(k,{color:et.levelVariant(s),children:["+",s]})," "]}),t(h,{py:1,children:l.map(({value:u,key:v,rolls:x})=>!!(u&&v)&&t(Sn,{statKey:v,value:u,color:`roll${Ft(x.length,1,6)}`,prefix:"+"},v))}),t(p,{color:"success.main",children:a.name}),t(nn,{color:"secondary.main",location:e.location})]})}function pa({artifactObj:e,slotKey:n}){if(!e)return t(T,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:t(h,{sx:{width:"100%",pb:"100%",position:"relative"},children:t(h,{sx:{position:"absolute",width:"70%",height:"70%",left:"50%",top:"50%",transform:"translate(-50%, -50%)",opacity:.7},component:"img",src:Ce.slot[n]})})});const{mainStatKey:a,rarity:o,level:s}=e,i=fe.find(l=>e.mainStatKey.includes(l))??"secondary";return t(ua,{art:e,children:c(T,{sx:{display:"flex",flexDirection:"column",position:"relative"},children:[t(h,{component:"img",className:`grad-${o}star`,src:en(e.setKey,e.slotKey),maxWidth:"100%",maxHeight:"100%"}),t(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none"},children:t("strong",{children:t(k,{sx:{p:.5},color:et.levelVariant(s),children:c("strong",{children:["+",s]})})})}),t(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:t(k,{color:i,sx:{p:.5},children:t(Pe,{statKey:a,iconProps:{fontSize:"inherit"}})})})]})})}function fa({sheet:e,addlText:n,children:a}){const o=c(d.Suspense,{fallback:t(K,{variant:"text",width:100}),children:[c(p,{children:[t(hn,{src:Ce.weaponTypes[e.weaponType],size:1.5})," ",e.name]}),n]});return t(Y,{placement:"top",title:o,disableInteractive:!0,children:a})}function ma({weaponId:e}){const n=tt(e),a=(n==null?void 0:n.key)&&Se(n.key),o=d.useMemo(()=>a&&n&&Ue([a.data,ve(n)]),[a,n]);if(!n||!a||!o)return null;const s=c(h,{children:[t(Ee,{node:o.get(C.weapon.main)}),t(Ee,{node:o.get(C.weapon.sub)})]});return c(T,{sx:{height:"100%",maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:[t(h,{display:"flex",flexDirection:"column",alignContent:"flex-end",className:`grad-${a.rarity}star`,children:t(fa,{sheet:a,addlText:s,children:t(h,{component:"img",src:Qe(n.key,n.ascension>=2),maxWidth:"100%",maxHeight:"100%",sx:{mt:"auto"}})})}),t(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none"},children:t("strong",{children:t(k,{color:"primary",children:be.getLevelString(n)})})}),a.hasRefinement&&t(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:t("strong",{children:c(k,{color:"secondary",children:["R",n.refinement]})})})]})}function Ee({node:e}){return c(p,{children:[e.info.icon," ",Je(e)]})}function ga({weaponId:e}){const n=tt(e),a=(n==null?void 0:n.key)&&Se(n.key),o=d.useMemo(()=>a&&n&&Ue([a.data,ve(n)]),[a,n]);return!n||!a||!o?null:t(T,{children:c(h,{display:"flex",children:[t(h,{flexShrink:1,maxWidth:"35%",display:"flex",flexDirection:"column",alignContent:"flex-end",className:`grad-${a.rarity}star`,children:t(h,{component:"img",src:Qe(n.key,n.ascension>=2),width:"100%",height:"auto",sx:{mt:"auto"}})}),c(h,{flexGrow:1,sx:{p:1},children:[t(p,{variant:"body2",gutterBottom:!0,children:t("strong",{children:a==null?void 0:a.name})}),c(p,{variant:"subtitle1",sx:{display:"flex",gap:1},gutterBottom:!0,children:[c(k,{color:"primary",children:["Lv. ",be.getLevelString(n)]}),a.hasRefinement&&c(k,{color:"info",children:["R",n.refinement]})]}),c(p,{variant:"subtitle1",sx:{display:"flex",gap:1},children:[t(je,{node:o.get(C.weapon.main)}),t(je,{node:o.get(C.weapon.sub)})]})]})]})})}function je({node:e}){return Number.isNaN(e.value)?null:c(k,{color:"secondary",children:[e.info.icon," ",Je(e)]})}var we={},va=pe;Object.defineProperty(we,"__esModule",{value:!0});var vt=we.default=void 0,xa=va(he()),ya=W,Sa=(0,xa.default)((0,ya.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder");vt=we.default=Sa;function ba({characterKey:e,onClick:n,onMouseDown:a,onMouseEnter:o,simpleTooltip:s=!1,disableTooltip:r=!1}){const i=nt(e),{favorite:l}=at(e),{gender:m}=V(),{silly:f}=d.useContext(He),u=U(e,m),v=d.useCallback(()=>n==null?void 0:n(e),[e,n]),x=d.useCallback(z=>t(xe,{onClick:v,onMouseDown:a,onMouseEnter:o,children:z}),[v,a,o]),[M,R]=d.useState(!1),$=d.useCallback(()=>!r&&R(!0),[r]),N=d.useCallback(()=>R(!1),[]);d.useEffect(()=>{r&&R(!1)},[r]);const Q=d.useCallback(z=>t(Y,{placement:"top",open:M&&!r,onClose:N,onOpen:$,title:t(d.Suspense,{fallback:t(K,{width:300,height:400}),children:c(p,{children:[u.elementKey&&t(ge,{ele:u.elementKey,iconProps:{fontSize:"inherit",sx:{verticalAlign:"-10%",color:`${u.elementKey}.main`}}})," ",u.name]})}),children:z}),[u.elementKey,u.name,r,N,$,M]),ee=d.useCallback(z=>t(Y,{enterNextDelay:500,enterTouchDelay:500,placement:"top",open:M&&!r,onClose:N,onOpen:$,title:t(h,{sx:{width:300,m:-1},children:t(Da,{hideStats:!0,characterKey:e})}),children:z}),[e,r,N,$,M]);return t(X,{condition:s,wrapper:Q,falseWrapper:ee,children:t(T,{sx:{maxWidth:128,position:"relative",display:"flex",flexDirection:"column"},children:c(X,{condition:!!n||!!a||!!o,wrapper:x,children:[t(h,{display:"flex",className:`grad-${u.rarity}star`,children:t(h,{component:"img",src:gt(e,m,f),maxWidth:"100%",maxHeight:"100%",draggable:!1})}),i&&t(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",top:0},children:t("strong",{children:c(k,{color:"primary",children:[i.level,"/",Fe[i.ascension]]})})}),t(h,{sx:{position:"absolute",top:0,right:0},children:l?t(ot,{fontSize:"small"}):t(vt,{fontSize:"small"})}),i&&t(p,{sx:{position:"absolute",fontSize:"0.75rem",lineHeight:1,opacity:.85,pointerEvents:"none",bottom:0,right:0},children:t("strong",{children:c(k,{color:"secondary",children:["C",i.constellation]})})})]})})})}function Ca({index:e}){return t(T,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:"12.5%"},children:t(h,{component:"img",src:Ce.team[`team${e+2}`],sx:{width:"75%",height:"auto",opacity:.7}})})}function Da({characterKey:e,artifactChildren:n,weaponChildren:a,characterChildren:o,onClick:s,onClickHeader:r,onClickTeammate:i,footer:l,hideStats:m,isTeammateCard:f}){var Me;const u=j(),v=ca(e),x=nt(e),{gender:M}=V(),R=U(e,M),$=kn(e),N=(Me=v==null?void 0:v[e])==null?void 0:Me.target,Q=d.useCallback(()=>e&&(s==null?void 0:s(e)),[e,s]),ee=d.useCallback(Be=>t(xe,{onClick:Q,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:Be}),[Q]),z=d.useMemo(()=>x&&R&&{character:x,characterSheet:R,characterDispatch:$},[x,R,$]),Ie=d.useMemo(()=>N&&v&&{data:N,teamData:v},[N,v]),{favorite:ke}=at(e);return t(d.Suspense,{fallback:t(K,{variant:"rectangular",width:"100%",height:m?300:600}),children:c(Gt,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[t(h,{sx:{display:"flex",position:"absolute",zIndex:2,opacity:.7},children:t(At,{sx:{p:.5},onClick:Be=>u.charMeta.set(e,{favorite:!ke}),children:ke?t(an,{}):t(bn,{})})}),t(X,{condition:!!s,wrapper:ee,children:x&&Ie&&z?t(_a,{characterContextObj:z,dataContextObj:Ie,characterKey:e,onClick:s,onClickHeader:r,isTeammateCard:f,character:x,onClickTeammate:i,hideStats:m,weaponChildren:a,artifactChildren:n,characterChildren:o}):t(wa,{characterKey:e})}),l]})})}function _a({characterContextObj:e,dataContextObj:n,characterKey:a,onClick:o,onClickHeader:s,isTeammateCard:r,character:i,onClickTeammate:l,hideStats:m,weaponChildren:f,artifactChildren:u,characterChildren:v}){return t(Ze.Provider,{value:e,children:c(Z.Provider,{value:n,children:[t(xt,{characterKey:a,onClick:o?void 0:s,children:t(Ia,{})}),c(Ae,{sx:x=>({width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,padding:m?`${x.spacing(1)}!important`:void 0}),children:[t(Ma,{}),!r&&c(G,{container:!0,columns:4,spacing:.75,children:[t(G,{item:!0,xs:1,height:"100%",children:t(ma,{weaponId:i.equippedWeapon})}),Lt(0,2).map(x=>t(G,{item:!0,xs:1,height:"100%",children:i.team[x]?t(ba,{simpleTooltip:m,characterKey:i.team[x],onClick:o?void 0:l}):t(Ca,{index:x})},x))]}),r&&t(ga,{weaponId:i.equippedWeapon}),!r&&!m&&t(Ba,{}),f,u,v]})]})})}function wa({characterKey:e}){return c(me,{children:[t(xt,{characterKey:e,children:t(ka,{characterKey:e})}),t(Ae,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,height:"100%"}})]})}function xt({children:e,characterKey:n,onClick:a}){const{gender:o}=V(),{silly:s}=d.useContext(He),r=U(n,o),i=d.useCallback(m=>t(xe,{onClick:()=>n&&(a==null?void 0:a(n)),sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:m}),[a,n]),l=qe(n,"banner",o);return r?t(X,{condition:!!a,wrapper:i,children:c(h,{display:"flex",position:"relative",className:l?void 0:`grad-${r.rarity}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:`url(${l})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[t(h,{flexShrink:1,component:"img",src:gt(n,o,s),sx:{maxWidth:"40%"},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1}),t(h,{flexGrow:1,sx:{py:1,pr:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-between",children:e})]})}):null}function Ia(){const{characterSheet:e}=d.useContext(Ze),{data:n}=d.useContext(Z),a=n.get(C.charEle).value,o=n.get(C.lvl).value,s=n.get(C.constellation).value,r=n.get(C.asc).value,i=n.get(C.total.autoBoost).value,l=n.get(C.total.skillBoost).value,m=n.get(C.total.burstBoost).value,f=n.get(C.total.auto).value,u=n.get(C.total.skill).value,v=n.get(C.total.burst).value;return c(me,{children:[t(E,{label:t(p,{variant:"subtitle1",children:e.name}),size:"small",color:a,sx:{opacity:.85}}),c(h,{display:"flex",gap:1,sx:{textShadow:"0 0 5px gray"},alignItems:"center",children:[c(h,{children:[c(p,{component:"span",variant:"h6",whiteSpace:"nowrap",children:["Lv. ",o]}),c(p,{component:"span",variant:"h6",color:"text.secondary",children:["/",Fe[r]]})]}),t(p,{component:"span",whiteSpace:"nowrap",sx:{opacity:.85},children:t(k,{color:`roll${s<3?3:s}`,children:t(pn,{color:"white",children:c("strong",{children:["C",s]})})})})]}),c(h,{display:"flex",gap:1,sx:{opacity:.85},children:[t(E,{size:"small",color:i?"info":"secondary",label:t("strong",{children:f})}),t(E,{size:"small",color:l?"info":"secondary",label:t("strong",{children:u})}),t(E,{size:"small",color:m?"info":"secondary",label:t("strong",{children:v})})]}),t(p,{variant:"h6",lineHeight:1,children:t(ye,{stars:e.rarity,colored:!0,inline:!0})})]})}function ka({characterKey:e}){const{gender:n}=V(),a=U(e,n);return a?c(me,{children:[t(E,{label:t(p,{variant:"subtitle1",children:a.name}),size:"small",color:a.elementKey,sx:{opacity:.85}}),t(h,{mt:1,children:t(p,{variant:"h4",children:t(k,{children:"NEW"})})}),t(p,{mt:1.5,children:t(ye,{stars:a.rarity,colored:!0})})]}):null}function Ma(){const e=j(),{data:n}=d.useContext(Z),a=d.useMemo(()=>Ot.map(o=>{var s;return[o,e.arts.get(((s=n.get(C.art[o].id).value)==null?void 0:s.toString())??"")]}),[n,e]);return t(G,{direction:"row",container:!0,spacing:.75,columns:5,children:a.map(([o,s])=>t(G,{item:!0,xs:1,children:t(pa,{artifactObj:s,slotKey:o})},o))})}function Ba(){const{data:e}=d.useContext(Z);return c(h,{sx:{width:"100%"},children:[Object.values(e.getDisplay().basic).map(n=>t(cn,{node:n},JSON.stringify(n.info))),e.get(C.special).info.name&&c(h,{sx:{display:"flex",gap:1,alignItems:"center"},children:[t(p,{flexGrow:1,children:t("strong",{children:"Specialized:"})}),e.get(C.special).info.icon,t(p,{children:e.get(C.special).info.name})]})]})}const Ra=Ke([...Le]);function Ja({value:e,totals:n,onChange:a,...o}){const s=Ge(),r=!se(s.breakpoints.up("sm"));return t(sn,{exclusive:!0,value:e,...o,children:Le.map(i=>t(Ye,{value:i,sx:{p:r?1:void 0,minWidth:r?0:"6em",display:"flex",gap:r?0:1},onClick:()=>a(Ra(e,i)),children:c(h,{display:"flex",children:[t("strong",{children:i}),t(on,{}),!r&&t(E,{label:n[i],size:"small"})]})},i))})}const Na=Vt(Ye,{shouldForwardProp:e=>e!=="baseColor"&&e!=="selectedColor"})(({theme:e,baseColor:n="secondary",selectedColor:a="success"})=>({"&":{backgroundColor:e.palette[n].main,color:e.palette[n].contrastText},"&:hover":{backgroundColor:e.palette[n].dark},"&.Mui-selected":{backgroundColor:e.palette[a].main,color:e.palette[a].contrastText},"&.Mui-selected:hover":{backgroundColor:e.palette[a].dark},"&.Mui-disabled":{backgroundColor:e.palette[n].dark},"&.Mui-selected.Mui-disabled":{backgroundColor:e.palette[a].dark}})),za=Na,Wa=Ke([...L]);function Xa({value:e,totals:n,onChange:a,...o}){const s=Ge(),r=!se(s.breakpoints.up("md")),i=!se(s.breakpoints.up("sm"));return t(rn,{exclusive:!0,value:e,...o,children:L.map(l=>c(za,{value:l,sx:{p:r?1:void 0,minWidth:r?0:"6em",display:"flex"},selectedColor:l,onClick:()=>a(Wa(e,l)),children:[t(ge,{ele:l,iconProps:{fontSize:r&&!i?"inherit":void 0}}),!i&&t(E,{sx:{ml:.5},label:n[l],size:"small"})]},l))})}function Ya(){const e=j(),n=qt(),{params:{tab:a=""}}=Pt({path:"/characters/:charKey/:tab",end:!1})??{params:{tab:""}};return d.useCallback(s=>{const r=e.chars.get(s);let i=a;r||(e.chars.getWithInitWeapon(s),i=""),n(`/characters/${s}/${i}`)},[n,e,a])}function Ka(e,n){return{new:a=>e.chars.get(a)?0:1,name:a=>re.t(`${n?"sillyWisher_charNames":"charNames_gen"}:${ie(a,e.gender)}`).toString(),level:a=>{const o=e.chars.get(a);return o?o.level*(o.ascension+1):0},rarity:a=>ce.char.data[le(a)].rarity??0,favorite:a=>e.charMeta.get(a).favorite?1:0}}function Za(e,n){return{element:(a,o)=>o.includes(Ut(a)),weaponType:(a,o)=>o.includes(ce.char.data[le(a)].weaponType),rarity:(a,o)=>o.includes(ce.char.data[le(a)].rarity),name:(a,o)=>o===void 0||re.t(`${n?"sillyWisher_charNames":"charNames_gen"}:${ie(a,e.gender)}`).toLowerCase().includes(o.toLowerCase())||n&&re.t(`charNames_gen:${ie(a,e.gender)}`).toLowerCase().includes(o.toLowerCase()),new:(a,o)=>o===void 0||o===(e.chars.get(a)?"no":"yes")}}const eo={name:["favorite","name"],level:["favorite","level","rarity","name"],rarity:["favorite","rarity","level","name"]};export{ua as A,Ca as B,Ja as C,Va as D,Xa as E,qa as F,Pa as S,Ua as T,fa as W,Da as a,Za as b,eo as c,Dn as d,Ka as e,ba as f,pa as g,kn as h,ca as i,da as j,at as k,bn as l,xn as m,la as n,nt as o,gt as p,Qa as r,Ya as u};
