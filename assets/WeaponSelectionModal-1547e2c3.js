import{u as L,r as t,e as C,a as N,dc as f,a7 as _,k as a,i as l,C as T,x as k,D as G,G as W,m as R,B as w,T as S,I as j,n as $,K}from"./index-52652410.js";import{C as P,B as V}from"./index-e160f5e8.js";import{d as q}from"./Close-99e9cee7.js";import{g as o}from"./index-ddc46287.js";import{c as I}from"./totalUtils-c715a497.js";import{T as J,h as O}from"./StarDisplay-4e44c303.js";import{W as Q,a as U}from"./WeaponCard-7f840d7c.js";import{i as X}from"./ColoredText-fdad0407.js";import"./DropdownButton-1f62102f.js";import"./SolidToggleButtonGroup-3ce817a1.js";import"./useWeapon-08ae6f71.js";import"./ConditionalWrapper-d302f5e9.js";function le({show:b,ascension:v=0,onHide:p,onSelect:D,filter:g=()=>!0,weaponTypeFilter:n}){const{t:d}=L(["page_weapon","weaponNames_gen"]),[m,x]=t.useState(n?[n]:[...C]),c=N(),[E,M]=t.useState(c.displayWeapon.get());t.useEffect(()=>c.displayWeapon.follow((e,s)=>M(s)),[c]),t.useEffect(()=>{n&&x([n])},[n]);const[y,z]=t.useState(""),u=t.useDeferredValue(y),{rarity:h}=E,i=t.useMemo(()=>f.filter(e=>g(o(e))).filter(e=>m.includes(o(e).weaponType)).filter(e=>!u||d(`weaponNames_gen:${e}`).toLowerCase().includes(u.toLowerCase())).filter(e=>h.includes(o(e).rarity)).sort((e,s)=>o(s).rarity-o(e).rarity),[u,g,h,d,m]),A=t.useMemo(()=>I(C,e=>f.forEach(s=>{const r=o(s).weaponType;e[r].total++,i.includes(s)&&e[r].current++})),[i]),B=t.useMemo(()=>I(_,e=>f.forEach(s=>{const r=o(s).rarity;e[r].total++,i.includes(s)&&e[r].current++})),[i]);return a(K,{open:b,onClose:p,children:l($,{children:[l(T,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[a(Q,{value:m,totals:A,onChange:x,disabled:!!n,size:"small"}),a(U,{sx:{height:"100%"},onChange:e=>c.displayWeapon.set({rarity:e}),value:h,totals:B,size:"small"}),a(J,{autoFocus:!0,size:"small",value:y,onChange:e=>z(e.target.value),label:d("weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}}),a(k,{onClick:p,sx:{ml:"auto"},children:a(q,{})})]}),a(G,{}),a(T,{children:a(W,{container:!0,spacing:1,children:i.map(e=>{var r;const s=o(e);return a(W,{item:!0,lg:3,md:4,children:a(R,{sx:{height:"100%"},children:l(P,{onClick:()=>{p(),D(e)},sx:{display:"flex"},children:[a(w,{component:"img",src:V(e,v>=2),sx:{width:100,height:"auto"},className:` grad-${s.rarity}star`}),l(w,{sx:{flexGrow:1,px:1},children:[a(S,{variant:"subtitle1",children:s.name}),l(S,{sx:{display:"flex",alignItems:"baseline"},children:[a(j,{size:1.5,src:(r=X.weaponTypes)==null?void 0:r[s.weaponType]}),a(O,{stars:s.rarity,colored:!0})]})]})]})})},e)})})})]})})}export{le as default};
