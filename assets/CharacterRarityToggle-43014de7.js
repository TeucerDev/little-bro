import{a as T,al as Ze,ak as et,am as Ce,aB as G,an as Y,r as l,ao as pt,ar as mt,b_ as ga,at as Oe,j as U,au as tt,ay as Rn,ax as Ln,b$ as $a,c as ze,aE as kn,aF as jt,c0 as Sn,T as y,K as Ta,k as e,c1 as $n,c2 as Tn,c3 as jn,bj as In,F as Dn,w as Re,x as Le,i as u,v as se,s as O,c4 as Mn,aw as Un,bX as Bn,ae as Je,B as f,b as be,I as Z,m as zt,C as A,aH as ne,G as v,bo as Nt,a8 as ft,l as ve,c5 as An,bs as it,b4 as me,g as Et,bm as On,c6 as zn,n as we,aP as st,aO as ja,V as Nn,c7 as En,as as Wn,c8 as xa,c9 as Pn,ca as wt,cb as _t,cc as Rt,bd as Fn,W as at,D as K,aK as ue,aL as Wt,E,aJ as xe,ah as nt,u as V,b7 as Ca,b8 as ba,b6 as ya,H as qe,q as le,o as Ye,f as pe,aN as Ie,aV as J,M as rt,b9 as qn,cd as Ia,ce as Hn,cf as Da,cg as Vn,ch as Gn,ci as Kn,aG as Yn,cj as Xn,_ as Ma,a4 as Ua,a3 as Jn,ck as Qn,J as Pt,cl as Ba,z as gt,aQ as Zn,bW as er,bR as tr,a5 as xt,cm as ar,b1 as nr,aI as rr,cn as It,co as Dt,cp as or,h as Mt,d as Ft,cq as ir,cr as Lt,e as sr,bE as lr,a9 as Aa}from"./index-c6225add.js";import{v as qt,t as Ht,w as Vt,i as Oa,j as cr,k as dr,C as F,H as ur,x as hr,y as pr,c as De,u as mr,g as fr,z as gr,s as xr,b as za,T as Na,d as Gt,B as Cr}from"./TeamCard-27b19e28.js";import{D as X}from"./DataContext-b32ca7ae.js";import{p as fe,g as de,C as Ne,u as z,E as Kt,S as ae,q as Yt,a as Ea,B as Wa,y as Pa,G as br,w as yr,x as Fa,n as vr,r as wr,v as va,H as _r,I as Rr,J as Lr,K as kr,b as wa,c as _a,F as Sr}from"./index-c6848864.js";import{d as _e}from"./Close-20bcbd75.js";import{I as Me,i as He,C as Ct,B as $r}from"./ColoredText-0d6b1724.js";import{a as qa,C as Tr,L as Se,b as jr,A as Ir,W as Ha,D as Va,c as Dr}from"./WeaponEditor-8b738759.js";import{b as Xt,c as Ga,e as Jt,C as Mr,T as Qe,u as Ka,a as Ya,S as Xa,f as Qt,s as Ja,d as Qa,g as Ur}from"./StarDisplay-56e2aafb.js";import{F as Zt,C as ea,A as Za,d as Br}from"./ConditionalWrapper-474dac7d.js";import{u as Ut,f as Ar,A as lt,d as Or,i as zr,b as Nr}from"./ArtifactSort-450d2a4d.js";import{b as ct,c as Er,d as Wr,w as Pr,W as Fr}from"./WeaponCard-c060685b.js";import{B as ot,d as Te}from"./BootstrapTooltip-97d43dec.js";import{a as en,d as tn}from"./CheckBoxOutlineBlank-bc73910c.js";import{A as qr,g as an,a as Hr,c as Vr}from"./Artifact-d23bf7c9.js";import{g as bt,W as nn}from"./index-f6f71f08.js";import{u as Gr}from"./useWeapon-ddf7da36.js";import{C as ge}from"./CardHeader-d96ce8ba.js";import{S as Kr}from"./SlotIcon-5678a8bc.js";import{C as rn,a as Yr}from"./ChevronRight-a3584e49.js";import{T as Fe,S as yt,h as ta,a as Xr}from"./SolidToggleButtonGroup-fd78f201.js";import Jr from"./WeaponSelectionModal-d8c14d1e.js";import{C as Qr,a as Zr,M as eo}from"./DropdownButton-f62519f0.js";import{d as to}from"./Settings-efd8dc86.js";import{c as Ra}from"./totalUtils-fbd35f32.js";function ao(t){const a=T();return Xt(a.builds,t)}function on(t){const a=T();return Xt(a.buildTcs,t)}function Ve(t){const a=T();return Xt(a.optConfigs,t)}function no(t){const{badgeContent:a,invisible:n=!1,max:r=99,showZero:i=!1}=t,o=Ga({badgeContent:a,max:r});let s=n;n===!1&&a===0&&!i&&(s=!0);const{badgeContent:d,max:p=r}=s?o:t,c=d&&Number(d)>p?`${p}+`:d;return{badgeContent:d,invisible:s,max:p,displayValue:c}}function ro(t){return et("MuiBadge",t)}const oo=Ze("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),ke=oo,io=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],kt=10,St=4,so=t=>{const{color:a,anchorOrigin:n,invisible:r,overlap:i,variant:o,classes:s={}}=t,d={root:["root"],badge:["badge",o,r&&"invisible",`anchorOrigin${G(n.vertical)}${G(n.horizontal)}`,`anchorOrigin${G(n.vertical)}${G(n.horizontal)}${G(i)}`,`overlap${G(i)}`,a!=="default"&&`color${G(a)}`]};return tt(d,ro,s)},lo=Ce("span",{name:"MuiBadge",slot:"Root",overridesResolver:(t,a)=>a.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),co=Ce("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.badge,a[n.variant],a[`anchorOrigin${G(n.anchorOrigin.vertical)}${G(n.anchorOrigin.horizontal)}${G(n.overlap)}`],n.color!=="default"&&a[`color${G(n.color)}`],n.invisible&&a.invisible]}})(({theme:t,ownerState:a})=>Y({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:kt*2,lineHeight:1,padding:"0 6px",height:kt*2,borderRadius:kt,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen})},a.color!=="default"&&{backgroundColor:(t.vars||t).palette[a.color].main,color:(t.vars||t).palette[a.color].contrastText},a.variant==="dot"&&{borderRadius:St,height:St*2,minWidth:St*2,padding:0},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular"&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="rectangular"&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular"&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="rectangular"&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular"&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="right"&&a.overlap==="circular"&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},a.anchorOrigin.vertical==="top"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular"&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},a.anchorOrigin.vertical==="bottom"&&a.anchorOrigin.horizontal==="left"&&a.overlap==="circular"&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},a.invisible&&{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})})),uo=l.forwardRef(function(a,n){var r,i,o,s,d,p;const c=pt({props:a,name:"MuiBadge"}),{anchorOrigin:h={vertical:"top",horizontal:"right"},className:m,component:x,components:g={},componentsProps:C={},children:b,overlap:R="rectangular",color:$="default",invisible:S=!1,max:M=99,badgeContent:W,slots:I,slotProps:k,showZero:D=!1,variant:L="standard"}=c,w=mt(c,io),{badgeContent:N,invisible:_,max:re,displayValue:oe}=no({max:M,invisible:S,badgeContent:W,showZero:D}),te=Ga({anchorOrigin:h,color:$,overlap:R,variant:L,badgeContent:W}),q=_||N==null&&L!=="dot",{color:Q=$,overlap:H=R,anchorOrigin:ee=h,variant:B=L}=q?te:c,ie=B!=="dot"?oe:void 0,Ue=Y({},c,{badgeContent:N,invisible:q,max:re,displayValue:ie,showZero:D,anchorOrigin:ee,color:Q,overlap:H,variant:B}),Ee=so(Ue),Be=(r=(i=I==null?void 0:I.root)!=null?i:g.Root)!=null?r:lo,ce=(o=(s=I==null?void 0:I.badge)!=null?s:g.Badge)!=null?o:co,he=(d=k==null?void 0:k.root)!=null?d:C.root,We=(p=k==null?void 0:k.badge)!=null?p:C.badge,j=ga({elementType:Be,externalSlotProps:he,externalForwardedProps:w,additionalProps:{ref:n,as:x},ownerState:Ue,className:Oe(he==null?void 0:he.className,Ee.root,m)}),P=ga({elementType:ce,externalSlotProps:We,ownerState:Ue,className:Oe(Ee.badge,We==null?void 0:We.className)});return U.jsxs(Be,Y({},j,{children:[b,U.jsx(ce,Y({},P,{children:ie}))]}))}),ho=uo;function po(t){return et("PrivateSwitchBase",t)}Ze("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const mo=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],fo=t=>{const{classes:a,checked:n,disabled:r,edge:i}=t,o={root:["root",n&&"checked",r&&"disabled",i&&`edge${G(i)}`],input:["input"]};return tt(o,po,a)},go=Ce(Rn)(({ownerState:t})=>Y({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),xo=Ce("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Co=l.forwardRef(function(a,n){const{autoFocus:r,checked:i,checkedIcon:o,className:s,defaultChecked:d,disabled:p,disableFocusRipple:c=!1,edge:h=!1,icon:m,id:x,inputProps:g,inputRef:C,name:b,onBlur:R,onChange:$,onFocus:S,readOnly:M,required:W=!1,tabIndex:I,type:k,value:D}=a,L=mt(a,mo),[w,N]=Ln({controlled:i,default:!!d,name:"SwitchBase",state:"checked"}),_=$a(),re=B=>{S&&S(B),_&&_.onFocus&&_.onFocus(B)},oe=B=>{R&&R(B),_&&_.onBlur&&_.onBlur(B)},te=B=>{if(B.nativeEvent.defaultPrevented)return;const ie=B.target.checked;N(ie),$&&$(B,ie)};let q=p;_&&typeof q>"u"&&(q=_.disabled);const Q=k==="checkbox"||k==="radio",H=Y({},a,{checked:w,disabled:q,disableFocusRipple:c,edge:h}),ee=fo(H);return U.jsxs(go,Y({component:"span",className:Oe(ee.root,s),centerRipple:!0,focusRipple:!c,disabled:q,tabIndex:null,role:void 0,onFocus:re,onBlur:oe,ownerState:H,ref:n},L,{children:[U.jsx(xo,Y({autoFocus:r,checked:i,defaultChecked:d,className:ee.input,disabled:q,id:Q?x:void 0,name:b,onChange:te,readOnly:M,ref:C,required:W,ownerState:H,tabIndex:I,type:k},k==="checkbox"&&D===void 0?{}:{value:D},g)),w?o:m]}))}),bo=Co,yo=ze(U.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),vo=ze(U.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),wo=ze(U.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function _o(t){return et("MuiCheckbox",t)}const Ro=Ze("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),$t=Ro,Lo=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],ko=t=>{const{classes:a,indeterminate:n,color:r,size:i}=t,o={root:["root",n&&"indeterminate",`color${G(r)}`,`size${G(i)}`]},s=tt(o,_o,a);return Y({},a,s)},So=Ce(bo,{shouldForwardProp:t=>kn(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[a.root,n.indeterminate&&a.indeterminate,n.color!=="default"&&a[`color${G(n.color)}`]]}})(({theme:t,ownerState:a})=>Y({color:(t.vars||t).palette.text.secondary},!a.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${a.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:jt(a.color==="default"?t.palette.action.active:t.palette[a.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},a.color!=="default"&&{[`&.${$t.checked}, &.${$t.indeterminate}`]:{color:(t.vars||t).palette[a.color].main},[`&.${$t.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),$o=U.jsx(vo,{}),To=U.jsx(yo,{}),jo=U.jsx(wo,{}),Io=l.forwardRef(function(a,n){var r,i;const o=pt({props:a,name:"MuiCheckbox"}),{checkedIcon:s=$o,color:d="primary",icon:p=To,indeterminate:c=!1,indeterminateIcon:h=jo,inputProps:m,size:x="medium",className:g}=o,C=mt(o,Lo),b=c?h:p,R=c?h:s,$=Y({},o,{color:d,indeterminate:c,size:x}),S=ko($);return U.jsx(So,Y({type:"checkbox",inputProps:Y({"data-indeterminate":c},m),icon:l.cloneElement(b,{fontSize:(r=b.props.fontSize)!=null?r:x}),checkedIcon:l.cloneElement(R,{fontSize:(i=R.props.fontSize)!=null?i:x}),ownerState:$,ref:n,className:Oe(S.root,g)},C,{classes:S}))}),Do=Io;function Mo(t){return et("MuiFormControlLabel",t)}const Uo=Ze("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Xe=Uo,Bo=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Ao=t=>{const{classes:a,disabled:n,labelPlacement:r,error:i,required:o}=t,s={root:["root",n&&"disabled",`labelPlacement${G(r)}`,i&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return tt(s,Mo,a)},Oo=Ce("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:n}=t;return[{[`& .${Xe.label}`]:a.label},a.root,a[`labelPlacement${G(n.labelPlacement)}`]]}})(({theme:t,ownerState:a})=>Y({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Xe.disabled}`]:{cursor:"default"}},a.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},a.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},a.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Xe.label}`]:{[`&.${Xe.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})),zo=Ce("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,a)=>a.asterisk})(({theme:t})=>({[`&.${Xe.error}`]:{color:(t.vars||t).palette.error.main}})),No=l.forwardRef(function(a,n){var r,i;const o=pt({props:a,name:"MuiFormControlLabel"}),{className:s,componentsProps:d={},control:p,disabled:c,disableTypography:h,label:m,labelPlacement:x="end",required:g,slotProps:C={}}=o,b=mt(o,Bo),R=$a(),$=(r=c??p.props.disabled)!=null?r:R==null?void 0:R.disabled,S=g??p.props.required,M={disabled:$,required:S};["checked","name","onChange","value","inputRef"].forEach(w=>{typeof p.props[w]>"u"&&typeof o[w]<"u"&&(M[w]=o[w])});const W=Sn({props:o,muiFormControl:R,states:["error"]}),I=Y({},o,{disabled:$,labelPlacement:x,required:S,error:W.error}),k=Ao(I),D=(i=C.typography)!=null?i:d.typography;let L=m;return L!=null&&L.type!==y&&!h&&(L=U.jsx(y,Y({component:"span"},D,{className:Oe(k.label,D==null?void 0:D.className),children:L}))),U.jsxs(Oo,Y({className:Oe(k.root,s),ownerState:I,ref:n},b,{children:[l.cloneElement(p,M),S?U.jsxs(Ta,{direction:"row",alignItems:"center",children:[L,U.jsxs(zo,{ownerState:I,"aria-hidden":!0,className:k.asterisk,children:[" ","*"]})]}):L]}))}),Eo=No;function sn({slotKey:t,iconProps:a={}}){switch(t){case"flower":return e(Dn,{...a});case"plume":return e(In,{...a});case"sands":return e(jn,{...a});case"goblet":return e(Tn,{...a});case"circlet":return e($n,{...a})}}var aa={},Wo=Le;Object.defineProperty(aa,"__esModule",{value:!0});var dt=aa.default=void 0,Po=Wo(Re()),Fo=U,qo=(0,Po.default)((0,Fo.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");dt=aa.default=qo;function Ho({title:t,children:a,id:n="dropdownbtn",...r}){const[i,o]=l.useState(null),s=!!i,d=l.useCallback(c=>o(c.currentTarget),[o]),p=l.useCallback(()=>o(null),[o]);return u(l.Suspense,{fallback:e(O,{endIcon:e(dt,{}),...r,children:e(se,{width:50})}),children:[e(O,{...r,id:n,"aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":s?"true":void 0,onClick:d,endIcon:e(dt,{}),children:t}),e(Bn,{id:"basic-menu",anchorEl:i,open:s,placement:"bottom-start",transition:!0,onClick:p,sx:{zIndex:1500},children:({TransitionProps:c,placement:h})=>e(Mn,{...c,style:{transformOrigin:h==="bottom-start"?"left top":"left bottom"},children:e(Un,{sx:{maxHeight:"50vh",backgroundImage:"linear-gradient(rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.12))",boxShadow:"rgb(0 0 0 / 20%) 0px 5px 5px -3px, rgb(0 0 0 / 14%) 0px 8px 10px 1px, rgb(0 0 0 / 12%) 0px 3px 14px 2px",paddingTop:"1px",paddingBottom:"1px",overflow:"auto"},children:e(Qr,{onClickAway:p,children:u("div",{children:[" ",e(l.Suspense,{fallback:e(se,{width:"100%",height:"1000"}),children:e(Zr,{"aria-labelledby":n,children:a})})]})})})})})]})}const Vo=ze(U.jsx("path",{d:"M21.6 18.2 13 11.75v-.91c1.65-.49 2.8-2.17 2.43-4.05-.26-1.31-1.3-2.4-2.61-2.7C10.54 3.57 8.5 5.3 8.5 7.5h2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5c0 .84-.69 1.52-1.53 1.5-.54-.01-.97.45-.97.99v1.76L2.4 18.2c-.77.58-.36 1.8.6 1.8h18c.96 0 1.37-1.22.6-1.8zM6 18l6-4.5 6 4.5H6z"}),"Checkroom"),na=ze(U.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder"),Go=ze(U.jsx("path",{d:"M17.5 9.5C17.5 6.46 15.04 4 12 4S6.5 6.46 6.5 9.5c0 2.7 1.94 4.93 4.5 5.4V17H9v2h2v2h2v-2h2v-2h-2v-2.1c2.56-.47 4.5-2.7 4.5-5.4zm-9 0C8.5 7.57 10.07 6 12 6s3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5z"}),"Female"),Ko=ze(U.jsx("path",{d:"M9.5 11c1.93 0 3.5 1.57 3.5 3.5S11.43 18 9.5 18 6 16.43 6 14.5 7.57 11 9.5 11zm0-2C6.46 9 4 11.46 4 14.5S6.46 20 9.5 20s5.5-2.46 5.5-5.5c0-1.16-.36-2.23-.97-3.12L18 7.42V10h2V4h-6v2h2.58l-3.97 3.97C11.73 9.36 10.66 9 9.5 9z"}),"Male"),Yo=""+new URL("splash_aether-7358d244.png",import.meta.url).href,Xo=""+new URL("splash_albedo-37c05d76.png",import.meta.url).href,Jo=""+new URL("splash_alhaitham-1e0549dd.png",import.meta.url).href,Qo=""+new URL("splash_amber-51176566.png",import.meta.url).href,Zo=""+new URL("splash_ayaka-6fa3baa9.png",import.meta.url).href,ei=""+new URL("splash_ayato-80dc87d2.png",import.meta.url).href,ti=""+new URL("splash_baizhu-e00c9e38.png",import.meta.url).href,ai=""+new URL("splash_barbara-c0390dce.png",import.meta.url).href,ni=""+new URL("splash_beidou-bc8a24cb.png",import.meta.url).href,ri=""+new URL("splash_bennett-50399e82.png",import.meta.url).href,oi=""+new URL("splash_candace-d08ffe76.png",import.meta.url).href,ii=""+new URL("splash_charlotte-f4dc3ffe.png",import.meta.url).href,si=""+new URL("splash_chevreuse-b62095f4.png",import.meta.url).href,li=""+new URL("splash_chiori-0fd0d497.png",import.meta.url).href,ci=""+new URL("splash_chongyun-6d2df2ec.png",import.meta.url).href,di=""+new URL("splash_collei-504a299e.png",import.meta.url).href,ui=""+new URL("splash_cyno-ad2ccd61.png",import.meta.url).href,hi=""+new URL("splash_dehya-516792b5.png",import.meta.url).href,pi=""+new URL("splash_diluc-aca80da5.png",import.meta.url).href,mi=""+new URL("splash_diona-60ac79e8.png",import.meta.url).href,fi=""+new URL("splash_dori-9e4fe1f4.png",import.meta.url).href,gi=""+new URL("splash_eula-1491affb.png",import.meta.url).href,xi=""+new URL("splash_faruzan-53cea880.png",import.meta.url).href,Ci=""+new URL("splash_fischl-81de0725.png",import.meta.url).href,bi=""+new URL("splash_freminet-87ef7da9.png",import.meta.url).href,yi=""+new URL("splash_furina-132cdf4e.png",import.meta.url).href,vi=""+new URL("splash_gaming-f942e04b.png",import.meta.url).href,wi=""+new URL("splash_ganyu-3428e56a.png",import.meta.url).href,_i=""+new URL("splash_gorou-2540c1f5.png",import.meta.url).href,Ri=""+new URL("splash_heizou-778f17a2.png",import.meta.url).href,Li=""+new URL("splash_hutao-d7962623.png",import.meta.url).href,ki=""+new URL("splash_itto-89b11acb.png",import.meta.url).href,Si=""+new URL("splash_jean-8b1a28fe.png",import.meta.url).href,$i=""+new URL("splash_kaeya-e26022f0.png",import.meta.url).href,Ti=""+new URL("splash_kaveh-a63cd11f.png",import.meta.url).href,ji=""+new URL("splash_kazuha-94865d22.png",import.meta.url).href,Ii=""+new URL("splash_keqing-0cd58460.png",import.meta.url).href,Di=""+new URL("splash_kirara-0b285e89.png",import.meta.url).href,Mi=""+new URL("splash_klee-81a7fd6f.png",import.meta.url).href,Ui=""+new URL("splash_kokomi-7dc7c799.png",import.meta.url).href,Bi=""+new URL("splash_kuki-2e7b6638.png",import.meta.url).href,Ai=""+new URL("splash_layla-45b01b3a.png",import.meta.url).href,Oi=""+new URL("splash_lisa-f07e93de.png",import.meta.url).href,zi=""+new URL("splash_lumine-51240648.png",import.meta.url).href,Ni=""+new URL("splash_lynette-e6d6d59c.png",import.meta.url).href,Ei=""+new URL("splash_lyney-e23fc621.png",import.meta.url).href,Wi=""+new URL("splash_mika-d7bec99e.png",import.meta.url).href,Pi=""+new URL("splash_mona-a101d11b.png",import.meta.url).href,Fi=""+new URL("splash_nahida-5336f545.png",import.meta.url).href,qi=""+new URL("splash_navia-749d043e.png",import.meta.url).href,Hi=""+new URL("splash_neuvillette-f6712d84.png",import.meta.url).href,Vi=""+new URL("splash_nilou-02522a20.png",import.meta.url).href,Gi=""+new URL("splash_ningguang-0423cf3a.png",import.meta.url).href,Ki=""+new URL("splash_noelle-3c164134.png",import.meta.url).href,Yi=""+new URL("splash_qiqi-9882f0de.png",import.meta.url).href,Xi=""+new URL("splash_raiden-ce0042a0.png",import.meta.url).href,Ji=""+new URL("splash_razor-dfd28235.png",import.meta.url).href,Qi=""+new URL("splash_rosaria-beb57b8a.png",import.meta.url).href,Zi=""+new URL("splash_sara-1f76a85f.png",import.meta.url).href,es=""+new URL("splash_sayu-afc9c432.png",import.meta.url).href,ts=""+new URL("splash_shenhe-ba31eb5d.png",import.meta.url).href,as=""+new URL("splash_sucrose-ad665b53.png",import.meta.url).href,ns=""+new URL("splash_tartaglia-9aaa2f1a.png",import.meta.url).href,rs=""+new URL("splash_thoma-004bf569.png",import.meta.url).href,os=""+new URL("splash_tighnari-3ce7dd13.png",import.meta.url).href,is=""+new URL("splash_venti-ea8e2087.png",import.meta.url).href,ss=""+new URL("splash_wanderer-645fe3d8.png",import.meta.url).href,ls=""+new URL("splash_wriothesley-94b73230.png",import.meta.url).href,cs=""+new URL("splash_xiangling-058aca33.png",import.meta.url).href,ds=""+new URL("splash_xianyun-946028bc.png",import.meta.url).href,us=""+new URL("splash_xiao-69656d36.png",import.meta.url).href,hs=""+new URL("splash_xingqiu-fe033a4f.png",import.meta.url).href,ps=""+new URL("splash_xinyan-bb9c21b3.png",import.meta.url).href,ms=""+new URL("splash_yae-5a7bf919.png",import.meta.url).href,fs=""+new URL("splash_yanfei-ecb8fb25.png",import.meta.url).href,gs=""+new URL("splash_yaoyao-8b72be49.png",import.meta.url).href,xs=""+new URL("splash_yelan-26eec3f5.png",import.meta.url).href,Cs=""+new URL("splash_yoimiya-2d38f125.png",import.meta.url).href,bs=""+new URL("splash_yunjin-538f24e0.png",import.meta.url).href,ys=""+new URL("splash_zhongli-c0ebbd75.png",import.meta.url).href,vs={Albedo:Xo,Alhaitham:Jo,Amber:Qo,AratakiItto:ki,Baizhu:ti,Barbara:ai,Beidou:ni,Bennett:ri,Candace:oi,Charlotte:ii,Chevreuse:si,Chiori:li,Chongyun:ci,Collei:di,Cyno:ui,Dehya:hi,Diluc:pi,Diona:mi,Dori:fi,Eula:gi,Faruzan:xi,Fischl:Ci,Freminet:bi,Furina:yi,Gaming:vi,Ganyu:wi,Gorou:_i,HuTao:Li,Jean:Si,KaedeharaKazuha:ji,Kaeya:$i,KamisatoAyaka:Zo,KamisatoAyato:ei,Kaveh:Ti,Keqing:Ii,Kirara:Di,Klee:Mi,KujouSara:Zi,KukiShinobu:Bi,Layla:Ai,Lisa:Oi,Lynette:Ni,Lyney:Ei,Mika:Wi,Mona:Pi,Nahida:Fi,Navia:qi,Neuvillette:Hi,Nilou:Vi,Ningguang:Gi,Noelle:Ki,Qiqi:Yi,RaidenShogun:Xi,Razor:Ji,Rosaria:Qi,SangonomiyaKokomi:Ui,Sayu:es,Shenhe:ts,ShikanoinHeizou:Ri,Sucrose:as,Tartaglia:ns,Thoma:rs,Tighnari:os,TravelerF:zi,TravelerM:Yo,Venti:is,Wanderer:ss,Wriothesley:ls,Xiangling:cs,Xianyun:ds,Xiao:us,Xingqiu:hs,Xinyan:ps,YaeMiko:ms,Yanfei:fs,Yaoyao:gs,Yelan:xs,Yoimiya:Cs,YunJin:bs,Zhongli:ys};function ws(t,a){return vs[Je(t,a)]??""}function ra(t){const a=T();return l.useCallback(n=>{if(!t)return;const r=a.chars.get(t);r&&a.chars.set(t,{...r,...n})},[t,a])}function ln(){const{data:t}=l.useContext(X);return u(f,{sx:{width:"100%"},children:[Object.values(t.getDisplay().basic).map(a=>e(qa,{node:a},JSON.stringify(a.info))),t.get(fe.special).info.name&&u(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(y,{flexGrow:1,children:e("strong",{children:"Specialized:"})}),t.get(fe.special).info.icon,e(y,{children:t.get(fe.special).info.name})]})]})}function _s({characterKey:t,onClick:a,onClickHeader:n,footer:r,hideStats:i}){var $;const o=T(),s=qt(t),d=Ht(t),{gender:p}=be(),c=de(t,p),h=ra(t),m=($=s==null?void 0:s[t])==null?void 0:$.target,x=l.useCallback(()=>t&&(a==null?void 0:a(t)),[t,a]),g=l.useCallback(S=>e(Ne,{onClick:x,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:S}),[x]),C=l.useMemo(()=>d&&c&&{character:d,characterSheet:c,characterDispatch:h},[d,c,h]),b=l.useMemo(()=>m&&s&&{data:m,teamData:s},[m,s]),{favorite:R}=Vt(t);return e(l.Suspense,{fallback:e(se,{variant:"rectangular",width:"100%",height:i?300:600}),children:u(zt,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e(f,{sx:{display:"flex",position:"absolute",zIndex:2,opacity:.7},children:e(Z,{sx:{p:.5},onClick:S=>o.charMeta.set(t,{favorite:!R}),children:R?e(Zt,{}):e(na,{})})}),e(ea,{condition:!!a,wrapper:g,children:d&&b&&C?e(Rs,{characterContextObj:C,dataContextObj:b,characterKey:t,onClick:a,onClickHeader:()=>n==null?void 0:n(t),hideStats:i}):e(Ls,{characterKey:t})}),r]})})}function Rs({characterContextObj:t,dataContextObj:a,characterKey:n,onClick:r,onClickHeader:i,hideStats:o}){return e(F.Provider,{value:t,children:u(X.Provider,{value:a,children:[e(Oa,{characterKey:n,onClick:r?void 0:i,children:e(cr,{characterKey:n})}),u(f,{sx:s=>({p:1,width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,padding:o?`${s.spacing(1)}!important`:void 0}),children:[e(dr,{}),!o&&e(ln,{})]})]})})}function Ls({characterKey:t}){return u(ne,{children:[e(Oa,{characterKey:t,children:e(ur,{characterKey:t})}),e(A,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:1,flexGrow:1,height:"100%"}})]})}const ks=l.createContext({}),Ss=""+new URL("Character_Albedo_Card-5ef0c064.png",import.meta.url).href,$s=""+new URL("Character_Alhaitham_Card-5b5622a6.jpg",import.meta.url).href,Ts=""+new URL("Character_Aloy_Card-63f8894a.png",import.meta.url).href,js=""+new URL("Character_Amber_Card-75caf8bc.jpg",import.meta.url).href,Is=""+new URL("Character_Arataki_Itto_Card-9d5b2141.jpg",import.meta.url).href,Ds=""+new URL("Character_Arlecchino_Card-95b26132.jpg",import.meta.url).href,Ms=""+new URL("Character_Baizhu_Card-91cf0ace.jpg",import.meta.url).href,Us=""+new URL("Character_Barbara_Card-58cbe572.jpg",import.meta.url).href,Bs=""+new URL("Character_Beidou_Card-ea7de4d2.jpg",import.meta.url).href,As=""+new URL("Character_Bennett_Card-af6cc7e8.jpg",import.meta.url).href,Os=""+new URL("Character_Candace_Card-e2c9913c.jpg",import.meta.url).href,zs=""+new URL("Character_Charlotte_Card-b4153f53.jpg",import.meta.url).href,Ns=""+new URL("Character_Chevreuse_Card-4b92e6a5.jpg",import.meta.url).href,Es=""+new URL("Character_Chiori_Card-190184e6.jpg",import.meta.url).href,Ws=""+new URL("Character_Chongyun_Card-1128f6bd.jpg",import.meta.url).href,Ps=""+new URL("Character_Collei_Card-e3c02ab9.jpg",import.meta.url).href,Fs=""+new URL("Character_Cyno_Card-b178c8f3.jpg",import.meta.url).href,qs=""+new URL("Character_Dehya_Card-546c51ec.jpg",import.meta.url).href,Hs=""+new URL("Character_Diluc_Card-2027991e.jpg",import.meta.url).href,Vs=""+new URL("Character_Diona_Card-3cd0b9ac.png",import.meta.url).href,Gs=""+new URL("Character_Dori_Card-025a2f89.jpg",import.meta.url).href,Ks=""+new URL("Character_Eula_Card-2ab7b302.png",import.meta.url).href,Ys=""+new URL("Character_Faruzan_Card-262e6371.jpg",import.meta.url).href,Xs=""+new URL("Character_Fischl_Card-1dc842a2.jpg",import.meta.url).href,Js=""+new URL("Character_Freminet_Card-a2254a5a.jpg",import.meta.url).href,Qs=""+new URL("Character_Furina_Card-de05953e.jpg",import.meta.url).href,Zs=""+new URL("Character_Gaming_Card-fb7f6290.jpg",import.meta.url).href,el=""+new URL("Character_Ganyu_Card-da6b1426.png",import.meta.url).href,tl=""+new URL("Character_Gorou_Card-75b11c2b.png",import.meta.url).href,al=""+new URL("Character_Hu_Tao_Card-96e1f9c8.png",import.meta.url).href,nl=""+new URL("Character_Jean_Card-2fc96483.jpg",import.meta.url).href,rl=""+new URL("Character_Kaeya_Card-90ad939e.jpg",import.meta.url).href,ol=""+new URL("Character_Kamisato_Ayaka_Card-ae1bb2fb.png",import.meta.url).href,il=""+new URL("Character_Kamisato_Ayato_Card-f6b1ad8d.png",import.meta.url).href,sl=""+new URL("Character_Kaveh_Card-d3229e58.jpg",import.meta.url).href,ll=""+new URL("Character_Kazuha_Card-71c36913.png",import.meta.url).href,cl=""+new URL("Character_Keqing_Card-28b6df43.jpg",import.meta.url).href,dl=""+new URL("Character_Kirara_Card-ae8092de.jpg",import.meta.url).href,ul=""+new URL("Character_Klee_Card-43602d1c.jpg",import.meta.url).href,hl=""+new URL("Character_Kujou_Sara_Card-6eb66d8d.jpg",import.meta.url).href,pl=""+new URL("Character_Kuki_Shinobu_Card-c0cca5df.jpg",import.meta.url).href,ml=""+new URL("Character_Layla_Card-89ddf634.jpeg",import.meta.url).href,fl=""+new URL("Character_Lisa_Card-cd94c665.jpg",import.meta.url).href,gl=""+new URL("Character_Lynette_Card-7469da2e.jpg",import.meta.url).href,xl=""+new URL("Character_Lyney_Card-deef8197.jpg",import.meta.url).href,Cl=""+new URL("Character_Mika_Card-20bd2280.jpg",import.meta.url).href,bl=""+new URL("Character_Mona_Card-4b42f44c.jpg",import.meta.url).href,yl=""+new URL("Character_Nahida_Card-309d4d29.jpeg",import.meta.url).href,vl=""+new URL("Character_Navia_Card-8745abc6.jpg",import.meta.url).href,wl=""+new URL("Character_Neuvillette_Card-32f9dd3c.jpg",import.meta.url).href,_l=""+new URL("Character_Nilou_Card-de0e3f0d.jpg",import.meta.url).href,Rl=""+new URL("Character_Ningguang_Card-4f9a1915.jpg",import.meta.url).href,Ll=""+new URL("Character_Noelle_Card-9995f992.jpg",import.meta.url).href,kl=""+new URL("Character_Qiqi_Card-4d5d3687.jpg",import.meta.url).href,Sl=""+new URL("Character_Raiden_Shogun_Card-90085c4a.png",import.meta.url).href,$l=""+new URL("Character_Razor_Card-0e7f3a1e.jpg",import.meta.url).href,Tl=""+new URL("Character_Rosaria_Card-22e1e066.png",import.meta.url).href,jl=""+new URL("Character_Sangonomiya_Kokomi_Card-d5698fe4.jpg",import.meta.url).href,Il=""+new URL("Character_Sayu_Card-e1a67cbd.png",import.meta.url).href,Dl=""+new URL("Character_Shenhe_Card-4340449f.jpg",import.meta.url).href,Ml=""+new URL("Character_Shikanoin_Heizou_Card-043ef79e.png",import.meta.url).href,Ul=""+new URL("Character_Somnia_Card-e56f30f7.png",import.meta.url).href,Bl=""+new URL("Character_Sucrose_Card-e0782acd.jpg",import.meta.url).href,Al=""+new URL("Character_Tartaglia_Card-b8d93f98.png",import.meta.url).href,Ol=""+new URL("Character_Thoma_Card-b561acbb.jpg",import.meta.url).href,zl=""+new URL("Character_Tighnari_Card-8ebb6d51.jpg",import.meta.url).href,Nl=""+new URL("Character_Venti_Card-416dade9.jpg",import.meta.url).href,El=""+new URL("Character_Wanderer_Card-ef1ff178.jpg",import.meta.url).href,Wl=""+new URL("Character_Wriothesley_Card-27b94628.jpg",import.meta.url).href,Pl=""+new URL("Character_Xiangling_Card-9ebf0a46.jpg",import.meta.url).href,Fl=""+new URL("Character_Xianyun_Card-6d9b79fa.jpg",import.meta.url).href,ql=""+new URL("Character_Xiao_Card-41530690.jpg",import.meta.url).href,Hl=""+new URL("Character_Xingqiu_Card-d4eb12ea.jpg",import.meta.url).href,Vl=""+new URL("Character_Xinyan_Card-08b1f13c.jpg",import.meta.url).href,Gl=""+new URL("Character_Yae_Miko_Card-dde243b2.png",import.meta.url).href,Kl=""+new URL("Character_Yanfei_Card-7a0cde36.png",import.meta.url).href,Yl=""+new URL("Character_Yaoyao_Card-d91c99fc.jpg",import.meta.url).href,Xl=""+new URL("Character_Yelan_Card-16780ff3.jpg",import.meta.url).href,Jl=""+new URL("Character_Yoimiya_Card-a2f5a17e.png",import.meta.url).href,Ql=""+new URL("Character_Yun_Jin_Card-93bda737.jpg",import.meta.url).href,Zl=""+new URL("Character_Zhongli_Card-55c0bab7.png",import.meta.url).href,ec=""+new URL("Traveler_Female_Card-f2156008.jpg",import.meta.url).href,tc=""+new URL("Traveler_Male_Card-0d6523d2.jpg",import.meta.url).href,La={Albedo:Ss,Alhaitham:$s,Aloy:Ts,Amber:js,AratakiItto:Is,Arlecchino:Ds,Baizhu:Ms,Barbara:Us,Beidou:Bs,Bennett:As,Candace:Os,Charlotte:zs,Chevreuse:Ns,Chiori:Es,Chongyun:Ws,Collei:Ps,Cyno:Fs,Dehya:qs,Diluc:Hs,Diona:Vs,Dori:Gs,Eula:Ks,Faruzan:Ys,Fischl:Xs,Freminet:Js,Furina:Qs,Gaming:Zs,Ganyu:el,Gorou:tl,HuTao:al,Jean:nl,KaedeharaKazuha:ll,Kaeya:rl,KamisatoAyaka:ol,KamisatoAyato:il,Kaveh:sl,Keqing:cl,Kirara:dl,Klee:ul,KujouSara:hl,KukiShinobu:pl,Layla:ml,Lisa:fl,Lyney:xl,Lynette:gl,Mika:Cl,Mona:bl,Nahida:yl,Navia:vl,Neuvillette:wl,Nilou:_l,Ningguang:Rl,Noelle:Ll,Qiqi:kl,RaidenShogun:Sl,Razor:$l,Rosaria:Tl,SangonomiyaKokomi:jl,Sayu:Il,Shenhe:Dl,ShikanoinHeizou:Ml,Somnia:Ul,Sucrose:Bl,Tartaglia:Al,Thoma:Ol,Tighnari:zl,TravelerF:ec,TravelerM:tc,Venti:Nl,Wanderer:El,Wriothesley:Wl,Xiangling:Pl,Xianyun:Fl,Xiao:ql,Xingqiu:Hl,Xinyan:Vl,YaeMiko:Gl,Yanfei:Kl,Yaoyao:Yl,Yelan:Xl,Yoimiya:Jl,YunJin:Ql,Zhongli:Zl};function ac(t,a){switch(t){case"TravelerAnemo":case"TravelerDendro":case"TravelerElectro":case"TravelerGeo":case"TravelerHydro":return La[`Traveler${a}`]??"";default:return La[t]??""}}function Iu(){const{characterSheet:t}=l.useContext(F),{data:a}=l.useContext(X),n={auto:a.get(z.total.auto).value,skill:a.get(z.total.skill).value,burst:a.get(z.total.burst).value},r={auto:a.get(z.total.autoBoost).value,skill:a.get(z.total.skillBoost).value,burst:a.get(z.total.burstBoost).value};return e(f,{children:e(v,{container:!0,spacing:1,mt:-1,children:["auto","skill","burst"].map(i=>{var o;return e(v,{item:!0,xs:4,children:e(ho,{badgeContent:n[i],color:r[i]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:e(f,{component:"img",src:(o=t.getTalentOfKey(i))==null?void 0:o.img,width:"100%",height:"auto"})})},i)})})})}function nc(){const{characterSheet:t,character:{key:a}}=l.useContext(F),{data:n}=l.useContext(X),r=ra(a),i=n.get(z.constellation).value;return e(v,{container:!0,spacing:1,children:Nt(1,6).map(o=>{var s;return e(v,{item:!0,xs:4,children:e(Ne,{onClick:()=>r({constellation:o===i?o-1:o}),children:e(f,{component:"img",src:(s=t.getTalentOfKey(`constellation${o}`))==null?void 0:s.img,sx:{...i>=o?{}:{filter:"brightness(50%)"}},width:"100%",height:"auto"})})},o)})})}function rc(){const{silly:t}=l.useContext(ft),{character:{key:a}}=l.useContext(F),{gender:n}=be(),{data:r}=l.useContext(X),i=r.get(z.lvl).value,o=r.get(z.asc).value,s=ws(a,n),d=ac(a,n);return t&&s?e(oc,{src:s,level:i,ascension:o}):e(ic,{src:d,level:i,ascension:o})}function oc({src:t,level:a,ascension:n}){const{characterSheet:r}=l.useContext(F);return u(f,{sx:{position:"relative"},children:[e(f,{src:t,component:"img",width:"100%",height:"auto"}),u(f,{sx:{width:"100%",height:"100%"},children:[e(f,{sx:{opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:e(cn,{})}),e(y,{variant:"h6",sx:{width:"100%",opacity:.75,textAlign:"center"},children:e(Jt,{stars:r.rarity,colored:!0})}),e(un,{}),e(dn,{level:a,ascension:n})]})]})}function ic({src:t,level:a,ascension:n}){const{characterSheet:r}=l.useContext(F);return u(f,{sx:{position:"relative"},children:[u(f,{sx:{position:"absolute",width:"100%",height:"100%"},children:[e(y,{variant:"h6",sx:{position:"absolute",width:"100%",left:"50%",bottom:0,transform:"translate(-50%, -50%)",opacity:.75,textAlign:"center"},children:e(Jt,{stars:r.rarity,colored:!0})}),e(f,{sx:{position:"absolute",left:"50%",bottom:"7%",transform:"translate(-50%, -50%)",opacity:.85,width:"100%",display:"flex",justifyContent:"center",px:1},children:e(cn,{})}),e(un,{}),e(dn,{level:a,ascension:n})]}),e(f,{src:t,component:"img",width:"100%",height:"auto"})]})}function cn(){var n;const{characterSheet:t}=l.useContext(F),a=t.elementKey;return e(ve,{color:a,sx:{height:"auto"},label:u(y,{variant:"h6",sx:{display:"flex",gap:1,alignItems:"center"},children:[e(Kt,{ele:a}),e(f,{sx:{whiteSpace:"normal",textAlign:"center"},children:t.name}),e(Me,{src:(n=He.weaponTypes)==null?void 0:n[t.weaponTypeKey]})]})})}function dn({level:t,ascension:a}){return e(y,{sx:{p:1,position:"absolute",right:0,top:0,opacity:.8},children:e(ae,{children:An(t,a)})})}function un(){const{character:{key:t}}=l.useContext(F),a=T(),{favorite:n}=Vt(t);return e(f,{sx:{position:"absolute",left:0,top:0},children:e(Z,{sx:{p:1},color:"error",onClick:()=>a.charMeta.set(t,{favorite:!n}),children:n?e(Zt,{}):e(na,{})})})}var oa={},sc=Le;Object.defineProperty(oa,"__esModule",{value:!0});var Ge=oa.default=void 0,lc=sc(Re()),cc=U,dc=(0,lc.default)((0,cc.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz");Ge=oa.default=dc;function hn({characterKey:t}){const{gender:a}=be();if(!t)return null;const n=de(t,a);return n?e(ot,{placement:"right-end",title:e(y,{children:n.name}),children:e(Mr,{characterKey:t,sideMargin:!0})}):null}function Bt({statKey:t,disableIcon:a=!1}){return u(f,{component:"span",display:"flex",alignItems:"center",gap:1,children:[!a&&e(Yt,{statKey:t,iconProps:me}),u("span",{children:[it.get(t),it.unit(t)]})]})}function pn({statKey:t,disableIcon:a=!1}){return e(Ct,{color:it.getVariant(t),children:e(Bt,{statKey:t,disableIcon:a})})}function ut({artifactId:t,slotKey:a,mainStatAssumptionLevel:n=0,showLocation:r=!1,onClick:i,BGComponent:o=we}){const s=Ut(t),d=T(),p=l.useCallback(M=>e(Ne,{onClick:i,sx:{height:"100%"},children:M}),[i]),c=Et();if(!s)return e(o,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:e(f,{component:"img",src:He.slot[a],sx:{width:"25%",height:"auto",opacity:.7}})});const{slotKey:h,rarity:m,level:x,mainStatKey:g,substats:C,location:b}=s,R=Math.max(Math.min(n,m*4),x),$=On.find(M=>s.mainStatKey.includes(M)),S=$?jt(c.palette[$].main,.6):jt(c.palette.secondary.main,.6);return e(o,{sx:{height:"100%",maxHeight:"8em"},children:e(ea,{condition:!!i,wrapper:p,children:u(f,{display:"flex",height:"100%",children:[u(f,{className:`grad-${m}star`,sx:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e(hr,{art:s,children:e(f,{component:"img",src:Ea(s.setKey,h),sx:{m:-1,maxHeight:"110%",maxWidth:"110%"}})}),u(f,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[e(ve,{size:"small",label:e("strong",{children:` +${x}`}),color:qr.levelVariant(x)}),r&&e(ve,{size:"small",label:b?e(hn,{characterKey:b&&d.chars.LocationToCharacterKey(b)}):e(Wa,{}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),e(ve,{size:"small",sx:{position:"absolute",bottom:0,mb:1,backgroundColor:S,p:1},icon:e(ot,{placement:"top",title:e(y,{children:e(pn,{statKey:g})}),disableInteractive:!0,children:e(f,{lineHeight:0,children:e(Yt,{statKey:g,iconProps:{style:{padding:"4px"}}})})}),label:e(y,{sx:{mx:-.7},children:e(Ct,{color:R!==x?"warning":void 0,children:zn(g,m,R)})})})]}),e(f,{display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{p:1},children:C.map((M,W)=>e(uc,{stat:M},W+M.key))})]})})})}function uc({stat:t}){var i;if(!t.value)return null;const a=((i=t.rolls)==null?void 0:i.length)??0,n=`roll${Nn(a,1,6)}`,r=st(t.key);return e(f,{display:"flex",gap:1,alignContent:"center",children:u(y,{sx:{flexGrow:1,display:"flex",gap:.5,alignItems:"center"},color:a?`${n}.main`:"error.main",component:"span",children:[e(ot,{placement:"top",title:e(y,{children:t.key&&e(pn,{statKey:t.key})}),disableInteractive:!0,children:e(f,{lineHeight:0,children:e(Yt,{statKey:t.key,iconProps:{fontSize:"inherit"}})})}),e("span",{children:`${ja(t.value,r)}${r}`})]})})}function je(){return je=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},je.apply(this,arguments)}function hc(t,a){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(a.indexOf(i)>=0)&&(n[i]=t[i]);return n}function pc(t){return et("MuiMasonry",t)}Ze("MuiMasonry",["root"]);const mc=["children","className","component","columns","spacing","defaultColumns","defaultHeight","defaultSpacing"],$e=t=>Number(t.replace("px","")),fc={flexBasis:"100%",width:0,margin:0,padding:0},gc=t=>{const{classes:a}=t;return tt({root:["root"]},pc,a)},xc=({ownerState:t,theme:a})=>{let n={width:"100%",display:"flex",flexFlow:"column wrap",alignContent:"flex-start",boxSizing:"border-box","& > *":{boxSizing:"border-box"}};const r={};if(t.isSSR){const c={},h=$e(a.spacing(t.defaultSpacing));for(let m=1;m<=t.defaultColumns;m+=1)c[`&:nth-of-type(${t.defaultColumns}n+${m%t.defaultColumns})`]={order:m};return r.height=t.defaultHeight,r.margin=-(h/2),r["& > *"]=je({},n["& > *"],c,{margin:h/2,width:`calc(${(100/t.defaultColumns).toFixed(2)}% - ${h}px)`}),je({},n,r)}const i=xa({values:t.spacing,breakpoints:a.breakpoints.values}),o=Pn(a);n=wt(n,_t({theme:a},i,c=>{let h;if(typeof c=="string"&&!Number.isNaN(Number(c))||typeof c=="number"){const m=Number(c);h=Rt(o,m)}else h=c;return je({margin:`calc(0px - (${h} / 2))`,"& > *":{margin:`calc(${h} / 2)`}},t.maxColumnHeight&&{height:typeof h=="number"?Math.ceil(t.maxColumnHeight+$e(h)):`calc(${t.maxColumnHeight}px + ${h})`})}));const d=xa({values:t.columns,breakpoints:a.breakpoints.values});return n=wt(n,_t({theme:a},d,c=>{const m=`${(100/Number(c)).toFixed(2)}%`,x=typeof i=="string"&&!Number.isNaN(Number(i))||typeof i=="number"?Rt(o,Number(i)):"0px";return{"& > *":{width:`calc(${m} - ${x})`}}})),typeof i=="object"&&(n=wt(n,_t({theme:a},i,(c,h)=>{if(h){const m=Number(c),x=Object.keys(d).pop(),g=Rt(o,m);return{"& > *":{width:`calc(${`${(100/(typeof d=="object"?d[h]||d[x]:d)).toFixed(2)}%`} - ${g})`}}}return null}))),n},Cc=Ce("div",{name:"MuiMasonry",slot:"Root",overridesResolver:(t,a)=>[a.root]})(xc),bc=l.forwardRef(function(a,n){const r=pt({props:a,name:"MuiMasonry"}),{children:i,className:o,component:s="div",columns:d=4,spacing:p=1,defaultColumns:c,defaultHeight:h,defaultSpacing:m}=r,x=hc(r,mc),g=l.useRef(),[C,b]=l.useState(),R=!C&&h&&c!==void 0&&m!==void 0,[$,S]=l.useState(R?c-1:0),M=je({},r,{spacing:p,columns:d,maxColumnHeight:C,defaultColumns:c,defaultHeight:h,defaultSpacing:m,isSSR:R}),W=gc(M),I=L=>{if(!g.current||!L||L.length===0)return;const w=g.current,N=g.current.firstChild,_=w.clientWidth,re=N.clientWidth;if(_===0||re===0)return;const oe=window.getComputedStyle(N),te=$e(oe.marginLeft),q=$e(oe.marginRight),Q=Math.round(_/(re+te+q)),H=new Array(Q).fill(0);let ee=!1;w.childNodes.forEach(B=>{if(B.nodeType!==Node.ELEMENT_NODE||B.dataset.class==="line-break"||ee)return;const ie=window.getComputedStyle(B),Ue=$e(ie.marginTop),Ee=$e(ie.marginBottom),Be=$e(ie.height)?Math.ceil($e(ie.height))+Ue+Ee:0;if(Be===0){ee=!0;return}for(let ce=0;ce<B.childNodes.length;ce+=1){const he=B.childNodes[ce];if(he.tagName==="IMG"&&he.clientHeight===0){ee=!0;break}}if(!ee){const ce=H.indexOf(Math.min(...H));H[ce]+=Be;const he=ce+1;B.style.order=he}}),ee||Fn.flushSync(()=>{b(Math.max(...H)),S(Q>0?Q-1:0)})};En(()=>{if(typeof ResizeObserver>"u")return;let L;const w=new ResizeObserver(()=>{L=requestAnimationFrame(I)});return g.current&&g.current.childNodes.forEach(N=>{w.observe(N)}),()=>{L&&window.cancelAnimationFrame(L),w&&w.disconnect()}},[d,p,i]);const k=Wn(n,g),D=new Array($).fill("").map((L,w)=>U.jsx("span",{"data-class":"line-break",style:je({},fc,{order:w+1})},w));return U.jsxs(Cc,je({as:s,className:Oe(W.root,o),ref:k,ownerState:M},x,{children:[i,D]}))}),yc=bc,vc=l.createContext(void 0),Pe={title:e(Ct,{color:"warning",children:"ERROR"})},wc={normal:"Normal Atk.",charged:"Charged Atk.",plunging:"Plunging Atk.",skill:"Ele. Skill",burst:"Ele. Burst",passive:"Passive",passive1:"1st Asc. Pass.",passive2:"4th Asc. Pass.",passive3:"Util. Pass.",...Object.fromEntries(Nt(1,6).map(t=>[`constellation${t}`,`Const. ${t}`]))};function mn(t,a,n){if(!a)return Pe;if(a==="basic")return{title:"Basic Stats"};if(a==="custom")return{title:"Custom Multi Target"};if(a==="reaction")return{title:"Transformative Reactions"};if(a.includes(":")){const[r,i]=a.split(":");if(r==="artifact"){const o=an(i);return o?{title:o.name,icon:Hr(i)}:Pe}else if(r==="weapon"){const o=bt(i);if(!o)return Pe;const s=t.get(fe.weapon.asc).value;return{title:o.name,icon:Pa(i,s>=2)}}}else{const r=t.get(fe.charKey).value;if(!r)return Pe;const i=de(r,n.gender),o=["normal","charged","plunging"].includes(a)?"auto":a,s=i==null?void 0:i.getTalentOfKey(o);if(!s)return Pe;const d=wc[a];return{icon:s.img,title:s.name,action:d}}return Pe}function _c(t){const a=t.getDisplay(),n=Object.entries(a),r=n.filter(([c])=>c==="basic"),i=n.filter(([c])=>c==="reaction"),o=n.filter(([c])=>c==="custom"),s=n.filter(([c])=>c.startsWith("weapon")),d=n.filter(([c])=>c.startsWith("artifact")),p=n.filter(([c])=>c!=="basic"&&c!=="reaction"&&!c.startsWith("weapon")&&!c.startsWith("artifact")&&c!=="custom");return[...r,...i,...o,...p,...s,...d]}function Rc({columns:t={xs:1,sm:2,md:3,xl:4}}){const{data:a}=l.useContext(X),n=l.useMemo(()=>_c(a).filter(([,r])=>Object.values(r).some(i=>!i.isEmpty)),[a]);return e(f,{sx:{mr:-1,mb:-1},children:e(yc,{columns:t,spacing:1,children:n.map(([r,i])=>e(Lc,{displayNs:i,sectionKey:r},r))})})}function Lc({displayNs:t,sectionKey:a}){const n=l.useContext(vc),{data:r,oldData:i}=l.useContext(X),o=T(),s=l.useMemo(()=>mn(r,a,o),[o,r,a]),d=l.useMemo(()=>at(t,(m,x)=>br(["display",a,x])),[t,a]);if(!s)return e(we,{});const{title:p,icon:c,action:h}=s;return u(we,{children:[e(Tr,{avatar:c&&e(Me,{size:2,src:c}),title:p,action:h&&e(ae,{children:h})}),e(K,{}),e(jr,{sx:{m:0},children:Object.entries(t).map(([m,x])=>e(qa,{node:x,oldValue:i?i.get(d[m]).value:void 0,component:Se,emphasize:JSON.stringify(n)===JSON.stringify([a,m])},m))})]})}function ht({weaponId:t,showLocation:a=!1,onClick:n,BGComponent:r=we,weaponTypeKey:i="sword"}){const o=Gr(t),s=(o==null?void 0:o.key)&&bt(o.key);return!o||!s?e(r,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:e(f,{component:"img",src:He.weaponTypes[i],sx:{width:"25%",height:"auto",opacity:.7}})}):e(fn,{weapon:o,weaponSheet:s,onClick:n,showLocation:a,BGComponent:r})}function fn({weapon:t,weaponSheet:a,showLocation:n=!1,onClick:r,BGComponent:i=we}){const o=T(),{refinement:s,location:d}=t,p=l.useCallback(h=>e(Ne,{sx:{height:"100%"},onClick:r,children:h}),[r]),c=l.useMemo(()=>a&&t&&yr([a.data,Fa(t)]),[a,t]);return e(i,{sx:{height:"100%",maxHeight:"8em"},children:e(ea,{condition:!!r,wrapper:p,children:u(f,{display:"flex",height:"100%",alignItems:"stretch",children:[u(f,{className:`grad-${a.rarity}star`,sx:{height:"100%",position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"},children:[e(pr,{sheet:a,children:e(f,{component:"img",src:Pa(t.key,t.ascension>=2),sx:{mx:-1,maxHeight:"100%",maxWidth:"100%"}})}),u(f,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[e(ve,{size:"small",label:e("strong",{children:nn.getLevelString(t)}),color:"primary"}),n&&e(ve,{size:"small",label:d?e(hn,{characterKey:o.chars.LocationToCharacterKey(d)}):e(Wa,{}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),e(f,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},children:a.hasRefinement&&e(ve,{size:"small",color:"info",label:u("strong",{children:["R",s]})})})]}),u(f,{display:"flex",flexDirection:"column",sx:{p:1},children:[e(ka,{node:c.get(fe.weapon.main)}),e(ka,{node:c.get(fe.weapon.sub)})]})]})})})}function ka({node:t}){return t.info.name?e(f,{display:"flex",gap:1,alignContent:"center",children:u(y,{sx:{flexGrow:1,display:"flex",gap:1},component:"span",children:[e(ot,{placement:"top",title:e(y,{children:t.info.name}),disableInteractive:!0,children:e("span",{children:t.info.icon})}),e("span",{children:vr(t)})]})}):null}function kc({equipChangeProps:t,showPrompt:a,OnHidePrompt:n,onEquip:r}){const[i,o]=l.useState(""),[s,d]=l.useState(!1),p=T(),{teamCharId:c}=l.useContext(ue),{character:{key:h}}=l.useContext(F),m=Wt(h).weaponType,x=()=>{s&&p.teamChars.newBuild(c,{name:i!==""?i:`Duplicate of ${t.currentName}`,artifactIds:t.currentArtifacts,weaponId:t.currentWeapon}),r(),o(""),d(!1),n()};return e(nt,{open:a,onClose:n,children:u(E,{children:[e(ge,{title:u(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(De,{}),u("span",{children:["Confirm Equipment Changes for"," ",e("strong",{children:t.currentName})]})]}),action:e(Z,{onClick:n,children:e(_e,{})})}),e(K,{}),e(A,{sx:{display:"flex",flexDirection:"column"},children:u(f,{children:[u(E,{bgt:"light",children:[e(f,{sx:{pl:2,pt:2},children:e(xe,{color:"success",children:"Current Equipment"})}),e(A,{sx:{pt:1,display:"flex",flexDirection:"row",gap:1,alignItems:"stretch"},children:u(v,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:6},children:[e(v,{item:!0,xs:1,children:e(ht,{weaponId:t.currentWeapon,weaponTypeKey:m})}),Object.entries(t.currentArtifacts).map(([g,C])=>e(v,{item:!0,xs:1,children:e(ut,{artifactId:C,slotKey:g})},C||g))]})})]}),e(f,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",padding:2,children:e(dt,{sx:{fontSize:40}})}),u(E,{bgt:"light",children:[e(f,{sx:{pl:2,pt:2},children:e(xe,{color:"success",children:"New Equipment"})}),e(A,{sx:{pt:1,display:"flex",flexDirection:"row",gap:1,alignItems:"stretch"},children:u(v,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:6},children:[e(v,{item:!0,xs:1,children:e(ht,{weaponId:t.newWeapon,weaponTypeKey:m})}),Object.entries(t.newArtifacts).map(([g,C])=>e(v,{item:!0,xs:1,children:e(ut,{artifactId:C,slotKey:g})},C||g))]})})]})]})}),u(A,{sx:{pt:"0",display:"flex",flexDirection:"column"},children:[e(y,{sx:{fontSize:20},children:"Do you want to make the changes shown above?"}),c&&e(Eo,{label:u(ne,{children:["Copy the current equipment in"," ",e("strong",{children:t.currentName})," to a new build. Otherwise, they will be overwritten."]}),control:e(Do,{checked:s,onChange:g=>d(g.target.checked),color:s?"success":"secondary"})}),s&&e(Qe,{label:"Build Name",placeholder:`Duplicate of ${t.currentName}`,value:i,onChange:g=>o(g.target.value),size:"small",sx:{width:"75%",marginX:4}}),u(f,{sx:{display:"flex",justifyContent:"flex-end",gap:1,marginTop:4},children:[e(O,{color:"error",onClick:n,children:"Cancel"}),e(O,{color:"success",onClick:x,children:"Equip"})]})]})]})})}function Sc({artifacts:t}){const a=l.useMemo(()=>{const n=t.filter(r=>r).reduce((r,i)=>(r[i.setKey]?r[i.setKey].push(i.slotKey):r[i.setKey]=[i.slotKey],r),{});return Object.keys(n).forEach(r=>{var i;((i=n[r])==null?void 0:i.length)===1&&delete n[r]}),n},[t]);return e(ne,{children:Object.entries(a).sort(([n,r],[i,o])=>o.length-r.length).map(([n,r])=>e($c,{setKey:n,slotarr:r},n))})}function $c({setKey:t,slotarr:a}){const n=an(t),r=a.length,i=Object.keys(n.setEffects).map(o=>parseInt(o)).filter(o=>o<=r);return e(f,{children:e(Ar,{artifactSheet:n,numInSet:r,children:e(ae,{sx:{height:"100%"},color:"primary",children:u(y,{children:[a.map(o=>e(Kr,{slotKey:o,iconProps:me},o))," ",n.name??"",i.map((o,s)=>e(ae,{sx:{ml:.5},color:"success",children:o},""+o+s))]})})})})}var ia={},Tc=Le;Object.defineProperty(ia,"__esModule",{value:!0});var At=ia.default=void 0,jc=Tc(Re()),Ic=U,Dc=(0,jc.default)((0,Ic.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}),"Block");At=ia.default=Dc;var sa={},Mc=Le;Object.defineProperty(sa,"__esModule",{value:!0});var Ot=sa.default=void 0,Uc=Mc(Re()),Bc=U,Ac=(0,Uc.default)((0,Bc.jsx)("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"}),"ShowChart");Ot=sa.default=Ac;function Oc({setKey:t,buttonGroupSx:a}){const{t:n}=V("sheet"),{teamChar:{optConfigId:r}}=l.useContext(ue),{artSetExclusion:i}=Ve(r),o=(i==null?void 0:i[t])??[],s=o.includes(2),d=o.includes(4),p=T();return u($r,{sx:a,fullWidth:!0,children:[e(O,{startIcon:s?e(Ca,{}):e(ba,{}),onClick:()=>p.optConfigs.set(r,{artSetExclusion:ya(i,t,2)}),color:s?"secondary":"success",endIcon:s?e(At,{}):e(Ot,{}),children:n`2set`}),e(O,{startIcon:d?e(Ca,{}):e(ba,{}),onClick:()=>p.optConfigs.set(r,{artSetExclusion:ya(i,t,4)}),color:d?"secondary":"success",endIcon:d?e(At,{}):e(Ot,{}),children:n`4set`})]})}function zc({label:t,extraButtonsRight:a,extraButtonsLeft:n,disabled:r,mainStatAssumptionLevel:i,allowLocationsState:o}){var We;const{loadoutDatum:{buildType:s,buildId:d},teamChar:{buildIds:p=[]}}=l.useContext(ue),{character:{key:c,equippedArtifacts:h,equippedWeapon:m}}=l.useContext(F),x=T(),{data:g,oldData:C}=l.useContext(X),[b,R]=qe();l.useEffect(()=>{const j=p.map(P=>x.builds.follow(P,R));return()=>j.forEach(P=>P())},[x,p,R]);const $=l.useMemo(()=>{var j;return{oldId:(j=C==null?void 0:C.get(z.weapon.id))==null?void 0:j.value,newId:g.get(z.weapon.id).value??""}},[g,C]),[S,M,W]=le(!1),I=l.useMemo(()=>Ye(pe,j=>{var P;return{oldId:(P=C==null?void 0:C.get(z.art[j].id))==null?void 0:P.value,newId:g.get(z.art[j].id).value??""}}),[g,C]),[k,D]=l.useState(),L=l.useCallback(()=>D(void 0),[D]),w=d&&s==="real",N=l.useCallback(()=>{if(w){x.builds.set(d,{weaponId:g.get(z.weapon.id).value,artifactIds:Ye(pe,ye=>{var Ae;return(Ae=g.get(z.art[ye].id).value)==null?void 0:Ae.toString()})});return}const j=x.chars.get(c);if(!j)return;pe.forEach(ye=>{var Ke;const Ae=(Ke=g.get(z.art[ye].id).value)==null?void 0:Ke.toString();if(Ae)x.arts.set(Ae,{location:Ie(c)});else{const vt=j.equippedArtifacts[ye];vt&&x.arts.get(vt)&&x.arts.set(vt,{location:""})}});const P=g.get(z.weapon.id).value;P&&x.weapons.set(P,{location:Ie(c)})},[c,w,d,g,x]),_=l.useMemo(()=>Object.fromEntries(pe.map(j=>{var P;return[j,(P=g.get(z.art[j].id).value)==null?void 0:P.toString()]})),[g]),re=l.useMemo(()=>_&&Object.values(_).map(j=>x.arts.get(j)).filter(j=>j),[_,x.arts]),oe=l.useMemo(()=>e(v,{item:!0,xs:1,children:e(ht,{showLocation:!0,weaponId:g.get(z.weapon.id).value,onClick:M})}),[g,M]),te=l.useMemo(()=>pe.map(j=>e(v,{item:!0,xs:1,children:e(ut,{showLocation:!0,slotKey:j,artifactId:_[j],mainStatAssumptionLevel:i,onClick:()=>{const P=I[j].oldId,ye=I[j].newId;D({oldId:P!==ye?P:void 0,newId:ye})}})},j)),[D,I,i,_]),q=pe.every(j=>_[j]===h[j])&&g.get(z.weapon.id).value===m,Q=l.useMemo(()=>b&&p.filter(j=>{const P=x.builds.get(j);if(!P)return!1;const{artifactIds:ye,weaponId:Ae}=P;return pe.every(Ke=>_[Ke]===ye[Ke])&&g.get(z.weapon.id).value===Ae}),[b,x,p,_,g]),H=s==="real"&&Q.includes(d),ee=H||s==="equipped"&&q,B=s===void 0,ie=l.useMemo(()=>B?m:b&&s==="real"?x.builds.get(d).weaponId:b&&s==="equipped"?m:"",[b,x,s,d,m,B]),Ue=l.useMemo(()=>B?h:b&&s==="real"?x.builds.get(d).artifactIds:b&&s==="equipped"?h:Ye(pe,()=>""),[b,x,s,d,h,B]),[Ee,Be,ce]=le(),he={currentName:s==="real"?x.builds.get(d).name:"Equipped",currentWeapon:ie,currentArtifacts:Ue,newWeapon:g.get(z.weapon.id).value,newArtifacts:Ye(pe,j=>g.get(z.art[j].id).value)};return e(zt,{sx:{boxShadow:ee?"0px 0px 0px 2px green inset":void 0},children:u(l.Suspense,{fallback:e(se,{variant:"rectangular",width:"100%",height:600}),children:[$&&e(Nc,{newOld:$,showWeapon:S,onClose:W}),k&&e(Ec,{newOld:k,mainStatAssumptionLevel:i,onClose:L,allowLocationsState:o,compareFromCharEditor:B}),u(A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[u(f,{display:"flex",gap:1,flexWrap:"wrap",children:[t!==void 0&&e(xe,{color:q?"success":"info",children:u(y,{sx:{display:"flex",gap:1},children:[e("strong",{children:t}),q&&e("span",{children:"(Equipped)"})]})}),!!Q.length&&e(xe,{color:H?"success":"info",children:u(y,{sx:{display:"flex",gap:1},children:[e(De,{}),e("span",{children:(We=x.builds.get(H?d:Q[0]))==null?void 0:We.name}),H&&e("span",{children:"(current build)"}),Q.length>1&&e(J,{arrow:!0,title:e(f,{children:Q.map(j=>{var P;return u(y,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(De,{}),(P=x.builds.get(j))==null?void 0:P.name]})})}),children:e(Te,{})})]})}),e(Sc,{artifacts:re}),e(f,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"}}),n,e(kc,{equipChangeProps:he,showPrompt:Ee,onEquip:N,OnHidePrompt:ce}),e(O,{size:"small",color:"success",onClick:Be,disabled:r||H,startIcon:e(Vo,{}),children:"Equip to Current Build"}),a]}),e(f,{children:u(v,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:6},children:[oe,te]})}),e(Rc,{})]})]})})}function Nc({newOld:{newId:t,oldId:a},showWeapon:n,onClose:r}){const i=T(),o=a!==t,s=l.useCallback(d=>i.weapons.remove(d),[i]);return e(rt,{open:n,onClose:r,containerProps:{maxWidth:o?"md":"xs"},children:e(we,{children:u(A,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2},children:[o&&u(f,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(E,{bgt:"light",sx:{p:1},children:e(y,{variant:"h6",textAlign:"center",children:"Old Weapon"})}),a==="tc"?e(y,{variant:"h6",textAlign:"center",color:"info",children:e(xe,{children:"TC Weapon"})}):e(ct,{weaponId:a,onDelete:s})]}),o&&e(f,{display:"flex",flexGrow:1}),o&&e(f,{display:"flex",alignItems:"center",justifyContent:"center",children:e(rn,{sx:{fontSize:40}})}),o&&e(f,{display:"flex",flexGrow:1}),u(f,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(E,{bgt:"light",sx:{p:1},children:e(y,{variant:"h6",textAlign:"center",children:"New Weapon"})}),e(ct,{weaponId:t,onDelete:s})]})]})})})}function Ec({newOld:{newId:t,oldId:a},mainStatAssumptionLevel:n,onClose:r,allowLocationsState:i,compareFromCharEditor:o}){var x;const s=T(),{character:{key:d}}=l.useContext(F),p=((x=s.arts.get(t))==null?void 0:x.location)??"",c=Ut(t),h=Ut(a),m=l.useCallback(g=>s.arts.remove(g),[s]);return e(rt,{open:!!t,onClose:r,containerProps:{maxWidth:a?"md":"xs"},children:e(we,{children:u(A,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2},children:[a&&u(f,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(E,{bgt:"light",sx:{p:1},children:e(y,{variant:"h6",textAlign:"center",children:"Old Artifact"})}),a==="tc"?e(y,{variant:"h6",textAlign:"center",color:"info",children:e(xe,{children:"TC Artifact"})}):e(lt,{artifactId:a,onDelete:m,mainStatAssumptionLevel:n,editorProps:{disableSet:!0,fixedSlotKey:h==null?void 0:h.slotKey}}),a!=="tc"&&!o&&e(Sa,{id:a})]}),a&&e(f,{display:"flex",flexGrow:1}),a&&e(f,{display:"flex",alignItems:"center",justifyContent:"center",children:e(rn,{sx:{fontSize:40}})}),a&&e(f,{display:"flex",flexGrow:1}),u(f,{minWidth:320,display:"flex",flexDirection:"column",gap:1,children:[e(E,{bgt:"light",sx:{p:1},children:e(y,{variant:"h6",textAlign:"center",children:"New Artifact"})}),e(lt,{artifactId:t,onDelete:m,mainStatAssumptionLevel:n,editorProps:{disableSet:!0,fixedSlotKey:c==null?void 0:c.slotKey}}),!o&&u(ne,{children:[c&&e(Sa,{id:t}),p&&p!==Ie(d)&&i!=="all"&&e(Wc,{locationKey:p}),c&&qn.includes(c.setKey)&&e(Oc,{setKey:c.setKey})]})]})]})})})}function Sa({id:t}){const{t:a}=V("page_character_optimize"),{teamChar:{optConfigId:n}}=l.useContext(ue),r=T(),{artExclusion:i}=Ve(n),o=i.includes(t),s=l.useCallback(()=>r.optConfigs.set(n,{artExclusion:Ia(i,t)}),[t,i,r,n]);return n?e(ot,{title:e(f,{children:e(y,{children:a`excludeArt.includeArtifactTip`})}),placement:"top",arrow:!0,children:e(O,{onClick:s,color:o?"secondary":"success",size:"small",startIcon:o?e(en,{}):e(tn,{}),children:a`excludeArt.includeArtifactButton`})}):null}function Wc({locationKey:t}){const{t:a}=V("page_character_optimize"),{teamChar:{optConfigId:n}}=l.useContext(ue),r=T(),i=de(r.chars.LocationToCharacterKey(t)),{excludedLocations:o}=Ve(n)??{excludedLocations:[]},s=o.includes(t),d=l.useCallback(()=>r.optConfigs.set(n,{excludedLocations:Ia(o,t)}),[t,o,r,n]);return n?e(O,{onClick:d,color:s?"secondary":"success",size:"small",startIcon:s?e(en,{}):e(tn,{}),children:u("span",{children:[a`excludeChar.allowEquip`," ",e("strong",{children:i.name})]})}):null}function Pc(t=0,a,n){const{teamId:r,teamCharId:i}=l.useContext(ue);return Fc(r,i,t,a,n)}function Fc(t,a,n=0,r,i){const o=T(),[s,d]=qe(),p=l.useDeferredValue(s),{gender:c}=be(),{loadoutData:h}=mr(t)??{loadoutData:[]},m=l.useMemo(()=>p&&qc(o,t,c,a,n,r,i),[p,c,t,o,n,a,r,i]);return l.useEffect(()=>t?o.teams.follow(t,d):void 0,[t,d,o]),l.useEffect(()=>{if(!s)return()=>{};const x=h.map(g=>{if(!g)return()=>{};const C=o.teamChars.follow(g.teamCharId,d),b=o.teamChars.followChar(g.teamCharId,d),R=o.teams.followLoadoutDatum(g,d);return()=>{C(),b(),R()}});return()=>{x.forEach(g=>g())}},[s,o,h,d]),m}function qc(t,a,n,r,i=0,o,s){if(!a)return;const d=t.teams.getActiveTeamChar(a);if(!d)return;const{teamData:p,teamBundle:c}=Hc(t,a,r,i,o,s)??{};if(!p||!c)return;const h=wr(p,n,d.key);return at(h,(x,g)=>{const{data:C,...b}=c[g];return{...x,...b}})}function Hc(t,a,n,r=0,i,o){if(!a)return;const s=t.teams.get(a);if(!s)return;const{loadoutData:d,enemyOverride:p,conditional:c}=s,h=d.map(g=>{if(!g)return;const{teamCharId:C,buildType:b,buildTcId:R}=g,$=t.teamChars.get(C);if(!$)return;const{key:S,infusionAura:M,customMultiTargets:W,conditional:I,bonusStats:k,hitMode:D,reaction:L}=$,w=t.chars.get(S);if(!w)return;const{key:N,level:_,constellation:re,ascension:oe,talent:te}=w,q=C===n,Q=(()=>o&&q?o:t.teams.getLoadoutWeapon(g))(),H=(()=>i&&q?i:b==="tc"&&R?fr(t.buildTcs.get(R)):Object.values(t.teams.getLoadoutArtifacts(g)).filter(B=>B))(),ee=(()=>r&&q?r:0)();return Vc(t,q,ee,{key:N,level:_,constellation:re,ascension:oe,talent:te,infusionAura:M,customMultiTargets:W,conditional:{...I,...c},bonusStats:k,enemyOverride:p,hitMode:D,reaction:L},Q,H)}).filter(g=>g),m=Object.fromEntries(h.filter(g=>g).map(g=>[g.character.key,g]));return{teamData:at(m,({data:g})=>g),teamBundle:m}}function Vc(t,a=!1,n,r,i,o){const s=t.chars.get(r.key),d=de(r.key,t.gender);if(!d)return;const p=bt(i.key);if(!p)return;const c=nn.getAllDataOfType(d.weaponTypeKey),h=a?(()=>{const{display:C,...b}=p.data;return va([b,c])})():p.data,m=va([d.data,h,Vr]),g=[...Array.isArray(o)?o.map(C=>_r(C,n)):[o],Rr(r,a?m:void 0),Fa(i),m,Lr,gr];return{character:s,weapon:i,characterSheet:d,weaponSheet:p,data:g}}const Tt={mx:.25,px:.25};function Gc({reaction:t}){const{t:a}=V("sheet_gen"),n=t==="spread"?"dendro":"electro";return u(f,{display:"flex",alignItems:"center",children:[e(Ct,{color:t,children:a(`reaction.${t}`)}),e(ae,{sx:Tt,color:"dendro",children:e(Hn,{...me})}),"+",e(ae,{sx:Tt,color:"electro",children:e(Da,{...me})}),"+",e(ae,{sx:Tt,color:n,children:e(Kt,{ele:n,iconProps:me})})]})}const Du={"":e("span",{children:"No Team Melee Infusion"}),pyro:u("span",{children:[e(Vn,{...me})," ",e(ae,{children:"Bennett C6"})," Fire Ventures with Me"]}),cryo:u("span",{children:[e(Gn,{...me})," ",e(ae,{children:"Chongyun Skill"})," Spirit Blade: Chonghua's Layered Frost"]}),hydro:u("span",{children:[e(Kn,{...me})," ",e(ae,{children:"Candace Burst"})," Sacred Rite: Wagtail's Tide"]}),electro:u("span",{children:[e(Da,{...me})," ",e(ae,{children:"Somnia Burst"})," ","Parallax Paws"]})};function Kc(t){const{t:a}=V("page_character"),{teamCharId:n,teamChar:{reaction:r}}=l.useContext(ue),i=T(),{data:o}=l.useContext(X),s=o.get(z.charEle).value,d=o.get(kr).value,p=[...new Set([...wa[s]??[],...wa[d]??[],..._a[s]??[],..._a[d]??[]])];return u(yt,{exclusive:!0,baseColor:"secondary",value:r,onChange:(c,h)=>i.teamChars.set(n,{reaction:h}),disabled:!n,...t,children:[e(Fe,{value:"",disabled:!r,children:a`noReaction`}),p.map(c=>e(Fe,{value:c,disabled:r===c,children:[...Yn].includes(c)?e(Ir,{reaction:c}):e(Gc,{reaction:c})},c))]})}function Yc(t){const{t:a}=V("page_character"),{teamCharId:n,teamChar:{hitMode:r="avgHit"}}=l.useContext(ue),i=T();return e(yt,{exclusive:!0,baseColor:"secondary",value:r,onChange:(o,s)=>i.teamChars.set(n,{hitMode:s}),disabled:!n,...t,children:Xn.map(o=>e(Fe,{value:o,disabled:r===o,children:a(`hitmode.${o}`)},o))})}function gn({artId:t,weaponId:a}){const{t:n}=V("page_character"),[r,i,o]=le(!1);return u(ne,{children:[e(nt,{open:r,onClose:o,containerProps:{maxWidth:"xl"},children:e(Xc,{artId:t,weaponId:a,onHide:o})}),e(J,{title:e(y,{children:n`tabEquip.compare`}),placement:"top",arrow:!0,children:e(O,{color:"info",size:"small",onClick:i,children:e(Or,{})})})]})}function Xc(t){var r;const a=l.useContext(ue),n=l.useContext(F);return(r=a==null?void 0:a.teamChar)!=null&&r.optConfigId?e(Jc,{...t}):n!=null&&n.character?e(Qc,{...t}):null}function Jc({artId:t,weaponId:a,onHide:n}){const r=T(),{character:{key:i}}=l.useContext(F),{loadoutDatum:o,teamChar:{optConfigId:s}}=l.useContext(ue),{mainStatAssumptionLevel:d}=Ve(s),{data:p}=l.useContext(X),c=l.useMemo(()=>{const x=r.arts.get(t??""),g=r.teams.getLoadoutArtifacts(o),C=at(g,(b,R)=>R===(x==null?void 0:x.slotKey)?x:b);return Object.values(C).filter(b=>b)},[r,o,t]),h=Pc(d,c,a?r.weapons.get(a):void 0),m=l.useMemo(()=>h&&{data:h[i].target,teamData:h,oldData:p},[i,h,p]);return m?e(xn,{dataProviderValue:m,onHide:n}):null}function Qc({artId:t,weaponId:a,onHide:n}){const r=T(),{character:{key:i,equippedArtifacts:o}}=l.useContext(F),{data:s}=l.useContext(X),d=l.useMemo(()=>{const h=r.arts.get(t??""),m=at(o,(x,g)=>g===(h==null?void 0:h.slotKey)?h:r.arts.get(x));return Object.values(m).filter(x=>x)},[r,o,t]),p=qt(i,0,d,a?r.weapons.get(a):void 0),c=l.useMemo(()=>p&&{data:p[i].target,teamData:p,oldData:s},[i,p,s]);if(c)return e(xn,{dataProviderValue:c,onHide:n})}function xn({dataProviderValue:t,onHide:a}){const{teamChar:{optConfigId:n}}=l.useContext(ue),{mainStatAssumptionLevel:r,allowLocationsState:i}=Ve(n);return e(l.Suspense,{fallback:e(se,{variant:"rectangular",width:"100%",height:600}),children:t&&e(X.Provider,{value:t,children:e(zc,{extraButtonsLeft:u(ne,{children:[e(Yc,{size:"small"}),e(Kc,{size:"small"})]}),extraButtonsRight:e(O,{size:"small",color:"error",onClick:a,children:e(_e,{})}),mainStatAssumptionLevel:r,allowLocationsState:i})})})}const Zc={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3},ed=l.lazy(()=>Ma(()=>import("./ArtifactEditor-d6191c91.js"),["./ArtifactEditor-d6191c91.js","./index-c6225add.js","./index-2c829a94.css","./ChevronRight-a3584e49.js","./index-c6848864.js","./ColoredText-0d6b1724.js","./Close-20bcbd75.js","./InfoTooltip-57d5ecd0.js","./BootstrapTooltip-97d43dec.js","./LockOpen-837a1154.js","./ArtifactRarityDropdown-95b40839.js","./Artifact-d23bf7c9.js","./ConditionalWrapper-474dac7d.js","./StarDisplay-56e2aafb.js","./DropdownButton-f62519f0.js","./ArtifactStatKeyDisplay-f8c0fbce.js","./SlotIcon-5678a8bc.js","./ArtifactSort-450d2a4d.js","./TextButton-1f7d5be4.js","./CardHeader-d96ce8ba.js"],import.meta.url)),td=l.lazy(()=>Ma(()=>import("./ArtifactFilterDisplay-6d12ae24.js").then(t=>t.b),["./ArtifactFilterDisplay-6d12ae24.js","./index-c6225add.js","./index-2c829a94.css","./LockOpen-837a1154.js","./useDisplayArtifact-849daa7b.js","./SolidToggleButtonGroup-fd78f201.js","./totalUtils-fbd35f32.js","./BootstrapTooltip-97d43dec.js","./StarDisplay-56e2aafb.js","./DropdownButton-f62519f0.js","./ColoredText-0d6b1724.js","./index-c6848864.js","./ArtifactStatKeyDisplay-f8c0fbce.js","./Artifact-d23bf7c9.js","./ConditionalWrapper-474dac7d.js","./SlotIcon-5678a8bc.js"],import.meta.url));function Cn({onChangeId:t,slotKey:a,show:n,onClose:r}){const{t:i}=V(["page_character","artifact"]),o=T(),s=l.useCallback(L=>{t(L),r()},[t,r]),d=l.useCallback((L,w)=>({...L,...w,slotKeys:[a]}),[a]),[p,c,h]=le(!1),[m,x]=l.useReducer(d,{...zr(),slotKeys:[a]}),[g,C]=qe();l.useEffect(()=>o.arts.followAny(C),[o,C]);const b=Ka(),R=l.useMemo(()=>Nr(),[]),$=o.arts.values.filter(L=>L.slotKey===m.slotKeys[0]).length,S=l.useMemo(()=>{const L=Qt(m,R);return g&&o.arts.values.filter(L).map(w=>w.id)},[g,o,R,m]),{numShow:M,setTriggerElement:W}=Ya(Zc[b],S.length),I=l.useMemo(()=>S.slice(0,M),[S,M]),k=S.length!==$?`${S.length}/${$}`:`${$}`,D={numShowing:I.length,total:k,t:i,namespace:"artifact"};return e(rt,{open:n,onClose:r,containerProps:{maxWidth:"xl"},children:u(we,{children:[e(l.Suspense,{fallback:!1,children:e(ed,{artifactIdToEdit:p?"new":"",cancelEdit:h,allowUpload:!0,allowEmpty:!0,fixedSlotKey:m.slotKeys[0]})}),u(A,{sx:{py:1,display:"flex",alignItems:"center"},children:[u(y,{variant:"h6",children:[a?e(Me,{src:He.slot[a]}):null," ",i`tabEquip.swapArt`]}),e(Z,{onClick:r,sx:{ml:"auto"},children:e(_e,{})})]}),e(K,{}),e(A,{children:e(l.Suspense,{fallback:e(se,{variant:"rectangular",width:"100%",height:200}),children:e(td,{filterOption:m,filterOptionDispatch:x,filteredIds:S,disableSlotFilter:!0})})}),e(K,{}),u(A,{children:[e(f,{pb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:e(Xa,{showingTextProps:D})}),e(O,{fullWidth:!0,onClick:c,color:"info",startIcon:e(Za,{}),children:i("artifact:addNew")}),e(f,{mt:1,children:e(l.Suspense,{fallback:e(se,{variant:"rectangular",width:"100%",height:300}),children:e(v,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:I.map(L=>e(v,{item:!0,xs:1,children:e(lt,{artifactId:L,extraButtons:e(gn,{artId:L}),onClick:s})},L))})})}),S.length!==I.length&&e(se,{ref:L=>{L&&W(L)},sx:{borderRadius:1,mt:1},variant:"rectangular",width:"100%",height:100})]})]})})}const ad={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3},nd=ta([...Ua]);function la({onChangeId:t,weaponTypeKey:a,show:n,onClose:r}){const{t:i}=V(["page_character","page_weapon","weaponNames_gen"]),o=T(),[s,d]=l.useState(!1),p=l.useCallback(_=>{t(_),r()},[t,r]),[c,h]=l.useState(""),m=l.useCallback(_=>{h(o.weapons.new(Jn(_)))},[o,h]),x=l.useCallback(()=>h(""),[]),[g,C]=qe();l.useEffect(()=>o.weapons.followAny(C),[C,o]);const b=Ka(),[R,$]=l.useState([5,4,3]),[S,M]=l.useState(""),W=l.useDeferredValue(S),I=l.useMemo(()=>(g&&o.weapons.values.filter(Qt({weaponType:a,rarity:R,name:W},Er())).sort(Ja(Pr.level??[],!1,Wr())).map(_=>_.id))??[],[g,o,R,a,W]),{numShow:k,setTriggerElement:D}=Ya(ad[b],I.length),L=l.useMemo(()=>I.slice(0,k),[I,k]),w=`${I.length}`,N={numShowing:L.length,total:w,t:i,namespace:"page_weapon"};return u(ne,{children:[e(l.Suspense,{fallback:!1,children:e(Jr,{show:s,onHide:()=>d(!1),onSelect:m,weaponTypeFilter:a})}),e(l.Suspense,{fallback:!1,children:e(Ha,{weaponId:c,footer:!0,onClose:x})}),e(rt,{open:n,onClose:r,children:u(E,{children:[e(ge,{title:u(y,{variant:"h6",display:"flex",gap:1,children:[a?e(Me,{src:He.weaponTypes[a]}):null,e("span",{children:i`page_character:tabEquip.swapWeapon`})]}),action:e(Z,{onClick:r,children:e(_e,{})})}),e(K,{}),u(A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[u(v,{container:!0,spacing:1,children:[e(v,{item:!0,children:e(yt,{sx:{height:"100%"},value:R,size:"small",children:Ua.map(_=>e(Fe,{value:_,onClick:()=>$(nd(R,_)),children:u(f,{display:"flex",children:[e("strong",{children:_}),e(Qa,{})]})},_))})}),e(v,{item:!0,flexGrow:1,children:e(Qe,{autoFocus:!0,size:"small",value:S,onChange:_=>M(_.target.value),label:i("page_weapon:weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})})]}),e(f,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:e(Xa,{showingTextProps:N})}),e(O,{fullWidth:!0,onClick:()=>d(!0),color:"info",startIcon:e(Za,{}),children:i("page_weapon:addWeapon")}),e(v,{container:!0,spacing:1,children:L.map(_=>e(v,{item:!0,xs:6,sm:6,md:4,lg:3,children:e(ct,{weaponId:_,onClick:p,extraButtons:e(gn,{weaponId:_})})},_))}),I.length!==L.length&&e(se,{ref:_=>{_&&D(_)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:100})]})]})})]})}const rd={xs:1,sm:2,md:3,lg:3,xl:3};function od({weaponTypeKey:t,weaponId:a,artifactIds:n,setWeapon:r,setArtifact:i}){const o=T(),[s,d]=l.useState("");l.useEffect(()=>{a&&s&&s!==a&&d(a)},[s,a]);const p=l.useCallback(()=>a&&d(a),[a]),c=l.useCallback(()=>d(""),[]);return u(f,{children:[e(Ha,{weaponId:s,footer:!0,onClose:c,extraButtons:e(dd,{weaponTypeKey:t,onChangeId:r})}),u(v,{item:!0,columns:rd,container:!0,spacing:1,children:[e(v,{item:!0,xs:1,display:"flex",flexDirection:"column",children:a&&o.weapons.keys.includes(a)?e(ct,{weaponId:a,onEdit:p,extraButtons:e(cd,{weaponTypeKey:t,onChangeId:r})}):e(id,{weaponTypeKey:t,onChangeId:r})}),!!n&&Object.entries(n).map(([h,m])=>e(v,{item:!0,xs:1,children:o.arts.keys.includes(m)?e(lt,{artifactId:m,extraButtons:e(ld,{slotKey:h,onChangeId:x=>i(h,x)}),editorProps:{}}):e(sd,{slotKey:h,onChangeId:x=>i(h,x)})},m||h))]})]})}function id({weaponTypeKey:t,onChangeId:a}){const[n,r,i]=le();return u(E,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[e(A,{children:u(y,{children:[e(Me,{src:He.weaponTypes[t]})," ",t]})}),e(K,{}),u(f,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[e(la,{weaponTypeKey:t,show:n,onClose:i,onChangeId:a}),e(O,{onClick:r,color:"info",sx:{borderRadius:"1em"},children:e(Ge,{sx:{height:100,width:100}})})]})]})}function sd({slotKey:t,onChangeId:a}){const[n,r,i]=le(),{t:o}=V("artifact");return u(E,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[e(A,{children:u(y,{children:[e(sn,{iconProps:me,slotKey:t})," ",o(`slotName.${t}`)]})}),e(K,{}),u(f,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[e(Cn,{slotKey:t,show:n,onClose:i,onChangeId:a}),e(O,{onClick:r,color:"info",sx:{borderRadius:"1em"},children:e(Ge,{sx:{height:100,width:100}})})]})]})}function ld({slotKey:t,onChangeId:a}){const{t:n}=V("page_character"),[r,i,o]=le();return u(ne,{children:[e(J,{title:e(y,{children:n`tabEquip.swapArt`}),placement:"top",arrow:!0,children:e(O,{color:"info",size:"small",onClick:i,children:e(Ge,{})})}),e(Cn,{slotKey:t,show:r,onClose:o,onChangeId:a})]})}function cd({weaponTypeKey:t,onChangeId:a}){const{t:n}=V("page_character"),[r,i,o]=le();return u(ne,{children:[e(J,{title:e(y,{children:n`tabEquip.swapWeapon`}),placement:"top",arrow:!0,children:e(O,{color:"info",size:"small",onClick:i,children:e(Ge,{})})}),e(la,{weaponTypeKey:t,onChangeId:a,show:r,onClose:o})]})}function dd({weaponTypeKey:t,onChangeId:a}){const{t:n}=V("page_character"),[r,i,o]=le();return u(ne,{children:[e(O,{color:"info",onClick:i,startIcon:e(Ge,{}),children:n`tabEquip.swapWeapon`}),e(la,{weaponTypeKey:t,onChangeId:a,show:r,onClose:o})]})}function ud({talentKey:t,dropDownButtonProps:a}){const{t:n}=V("sheet_gen"),{character:{talent:r,key:i}}=l.useContext(F),o=T(),{data:s}=l.useContext(X),d=s.get(fe.total[`${t}Boost`]).value,p=s.get(fe.total[t]).value,c=s.get(fe.asc).value;return e(Ho,{fullWidth:!0,title:n("talentLvl",{level:p}),color:d?"info":"primary",...a,children:Nt(1,Qn[c]).map(h=>e(eo,{selected:r[t]===h,disabled:r[t]===h,onClick:()=>o.chars.set(i,m=>{m.talent[t]=h}),children:n("talentLvl",{level:h+d})},h))})}var ca={},hd=Le;Object.defineProperty(ca,"__esModule",{value:!0});var bn=ca.default=void 0,pd=hd(Re()),md=U,fd=(0,pd.default)((0,md.jsx)("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"}),"BarChart");bn=ca.default=fd;var da={},gd=Le;Object.defineProperty(da,"__esModule",{value:!0});var ua=da.default=void 0,xd=gd(Re()),Cd=U,bd=(0,xd.default)((0,Cd.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy");ua=da.default=bd;var ha={},yd=Le;Object.defineProperty(ha,"__esModule",{value:!0});var pa=ha.default=void 0,vd=yd(Re()),wd=U,_d=(0,vd.default)((0,wd.jsx)("path",{d:"M3 3h8v8H3zm10 0h8v8h-8zM3 13h8v8H3zm15 0h-2v3h-3v2h3v3h2v-3h3v-2h-3z"}),"DashboardCustomize");pa=ha.default=_d;function Rd(){return u(Pt,{severity:"info",children:["A ",e("strong",{children:"Build"})," is comprised of a weapon and 5 artifacts. A"," ",e("strong",{children:"TC Build"})," allows the artifacts to be created from its stats."]})}function Ld(){return u(Pt,{severity:"info",children:[e("strong",{children:"Loadouts"})," provides character context data, including bonus stats, conditionals, multi-targets, optimization config, and stores builds. A single ",e("strong",{children:"Loadout"})," can be used for many teams."]})}function kd({teamCharId:t}){const a=T(),n=a.teamChars.get(t),[r,i]=l.useState(n.name),o=l.useDeferredValue(r),[s,d]=l.useState(n.description),p=l.useDeferredValue(s);return l.useEffect(()=>{const c=a.teamChars.get(t);if(!c)return;const{name:h,description:m}=c;i(h),d(m)},[a,t]),l.useEffect(()=>{a.teamChars.set(t,c=>{c.name=o})},[a,o]),l.useEffect(()=>{a.teamChars.set(t,c=>{c.description=p})},[a,p]),u(ne,{children:[e(Qe,{fullWidth:!0,label:"Loadout Name",placeholder:"Loadout Name",value:r,onChange:c=>i(c.target.value)}),e(Qe,{fullWidth:!0,label:"Loadout Description",value:s,onChange:c=>d(c.target.value),multiline:!0,minRows:2})]})}function Sd(){return u(Pt,{severity:"info",children:[e("strong",{children:"Teams"})," are a container for 4 character loadouts. It provides a way for characters to apply team buffs, and configuration of enemy stats. Loadouts can be shared between teams."]})}var ma={},$d=Le;Object.defineProperty(ma,"__esModule",{value:!0});var yn=ma.default=void 0,Td=$d(Re()),jd=U,Id=(0,Td.default)((0,jd.jsx)("path",{d:"M19.8 18.4 14 10.67V6.5l1.35-1.69c.26-.33.03-.81-.39-.81H9.04c-.42 0-.65.48-.39.81L10 6.5v4.17L4.2 18.4c-.49.66-.02 1.6.8 1.6h14c.82 0 1.29-.94.8-1.6z"}),"Science");yn=ma.default=Id;function vn({name:t,description:a,active:n=!1,onActive:r,children:i,onEdit:o,onCopyToTc:s,onDupe:d,onEquip:p,onRemove:c,hideFooter:h=!1}){const m=u(ne,{children:[e(ge,{title:t,action:a&&e(J,{title:e(y,{children:a}),children:e(Te,{})})}),e(A,{sx:{pt:0,pb:1},children:i})]});return u(E,{bgt:"light",sx:{height:"100%",display:"flex",flexDirection:"column",boxShadow:n?"0px 0px 0px 2px green inset":void 0},children:[r?e(Ne,{onClick:r,children:m}):m,!h&&u(Ba,{sx:{display:"flex",justifyContent:"space-around",marginTop:"auto"},children:[e(J,{title:e(y,{children:"Edit Build Settings"}),placement:"top",arrow:!0,children:e(Z,{color:"info",size:"small",onClick:o,disabled:!o,children:e("span",{children:e(Br,{})})})}),e(J,{title:e(y,{children:"Copy to TC Builds"}),placement:"top",arrow:!0,children:e(Z,{color:"info",size:"small",onClick:s,disabled:!s,children:e(yn,{})})}),e(J,{title:e(y,{children:"Duplicate Build"}),placement:"top",arrow:!0,children:e(Z,{color:"info",size:"small",onClick:d,disabled:!d,children:e(ua,{})})}),e(J,{title:e(y,{children:"Equip Build"}),placement:"top",arrow:!0,children:e(Z,{color:"info",size:"small",onClick:p,disabled:!p,children:e(De,{})})}),e(J,{title:e(y,{children:"Delete Build"}),placement:"top",arrow:!0,children:e(Z,{color:"error",size:"small",onClick:c,disabled:!c,children:e(gt,{})})})]})]})}function Dd({buildId:t,characterKey:a}){const{name:n,description:r,weaponId:i,artifactIds:o}=ao(t),s=Wt(a).weaponType;return e(vn,{name:n,description:r,hideFooter:!0,children:e(f,{sx:{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch"},children:u(v,{container:!0,spacing:1,columns:{xs:2,sm:2,md:2,lg:3,xl:3},children:[e(v,{item:!0,xs:1,children:e(ht,{weaponId:i,weaponTypeKey:s})}),Object.entries(o).map(([d,p])=>e(v,{item:!0,xs:1,children:e(ut,{artifactId:p,slotKey:d})},p||d))]})})})}function Md({buildTcId:t}){const a=on(t),{name:n,description:r}=a;return e(vn,{name:n,description:r,hideFooter:!0,children:e(Ud,{buildTcId:t})})}function Ud({buildTcId:t}){const{weapon:a,artifact:{slots:n,substats:{stats:r},sets:i}}=on(t),o=bt(a.key),s=Object.entries(r),d=s.slice(0,5),p=s.slice(5);return e(f,{children:u(v,{container:!0,spacing:1,columns:{xs:2,sm:2,md:2,lg:2,xl:2},children:[e(v,{item:!0,xs:1,children:u(f,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e(fn,{weapon:a,weaponSheet:o}),!!Object.keys(i).length&&e(E,{sx:{flexGrow:1},children:e(f,{sx:{p:1,display:"flex",flexDirection:"column",gap:1},children:Object.entries(i).map(([c,h])=>u(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(Me,{size:2,src:Ea(c,"flower")}),e("span",{children:e(Yr,{setKey:c})}),u(xe,{children:["x",h]})]},c))})})]})}),e(v,{item:!0,xs:1,children:e(E,{sx:{flexGrow:1,height:"100%",p:1,display:"flex",flexDirection:"column",gap:1,justifyContent:"space-between"},children:Object.entries(n).map(([c,{level:h,statKey:m}])=>u(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(sn,{slotKey:c}),u(xe,{children:["+",h]}),e(Bt,{statKey:m})]},c))})}),[d,p].map((c,h)=>e(v,{item:!0,xs:1,children:e(E,{sx:{flexGrow:1,height:"100%"},children:e(f,{sx:{p:1,height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",gap:1},children:c.map(([m,x])=>u(f,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:"space-between"},children:[e(Bt,{statKey:m}),u("span",{children:[ja(x,st(m)),st(m)]})]},m))})})},h))]})})}var fa={},Bd=Le;Object.defineProperty(fa,"__esModule",{value:!0});var wn=fa.default=void 0,Ad=Bd(Re()),Od=U,zd=(0,Ad.default)((0,Od.jsx)("path",{d:"m19.07 4.93-1.41 1.41C19.1 7.79 20 9.79 20 12c0 4.42-3.58 8-8 8s-8-3.58-8-8c0-4.08 3.05-7.44 7-7.93v2.02C8.16 6.57 6 9.03 6 12c0 3.31 2.69 6 6 6s6-2.69 6-6c0-1.66-.67-3.16-1.76-4.24l-1.41 1.41C15.55 9.9 16 10.9 16 12c0 2.21-1.79 4-4 4s-4-1.79-4-4c0-1.86 1.28-3.41 3-3.86v2.14c-.6.35-1 .98-1 1.72 0 1.1.9 2 2 2s2-.9 2-2c0-.74-.4-1.38-1-1.72V2h-1C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10c0-2.76-1.12-5.26-2.93-7.07z"}),"TrackChanges");wn=fa.default=zd;function Nd({optimizationTarget:t,showEmptyTargets:a=!1}){const{t:n}=V("page_character_optimize"),{data:r}=l.useContext(X),i=T(),o=l.useMemo(()=>t&&mn(r,t[0],i),[r,t,i]),s=n("targetSelector.selectOptTarget"),{title:d,icon:p,action:c}=o??{},h=t&&Zn(r.getDisplay(),t),m=!t||!o||!h||!a&&h.isEmpty,x=m?"secondary":h.info.variant,g=x==="invalid"?void 0:x,{textSuffix:C}=(h==null?void 0:h.info)??{},b=C&&u("span",{children:[" ",C]}),R=p?e(Me,{src:p,size:2}):h==null?void 0:h.info.icon;return u(E,{bgt:"light",children:[e(ge,{title:u(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(wn,{}),e("span",{children:"Optimization Target"})]})}),e(K,{}),e(A,{children:m?e("strong",{children:s}):u(Ta,{divider:e(K,{orientation:"vertical",flexItem:!0}),spacing:1,children:[u(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[R,e("span",{children:d}),!!c&&e(xe,{color:"success",sx:{whiteSpace:"normal"},children:c})]}),e(y,{variant:"h6",sx:{display:"flex",alignItems:"center"},children:u(xe,{color:g,sx:{whiteSpace:"normal"},children:[e("strong",{children:h.info.name}),b]})})]})})]})}function Ed({show:t,onHide:a,teamCharId:n,onDelete:r,teamIds:i,conditionalCount:o}){const s=T(),{name:d,description:p,buildIds:c,buildTcIds:h,customMultiTargets:m,bonusStats:x}=s.teamChars.get(n),g=l.useCallback(()=>{a(),r()},[r,a]);return e(nt,{open:t,onClose:a,containerProps:{maxWidth:"md"},children:u(E,{children:[e(ge,{title:u("span",{children:["Delete Loadout: ",e("strong",{children:d}),"?"]}),action:e(Z,{onClick:a,children:e(_e,{})})}),e(K,{}),u(A,{children:[p&&e(E,{bgt:"dark",sx:{mb:2},children:e(A,{children:p})}),e(y,{children:"Deleting the Loadout will also delete the following data:"}),u(er,{sx:{listStyleType:"disc",pl:4},children:[!!c.length&&e(Se,{sx:{display:"list-item"},children:u(f,{sx:{display:"flex",alignItems:"center",gap:1},children:["All saved builds: ",c.length," ",e(J,{title:e(f,{children:c.map(C=>{var b;return u(y,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(De,{}),e("span",{children:(b=s.builds.get(C))==null?void 0:b.name})]},C)})}),children:e(Te,{})})]})}),!!h.length&&e(Se,{sx:{display:"list-item"},children:u(f,{sx:{display:"flex",alignItems:"center",gap:1},children:["All saved TC builds: ",h.length," ",e(J,{title:e(f,{children:h.map(C=>{var b;return u(y,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(De,{}),e("span",{children:(b=s.buildTcs.get(C))==null?void 0:b.name})]},C)})}),children:e(Te,{})})]})}),!!m.length&&e(Se,{sx:{display:"list-item"},children:u(f,{sx:{display:"flex",alignItems:"center",gap:1},children:["All Custom Multi-targets: ",m.length," ",e(J,{title:e(f,{children:m.map((C,b)=>u(y,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(pa,{}),e("span",{children:C.name})]},b))}),children:e(Te,{})})]})}),!!Object.keys(x).length&&u(Se,{sx:{display:"list-item"},children:["Bonus stats: ",Object.keys(x).length]}),!!o&&u(Se,{sx:{display:"list-item"},children:["Conditionals: ",o]}),e(Se,{sx:{display:"list-item"},children:"Optimization Configuration"}),!!i.length&&e(Se,{sx:{display:"list-item"},children:u(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[u("span",{children:["Any teams with this loadout will have this loadout removed from the team. Teams will not be deleted. Teams affected:"," ",i.length]}),e(J,{title:e(f,{children:i.map(C=>{var b;return u(y,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(tr,{}),e("span",{children:(b=s.teams.get(C))==null?void 0:b.name})]},C)})}),children:e(Te,{})})]})})]})]}),u(Ba,{sx:{float:"right"},children:[e(O,{startIcon:e(_e,{}),color:"secondary",onClick:a,children:"Cancel"}),e(O,{startIcon:e(gt,{}),color:"error",onClick:g,children:"Delete"})]})]})})}function Wd({show:t,onHide:a,teamCharId:n,teamIds:r}){const[i,o,s]=le(),d=xt(),p=T(),{key:c,name:h,buildIds:m,buildTcIds:x,customMultiTargets:g,bonusStats:C,optConfigId:b,conditional:R}=xr(n),{optimizationTarget:$}=Ve(b),S=()=>{a(),p.teamChars.remove(n)},M=()=>{p.teamChars.duplicate(n)&&a()},W=k=>{const D=p.teams.new();p.teams.set(D,L=>{L.loadoutData[0]={teamCharId:k}}),d(`/teams/${D}`,{state:{openSetting:!0}})},I=l.useMemo(()=>{let k=0;return ar(R,[],D=>typeof D!="object",()=>k++),k},[R]);return e(nt,{open:t,onClose:a,containerProps:{maxWidth:"lg"},children:u(E,{children:[e(ge,{title:u(f,{display:"flex",gap:1,alignItems:"center",children:[e(za,{}),e("strong",{children:h})]}),action:e(Z,{onClick:a,children:e(_e,{})})}),e(K,{}),u(A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(Ld,{}),e(kd,{teamCharId:n}),e(f,{children:u(v,{container:!0,columns:{xs:1,md:2},spacing:2,children:[e(v,{item:!0,xs:1,children:e(O,{color:"info",onClick:()=>M(),fullWidth:!0,startIcon:e(ua,{}),children:"Duplicate Loadout"})}),u(v,{item:!0,xs:1,children:[e(Ed,{show:i,onHide:s,onDelete:S,teamCharId:n,teamIds:r,conditionalCount:I}),e(O,{fullWidth:!0,startIcon:e(gt,{}),color:"error",onClick:o,children:"Delete Loadout"})]})]})}),e(f,{children:u(v,{container:!0,columns:{xs:1,md:2},spacing:2,children:[!!Object.keys(C).length&&e(v,{item:!0,xs:1,children:e(Pd,{bonusStats:C})}),!!$&&e(v,{item:!0,xs:1,children:e(Nd,{optimizationTarget:$})}),!!g.length&&e(v,{item:!0,xs:1,children:e(Fd,{customMultiTargets:g})}),e(v,{item:!0,xs:1,children:e(E,{bgt:"light",children:e(A,{children:u(y,{variant:"h6",children:["Conditionals: ",e("strong",{children:I})]})})})})]})})]}),e(K,{}),e(ge,{title:u(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(De,{}),e("span",{children:"Builds"})]})}),e(K,{}),u(A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(Rd,{}),e(f,{children:e(v,{container:!0,columns:{xs:1,md:2},spacing:2,children:m.map(k=>e(v,{item:!0,xs:1,children:e(Dd,{buildId:k,characterKey:c})},k))})}),e(f,{children:e(v,{container:!0,columns:{xs:1,md:2},spacing:2,children:x.map(k=>e(v,{item:!0,xs:1,children:e(Md,{buildTcId:k})},k))})})]}),e(K,{}),e(ge,{title:u(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(De,{}),e("span",{children:"Teams"})]})}),e(K,{}),u(A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e(Sd,{}),u(v,{container:!0,columns:{xs:1,md:2},spacing:2,children:[r.map(k=>e(v,{item:!0,xs:1,children:e(Na,{bgt:"light",teamId:k,onClick:D=>d(`/teams/${k}${D?`/${D}`:""}`)})},k)),e(v,{item:!0,xs:1,children:e(O,{fullWidth:!0,sx:{height:"100%",backgroundColor:"contentLight.main"},variant:"outlined",onClick:()=>W(n),color:"info",startIcon:e(Gt,{}),children:"Add new Team"})})]})]})]})})}function Pd({bonusStats:t}){return u(E,{bgt:"light",children:[e(ge,{title:u(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(bn,{}),e("span",{children:"Bonus Stats"})]}),titleTypographyProps:{variant:"h6"}}),e(Va,{bgt:"light",sections:[{fields:Object.entries(t).map(([a,n])=>({text:it.getStr(a)??a,value:n,unit:st(a)}))}]})]})}function Fd({customMultiTargets:t}){return u(E,{bgt:"light",children:[e(ge,{title:u(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(pa,{}),e("span",{children:"Custom multi-targets"})]}),titleTypographyProps:{variant:"h6"}}),e(Va,{bgt:"light",sections:[{fields:t.map(({name:a,description:n})=>({text:a,value:n?e(J,{title:n,children:e(Te,{})}):void 0}))}]})]})}const qd={xs:1,md:2};function Hd({teamCharId:t,teamIds:a}){const n=xt(),r=T(),{name:i,description:o}=r.teamChars.get(t),s=h=>{const m=r.teams.new();r.teams.set(m,x=>{x.loadoutData[0]={teamCharId:h}}),n(`/teams/${m}`,{state:{openSetting:!0}})},[d,p,c]=le();return u(ne,{children:[e(Wd,{show:d,onHide:c,teamCharId:t,teamIds:a}),u(E,{bgt:"light",children:[e(Ne,{onClick:p,children:e(A,{children:u(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(za,{}),e(y,{children:i}),e(nr,{title:e(y,{children:o}),children:e(Te,{})}),e(to,{sx:{ml:"auto"}})]})})}),e(K,{}),e(A,{children:u(v,{container:!0,columns:qd,spacing:1,children:[a.map(h=>e(v,{item:!0,xs:1,children:e(Na,{teamId:h,onClick:m=>n(`/teams/${h}${m?`/${m}`:""}`)})},h)),e(v,{item:!0,xs:1,children:e(O,{fullWidth:!0,sx:{height:"100%",backgroundColor:"contentNormal.main"},variant:"outlined",onClick:()=>s(t),color:"info",startIcon:e(Gt,{}),children:"Add new Team"})})]})})]},t)]})}function Vd(){const{t}=V("ui"),a=T(),{character:n}=l.useContext(F),{key:r}=n,{gender:i}=be(),o=l.useCallback(()=>a.dbMeta.set({gender:i==="F"?"M":"F"}),[i,a]);return r.startsWith("Traveler")?u(O,{onClick:o,startIcon:i==="F"?e(Go,{}):e(Ko,{}),children:[e("strong",{children:t(`gender.${i}`)})," "]}):null}function Gd({onClose:t}){const{t:a}=V(["page_character","sillyWisher_charNames","charNames_gen"]),n=xt(),r=T(),{character:i,character:{key:o},characterSheet:s}=l.useContext(F),{gender:d}=be(),{silly:p}=l.useContext(ft),c=l.useCallback(async()=>{let h=de(o,d).name;typeof h=="object"&&(h=a(`${p?"sillyWisher_charNames":"charNames_gen"}:${Je(o,d)}`)),window.confirm(a("removeCharacter",{value:h}))&&(r.chars.remove(o),n("/characters"))},[r,n,o,d,p,a]);return u(f,{display:"flex",flexDirection:"column",gap:1,children:[u(f,{display:"flex",gap:1,children:[e(Vd,{}),e(O,{color:"error",onClick:()=>c(),startIcon:e(gt,{}),sx:{marginLeft:"auto"},children:a("delete")}),!!t&&e(Z,{onClick:t,children:e(_e,{})})]}),e(f,{children:u(v,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[e(v,{item:!0,xs:8,sm:5,md:4,lg:3,children:u(E,{bgt:"light",sx:{height:"100%",display:"flex",flexDirection:"column",gap:1},children:[e(rc,{}),e(f,{sx:{px:1},children:e(Dr,{level:i.level,ascension:i.ascension,setBoth:h=>r.chars.set(o,h)})}),e(f,{sx:{px:2},children:e(ln,{})}),e(y,{sx:{textAlign:"center",pb:-1},variant:"h6",children:s.constellationName}),e(nc,{})]})}),u(v,{item:!0,xs:12,sm:7,md:8,lg:9,sx:{display:"flex",flexDirection:"column",gap:1},children:[e(f,{children:e(v,{container:!0,columns:3,spacing:1,children:["auto","skill","burst"].map(h=>{var m;return e(v,{item:!0,xs:1,children:e(ud,{talentKey:h,dropDownButtonProps:{startIcon:e(Me,{src:(m=s.getTalentOfKey(h))==null?void 0:m.img,size:1.75,sideMargin:!0})}},h)},h)})})}),e(Kd,{}),e(Yd,{})]})]})})]})}function Kd(){const{character:{key:t}}=l.useContext(F),{data:a}=l.useContext(X),n=T(),r=Wt(t).weaponType,i=a.get(z.weapon.id).value,o=l.useMemo(()=>Ye(pe,s=>a.get(z.art[s].id).value),[a]);return e(f,{children:e(od,{weaponTypeKey:r,weaponId:i,artifactIds:o,setWeapon:s=>{n.weapons.set(s,{location:Ie(t)})},setArtifact:(s,d)=>{n.arts.set(d,{location:Ie(t)})}})})}function Yd(){const t=xt(),{character:{key:a}}=l.useContext(F),n=T(),{gender:r}=be(),[i,o]=qe(),s=l.useMemo(()=>{const p={};return n.teamChars.entries.map(([c,h])=>{h.key===a&&(p[c]||(p[c]=[]))}),n.teams.entries.forEach(([c,h])=>{const m=h.loadoutData.find(x=>{var g;return x&&((g=n.teamChars.get(x==null?void 0:x.teamCharId))==null?void 0:g.key)===a});m&&p[m==null?void 0:m.teamCharId].push(c)}),i&&p},[i,a,n]);l.useEffect(()=>n.teams.followAny(()=>o()),[n,o]),l.useEffect(()=>n.teamChars.followAny(()=>o()),[n,o]);const d=()=>{const p=n.teams.new(),c=n.teamChars.new(a);n.teams.set(p,h=>{h.loadoutData[0]={teamCharId:c}}),t(`/teams/${p}`,{state:{openSetting:!0}})};return u(f,{sx:{display:"flex",flexDirection:"column",gap:1},children:[u(y,{variant:"h6",children:["Team Loadouts with"," ",e(rr,{characterKey:a,gender:r})]}),Object.entries(s).map(([p,c])=>e(Hd,{teamCharId:p,teamIds:c},p)),e(O,{fullWidth:!0,onClick:()=>d(),color:"info",startIcon:e(Gt,{}),variant:"outlined",sx:{backgroundColor:"contentLight.main"},children:"Add new Loadout+Team"}),e(E,{bgt:"light"})]})}function Mu({characterKey:t,onClose:a}){return e(nt,{open:!!t,onClose:a,children:e(l.Suspense,{fallback:e(se,{variant:"rectangular",width:"100%",height:1e3}),children:t&&e(Xd,{characterKey:t,onClose:a},t)})})}function Xd({characterKey:t,onClose:a}){const n=Ht(t),{gender:r}=be(),i=de(t,r),o=qt(t),{target:s}=(o==null?void 0:o[t])??{},d=ra((n==null?void 0:n.key)??""),p=l.useMemo(()=>{if(!(!o||!s))return{data:s,teamData:o,oldData:void 0}},[s,o]),c=l.useMemo(()=>{if(!(!n||!i))return{character:n,characterSheet:i,characterDispatch:d}},[n,i,d]),[h,m]=l.useState(),[x,g]=l.useState(),C=l.useMemo(()=>({chartData:h,setChartData:m,graphBuilds:x,setGraphBuilds:g}),[h,x]);return l.useEffect(()=>{m(void 0),g(void 0)},[t]),e(E,{children:e(A,{sx:{display:"flex",flexDirection:"column",gap:1},children:e(l.Suspense,{fallback:e(se,{variant:"rectangular",width:"100%",height:1e3}),children:p&&c&&C?e(F.Provider,{value:c,children:e(X.Provider,{value:p,children:e(ks.Provider,{value:C,children:e(Gd,{onClose:a})})})}):e(se,{variant:"rectangular",width:"100%",height:1e3})})})})}function Jd(t,a){return{new:n=>t.chars.get(n)?0:1,name:n=>It.t(`${a?"sillyWisher_charNames":"charNames_gen"}:${Je(n,t.gender)}`).toString(),level:n=>{const r=t.chars.get(n);return r?r.level*(r.ascension+1):0},rarity:n=>Dt.char.data[Ie(n)].rarity??0,favorite:n=>t.charMeta.get(n).favorite?1:0}}function Qd(t,a){return{element:(n,r)=>r.includes(or(n)),weaponType:(n,r)=>r.includes(Dt.char.data[Ie(n)].weaponType),rarity:(n,r)=>r.includes(Dt.char.data[Ie(n)].rarity),name:(n,r)=>r===void 0||It.t(`${a?"sillyWisher_charNames":"charNames_gen"}:${Je(n,t.gender)}`).toLowerCase().includes(r.toLowerCase())||a&&It.t(`charNames_gen:${Je(n,t.gender)}`).toLowerCase().includes(r.toLowerCase()),new:(n,r)=>r===void 0||r===(t.chars.get(n)?"no":"yes")}}const _n={name:["favorite","name"],level:["favorite","level","rarity","name"],rarity:["favorite","rarity","level","name"]},Zd=Ce(Fe,{shouldForwardProp:t=>t!=="baseColor"&&t!=="selectedColor"})(({theme:t,baseColor:a="secondary",selectedColor:n="success"})=>({"&":{backgroundColor:t.palette[a].main,color:t.palette[a].contrastText},"&:hover":{backgroundColor:t.palette[a].dark},"&.Mui-selected":{backgroundColor:t.palette[n].main,color:t.palette[n].contrastText},"&.Mui-selected:hover":{backgroundColor:t.palette[n].dark},"&.Mui-disabled":{backgroundColor:t.palette[a].dark},"&.Mui-selected.Mui-disabled":{backgroundColor:t.palette[n].dark}})),eu=Zd,tu=ta([...Ft]);function au({value:t,totals:a,onChange:n,...r}){const i=Et(),o=!Mt(i.breakpoints.up("md")),s=!Mt(i.breakpoints.up("sm"));return e(Xr,{exclusive:!0,value:t,...r,children:Ft.map(d=>u(eu,{value:d,sx:{p:o?1:void 0,minWidth:o?0:"6em",display:"flex"},selectedColor:d,onClick:()=>n(tu(t,d)),children:[e(Kt,{ele:d,iconProps:{fontSize:o&&!s?"inherit":void 0}}),!s&&e(ve,{sx:{ml:.5},label:a[d],size:"small"})]},d))})}const nu=Object.keys(_n);function Uu({show:t,onHide:a,onSelect:n,filter:r=()=>!0,newFirst:i=!1}){const{t:o}=V(["page_character","sillyWisher_charNames","charNames_gen"]),{silly:s}=l.useContext(ft),d=T(),[p,c]=l.useState(()=>d.displayCharacter.get());l.useEffect(()=>d.displayCharacter.follow((w,N)=>c(N)),[d,c]);const{gender:h}=be(),[m,x]=qe();l.useEffect(()=>d.charMeta.followAny(()=>x()),[x,d]);const[g,C]=l.useState(""),b=l.useDeferredValue(g),R=l.useDeferredValue(p),$=l.useDeferredValue(m),S=l.useMemo(()=>{const{element:w,weaponType:N,sortType:_,ascending:re}=R,oe=[...i?["new"]:[],..._n[_]??[]];return $&&Lt.filter(te=>r(te,d.chars.get(te),de(te,h))).filter(Qt({element:w,weaponType:N,name:b},Qd(d,s))).sort(Ja(oe,re,Jd(d,s),["new","favorite"]))},[R,i,$,b,d,s,r,h]),M=l.useMemo(()=>Ra(sr,w=>Lt.forEach(N=>{const _=de(N,d.gender).weaponTypeKey;w[_].total++,S.includes(N)&&w[_].current++})),[S,d]),W=l.useMemo(()=>Ra(Ft,w=>Lt.forEach(N=>{const _=de(N,d.gender).elementKey;w[_].total++,S.includes(N)&&w[_].current++})),[S,d]),{weaponType:I,element:k,sortType:D,ascending:L}=p;return e(rt,{open:t,onClose:()=>{C(""),a()},sx:{"& .MuiContainer-root":{justifyContent:"normal"}},children:u(we,{children:[u(A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[u(f,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e(Fr,{sx:{height:"100%"},onChange:w=>d.displayCharacter.set({weaponType:w}),value:I,totals:M,size:"small"}),e(au,{sx:{height:"100%"},onChange:w=>d.displayCharacter.set({element:w}),value:k,totals:W,size:"small"}),e(Z,{sx:{ml:"auto"},onClick:()=>{C(""),a()},children:e(_e,{})})]}),u(f,{display:"flex",gap:1,children:[e(Qe,{autoFocus:!0,value:g,onChange:w=>C(w.target.value),label:o("characterName"),size:"small",sx:{height:"100%",mr:"auto"},InputProps:{sx:{height:"100%"}}}),e(Ur,{sortKeys:nu,value:D,onChange:w=>d.displayCharacter.set({sortType:w}),ascending:L,onChangeAsc:w=>d.displayCharacter.set({ascending:w})})]})]}),e(K,{}),e(X.Provider,{value:{teamData:void 0},children:e(A,{children:e(v,{container:!0,spacing:1,columns:{xs:2,sm:3,md:4,lg:5},children:S.map(w=>e(v,{item:!0,xs:1,children:e(ou,{characterKey:w,onClick:()=>{C(""),a(),n==null||n(w)}})},w))})})})]})})}const ru=Ce(({className:t,...a})=>e(J,{...a,classes:{popper:t}}))({[`& .${ir.tooltip}`]:{padding:0}});function ou({characterKey:t,onClick:a}){const{gender:n}=be(),r=de(t,n),i=Ht(t),{favorite:o}=Vt(t),s=T(),{silly:d}=l.useContext(ft),[p,c,h]=le(),{level:m=1,ascension:x=0,constellation:g=0}=i??{},C=Sr(t,"banner",n);return e(ru,{enterDelay:300,enterNextDelay:300,arrow:!0,placement:"bottom",open:p,onClose:h,onOpen:c,title:e(f,{sx:{width:300},children:e(_s,{hideStats:!0,characterKey:t})}),children:e(f,{children:u(zt,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e(f,{sx:{position:"absolute",opacity:.7,zIndex:2},children:e(Z,{sx:{p:.25},onClick:b=>{h(),s.charMeta.set(t,{favorite:!o})},children:o?e(Zt,{}):e(na,{})})}),e(Ne,{onClick:a,children:u(f,{display:"flex",position:"relative",className:C?void 0:`grad-${r==null?void 0:r.rarity}star`,sx:{"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,backgroundImage:`url(${C})`,backgroundPosition:"center",backgroundSize:"cover"}},width:"100%",children:[e(f,{flexShrink:1,sx:{maxWidth:{xs:"33%",lg:"30%"}},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,children:e(f,{component:"img",src:Cr(t,n,d),width:"100%",height:"auto",maxWidth:256,sx:{mt:"auto"}})}),u(f,{flexGrow:1,sx:{pr:1,pt:1},display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly",children:[e(y,{variant:"body2",sx:{flexGrow:1},children:e(ae,{color:r==null?void 0:r.elementKey,sx:{opacity:.85,textShadow:"0 0 5px gray"},children:r==null?void 0:r.name})}),i?u(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[u(f,{sx:{textShadow:"0 0 5px gray"},children:[u(y,{variant:"body2",component:"span",whiteSpace:"nowrap",children:["Lv. ",m]}),u(y,{variant:"body2",component:"span",color:"text.secondary",children:["/",lr[x]]})]}),u(y,{variant:"body2",children:["C",g]})]}):e(y,{component:"span",variant:"body2",children:e(ae,{children:"NEW"})}),e(Jt,{stars:(r==null?void 0:r.rarity)??1,colored:!0})]})]})})]})})})}const iu=ta([...Aa]);function Bu({value:t,totals:a,onChange:n,...r}){const i=Et(),o=!Mt(i.breakpoints.up("sm"));return e(yt,{exclusive:!0,value:t,...r,children:Aa.map(s=>e(Fe,{value:s,sx:{p:o?1:void 0,minWidth:o?0:"6em",display:"flex",gap:o?0:1},onClick:()=>n(iu(t,s)),children:u(f,{display:"flex",children:[e("strong",{children:s}),e(Qa,{}),!o&&e(ve,{label:a[s],size:"small"})]})},s))})}export{Fc as $,ut as A,vn as B,Bu as C,Ho as D,au as E,Sc as F,ks as G,pn as H,Hc as I,ln as J,Yc as K,Ld as L,yc as M,zc as N,vc as O,Pc as P,rc as Q,Kc as R,sn as S,Iu as T,nc as U,Rc as V,ht as W,ra as X,ud as Y,yn as Z,Sd as _,_s as a,Qd as b,_n as c,Jd as d,Mu as e,Uu as f,_c as g,mn as h,kc as i,od as j,on as k,fn as l,Bt as m,pa as n,ua as o,Du as p,Gc as q,bn as r,kd as s,Rd as t,ao as u,qc as v,Ve as w,Ot as x,At as y,Oc as z};
