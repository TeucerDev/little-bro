import{c as O,j as N,u as P,a as L,b as V,r as p,o as D,d as Z,e as F,f as U,g as R,h as K,i as r,k as e,T as b,D as _,C as I,L as w,l as d,P as Q,m as T,A as X,I as z,F as $,n as M,t as j,R as m,S as k,p as q,G as S,B as J}from"./index-52652410.js";import{i as H}from"./ColoredText-fdad0407.js";import{S as Y}from"./SlotIcon-8e7ded47.js";import{g as ee,C as v}from"./index-e160f5e8.js";import{g as te}from"./index-ddc46287.js";import{C as W,E as ae}from"./StatIcon-62880fe1.js";import{d as re,R as E}from"./ResinCounter-262b59ef.js";import{L as ne}from"./Link-84fa9bcd.js";const se=O(N.jsx("path",{d:"M10 16v-1H3.01L3 19c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2v-4h-7v1h-4zm10-9h-4.01V5l-2-2h-4l-2 2v2H4c-1.1 0-2 .9-2 2v3c0 1.11.89 2 2 2h6v-2h4v2h6c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm-6 0h-4V5h4v2z"}),"BusinessCenter");function G(){const{t:n}=P(["page_home","ui"]),s=L(),{gender:u}=V(),{characterTally:f,characterTotal:y}=p.useMemo(()=>{const a=s.chars.keys,t=D(Z,()=>0);return a.forEach(c=>{const h=ee(c,u).elementKey;t[h]=t[h]+1}),{characterTally:t,characterTotal:a.length}},[s,u]),{weaponTally:C,weaponTotal:x}=p.useMemo(()=>{const a=s.weapons.values,t=D(F,()=>0);return a.forEach(c=>{const h=te(c.key).weaponType;t[h]=t[h]+1}),{weaponTally:t,weaponTotal:a.length}},[s]),{artifactTally:l,artifactTotal:g}=p.useMemo(()=>{const a=D(U,()=>0),t=s.arts.values;return t.forEach(c=>{const h=c.slotKey;a[h]=a[h]+1}),{artifactTally:a,artifactTotal:t.length}},[s]),o=R(),i=!K(o.breakpoints.up("md"));return r(M,{children:[e(W,{title:e(b,{variant:"h5",children:n`inventoryCard.title`}),avatar:e(se,{fontSize:"large"})}),e(_,{}),r(I,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e(T,{children:r(v,{sx:{display:"flex",justifyContent:"space-between",p:2,gap:1,flexWrap:"wrap"},component:w,to:"/characters",children:[e(d,{label:r("strong",{children:[n("ui:tabs.characters")," ",y]}),icon:e(Q,{}),sx:{flexBasis:i?"100%":"auto",flexGrow:1,cursor:"pointer"},color:y?"primary":"secondary"}),Object.entries(f).map(([a,t])=>e(d,{sx:{flexGrow:1,cursor:"pointer"},color:t?a:"secondary",icon:e(ae,{ele:a}),label:e("strong",{children:t})},a))]})}),e(T,{children:r(v,{sx:{display:"flex",justifyContent:"space-between",p:2,gap:1,flexWrap:"wrap"},component:w,to:"/weapons",children:[e(d,{label:r("strong",{children:[n("ui:tabs.weapons")," ",x]}),icon:e(X,{}),sx:{flexBasis:i?"100%":"auto",flexGrow:1,cursor:"pointer"},color:x?"primary":"secondary"}),Object.entries(C).map(([a,t])=>{var c;return e(d,{sx:{flexGrow:1,cursor:"pointer"},color:t?"success":"secondary",icon:e(z,{src:(c=H.weaponTypes)==null?void 0:c[a],size:2}),label:e("strong",{children:t})},a)})]})}),e(T,{children:r(v,{sx:{display:"flex",justifyContent:"space-between",p:2,gap:1,flexWrap:"wrap"},component:w,to:"/artifacts",children:[e(d,{label:r("strong",{children:[n("ui:tabs.artifacts")," ",g]}),icon:e($,{}),sx:{flexBasis:i?"100%":"auto",flexGrow:1,cursor:"pointer"},color:g?"primary":"secondary"}),Object.entries(l).map(([a,t])=>e(d,{sx:{flexGrow:1,cursor:"pointer"},color:t?"success":"secondary",icon:e(Y,{slotKey:a}),label:e("strong",{children:t})},a))]})})]})]})}function A(){const n=L(),[{timeZoneKey:s,resin:u,resinDate:f},y]=p.useState(()=>n.displayTool.get());p.useEffect(()=>n.displayTool.follow((o,i)=>y(i)),[n]);const[C,x]=p.useState(new Date(Date.now()+j[s]));p.useEffect(()=>{const o=()=>(x(new Date(Date.now()+j[s])),setTimeout(()=>{i=o()},k-Date.now()%k));let i=o();return()=>clearTimeout(i)},[s]);const l=p.useRef(void 0),g=o=>{o>=m?(l.current&&clearTimeout(l.current),l.current=void 0):l.current=setTimeout(()=>console.log("set resin",o+1),E),n.displayTool.set({resin:o,resinDate:new Date().getTime()})};return p.useEffect(()=>{if(u<m){const o=Date.now(),i=m-u,a=Math.min(Math.floor((o-f)/E),i),t=u+a,c=f+a*E;n.displayTool.set({resin:t,resinDate:c}),t<m&&(l.current=setTimeout(()=>g(t+1),o-c))}return()=>l.current&&clearTimeout(l.current)},[n]),r(M,{children:[e(W,{title:r(b,{variant:"h5",children:[s," ",C.toLocaleTimeString([],{timeZone:"UTC"})]}),avatar:e(re,{fontSize:"large"})}),e(_,{}),e(I,{children:e(T,{children:e(v,{sx:{p:2},component:w,to:"/tools",children:r(b,{variant:"h2",sx:{textAlign:"center"},children:[e(z,{src:H.resin.fragile}),r("span",{children:[u,"/",m]})]})})})})]})}function me(){const n=R(),s=K(n.breakpoints.up("lg"));return q.send({hitType:"pageview",page:"/home"}),s?r(S,{container:!0,spacing:2,direction:"row-reverse",sx:{my:2},children:[e(S,{item:!0,xs:12,lg:5,xl:4,sx:{display:"flex",flexDirection:"column",gap:2},children:e(A,{})}),r(S,{item:!0,xs:12,lg:7,xl:8,sx:{display:"flex",flexDirection:"column",gap:2},children:[e(B,{}),e(G,{})]})]}):r(J,{my:1,display:"flex",flexDirection:"column",gap:1,children:[e(B,{}),e(G,{}),e(A,{})]})}function B(){return e(M,{children:e(I,{children:r(b,{variant:"subtitle1",children:["The ",e("strong",{children:"ultimate"})," ",e(ne,{href:"https://genshin.mihoyo.com/",target:"_blank",rel:"noreferrer",children:e("i",{children:"Genshin Impact"})})," ","calculator, LB will keep track of your artifact/weapon/character inventory, and help you create the best build based on how you play, with what you have."]})})})}export{me as default};
