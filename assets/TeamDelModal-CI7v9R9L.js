import{r as y,D as H,a as v,du as w,dc as S,bZ as L,d as a,f as p,b as e,ae as _,T as f,cp as O,v as b,ck as E,o as K,e as k,B as A,ap as F,p as j,ch as P,cm as V,K as I,u as q,cF as J,I as N,a5 as R,a6 as U,J as B,ak as W,ab as Z,fy as G,a2 as Q,af as X,h as $,a7 as Y,l as z,C as ee,aI as ae}from"./index-BbKEiuDu.js";import{u as te}from"./useTeamChar-DiTGF-ss.js";function se({optimizationTarget:t,customMultiTargets:m}){var l;const{data:i}=y.useContext(H),s=v(),c=y.useMemo(()=>w(i,t[0],s),[i,t,s]),{title:d,icon:h,action:n}=c??{},o=S(i.getDisplay(),t),{textSuffix:r,icon:g,name:x=t[0]==="custom"?(l=m[parseInt(t[1]??"")])==null?void 0:l.name:void 0}=(o&&L(o.info))??{};return a(O,{children:[a(p,{sx:{display:"flex",gap:1,alignItems:"center"},children:[h||g,e("span",{children:d}),!!n&&e(_,{color:"success",sx:{whiteSpace:"normal"},children:n})]}),e(f,{sx:{display:"flex",alignItems:"center"},children:a(_,{sx:{whiteSpace:"normal"},children:[e("strong",{children:x}),r&&a("span",{children:[" ",r]})]})})]})}function ne({teamCharId:t,showSetting:m=!1,children:i}){const{t:s}=b("loadout"),c=v(),{name:d,description:h,buildIds:n,buildTcIds:o,optConfigId:r,customMultiTargets:g}=c.teamChars.get(t),{optimizationTarget:x}=E(r);return a(I,{sx:{display:"flex",flexDirection:"column",gap:1},children:[a(p,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(K,{}),e(f,{variant:"h6",children:d}),!!h&&e(A,{title:e(f,{children:h}),children:e(k,{})}),m&&e(F,{sx:{ml:"auto"}})]}),a(p,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[a(p,{sx:{display:"flex",justifyItems:"center",gap:1},children:[e(j,{}),a(f,{children:[s`loadoutHeader.builds`,e("strong",{children:n.length})]})]}),a(p,{sx:{display:"flex",justifyItems:"center",gap:1},children:[e(j,{}),a(f,{children:[s`loadoutHeader.tcBuilds`,e("strong",{children:o.length})]})]}),a(p,{sx:{display:"flex",justifyItems:"center",gap:1},children:[e(P,{}),a(f,{children:[s`loadoutHeader.mltTargets`,e("strong",{children:g.length})]})]})]}),x&&a(f,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(V,{}),e(p,{children:s`loadoutHeader.optTarget`}),e(se,{customMultiTargets:g,optimizationTarget:x})]}),i]})}function ie({teamId:t,show:m,onHide:i,onDel:s}){const{t:c}=b("page_team"),d=v(),h=q(t),{name:n,description:o,loadoutData:r}=h,g=y.useMemo(()=>r.map(l=>{if(!l)return[];const{teamCharId:u}=l;return d.teams.values.filter(({loadoutData:C})=>C.find(D=>(D==null?void 0:D.teamCharId)===u))}),[d,r]),[x,T]=y.useState(()=>g.map((l,u)=>l.length===1?u:void 0).filter(J)),M=()=>{d.teams.remove(t),r.forEach((l,u)=>{!l||!x.includes(u)||d.teamChars.remove(l.teamCharId)}),s()};return e(Y,{open:m,onClose:i,children:a($,{children:[e(N,{title:a(p,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e(p,{children:c`teamDelModal.teamName`}),e("strong",{children:n}),o&&e(A,{title:o,children:e(k,{})})]}),action:e(R,{onClick:i,children:e(U,{})})}),e(B,{}),a(I,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e(W,{severity:"info",children:e(Z,{t:c,i18nKey:"teamDelModal.alert",children:"Removing the team will remove: resonance buffs, and enemy configs stored in the team. Loadouts that are only in this team are also selected by default for deletion."})}),r.map((l,u)=>l?e(le,{teamCharId:l.teamCharId,selected:x.includes(u),onClick:()=>T(C=>G(C,u)),inTeams:g[u]},u):null)]}),e(B,{}),e(I,{sx:{display:"flex",justifyContent:"flex-end"},children:e(Q,{color:"error",startIcon:e(X,{}),onClick:M,children:c`teamDelModal.delBtn`})})]})})}function le({teamCharId:t,selected:m,onClick:i,inTeams:s}){const{t:c}=b("page_team"),d=te(t),{key:h}=d,n=z(h),{target:o}=(n==null?void 0:n[h])??{},r=y.useMemo(()=>{if(!(!n||!o))return{data:o,teamData:n,compareData:void 0}},[o,n]);if(r)return e(H.Provider,{value:r,children:e($,{bgt:"light",sx:{border:m?"2px red solid":void 0},children:e(ee,{onClick:i,children:e(ne,{teamCharId:t,children:e(ae,{color:s.length===1?"success":"warning",children:e(f,{children:s.length===1?c`teamDelModal.onlyCrrTeam`:c("teamDelModal.usingMltTeams",{count:s.length})})})})})})})}export{ne as L,se as O,ie as T};
