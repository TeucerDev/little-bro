import{u as N,r as t,e as T,a as B,d0 as g,a1 as R,k as a,i as c,C as x,G as i,D as W,m as _,B as S,T as b,n as j,M as $}from"./index-ae0e5ead.js";import{C as P,w as V}from"./index-2c4aa6a3.js";import{g as o}from"./index-ab1db78b.js";import{c as v}from"./totalUtils-0230c8ad.js";import{C as D}from"./CloseButton-5250fd57.js";import{I as q,i as J}from"./ColoredText-c98c28ec.js";import{T as K,c as O}from"./StarDisplay-3a29ee7b.js";import{W as Q}from"./WeaponCard-f862b74c.js";import{W as U}from"./WeaponUtil-42644eba.js";import"./DropdownButton-02febc47.js";import"./LocationAutocomplete-98591767.js";function ie({show:I,ascension:M=0,onHide:p,onSelect:E,filter:y=()=>!0,weaponTypeFilter:n}){const{t:d}=N(["page_weapon","weaponNames_gen"]),[u,C]=t.useState(n?[n]:[...T]),m=B(),[k,z]=t.useState(m.displayWeapon.get());t.useEffect(()=>m.displayWeapon.follow((e,s)=>z(s)),[m]),t.useEffect(()=>n&&C([n]),[n]);const[w,A]=t.useState(""),h=t.useDeferredValue(w),{rarity:f}=k,l=t.useMemo(()=>g.filter(e=>y(o(e))).filter(e=>u.includes(o(e).weaponType)).filter(e=>!h||d(`weaponNames_gen:${e}`).toLowerCase().includes(h.toLowerCase())).filter(e=>f.includes(o(e).rarity)).sort((e,s)=>o(s).rarity-o(e).rarity),[h,y,f,d,u]),G=t.useMemo(()=>v(T,e=>g.forEach(s=>{const r=o(s).weaponType;e[r].total++,l.includes(s)&&e[r].current++})),[l]),L=t.useMemo(()=>v(R,e=>g.forEach(s=>{const r=o(s).rarity;e[r].total++,l.includes(s)&&e[r].current++})),[l]);return a($,{open:I,onClose:p,children:c(j,{children:[a(x,{sx:{py:1},children:c(i,{container:!0,spacing:1,children:[a(i,{item:!0,children:a(U,{value:u,totals:G,onChange:C,disabled:!!n,size:"small"})}),a(i,{item:!0,children:a(Q,{sx:{height:"100%"},onChange:e=>m.displayWeapon.set({rarity:e}),value:f,totals:L,size:"small"})}),a(i,{item:!0,flexGrow:1,children:a(K,{autoFocus:!0,size:"small",value:w,onChange:e=>A(e.target.value),label:d("weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})}),a(i,{item:!0,children:a(D,{onClick:p})})]})}),a(W,{}),a(x,{children:a(i,{container:!0,spacing:1,children:l.map(e=>{var r;const s=o(e);return a(i,{item:!0,lg:3,md:4,children:a(_,{sx:{height:"100%"},children:c(P,{onClick:()=>{p(),E(e)},sx:{display:"flex"},children:[a(S,{component:"img",src:V(e,M>=2),sx:{width:100,height:"auto"},className:` grad-${s.rarity}star`}),c(S,{sx:{flexGrow:1,px:1},children:[a(b,{variant:"subtitle1",children:s.name}),c(b,{sx:{display:"flex",alignItems:"baseline"},children:[a(q,{size:1.5,src:(r=J.weaponTypes)==null?void 0:r[s.weaponType]}),a(O,{stars:s.rarity,colored:!0})]})]})]})})},e)})})}),a(W,{}),a(x,{sx:{py:1},children:a(D,{large:!0,onClick:p})})]})})}export{ie as default};
