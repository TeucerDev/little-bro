import{c as O,j as H,u as N,a as L,b as P,r as p,o as v,d as Z,e as U,f as Q,g as R,h as K,i as r,k as e,T as C,D as _,C as I,L as T,l as d,P as V,m as w,A as X,F as $,n as M,t as j,R as m,S as k,p as q,G as S,B as J}from"./index-c6225add.js";import{I as z,i as W}from"./ColoredText-0d6b1724.js";import{S as Y}from"./SlotIcon-5678a8bc.js";import{g as ee,B as te,C as b,E as ae}from"./index-c6848864.js";import{g as re}from"./index-f6f71f08.js";import{C as F}from"./CardHeader-d96ce8ba.js";import{R as E}from"./ResinCounter-7f72710a.js";import{L as se}from"./Link-eecb8609.js";const ne=O(H.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm3.3 14.71L11 12.41V7h2v4.59l3.71 3.71-1.42 1.41z"}),"AccessTimeFilled");function A(){const{t:s}=N(["page_home","ui"]),n=L(),{gender:h}=P(),{characterTally:f,characterTotal:y}=p.useMemo(()=>{const a=n.chars.keys,t=v(Z,()=>0);return a.forEach(i=>{const u=ee(i,h).elementKey;t[u]=t[u]+1}),{characterTally:t,characterTotal:a.length}},[n,h]),{weaponTally:D,weaponTotal:x}=p.useMemo(()=>{const a=n.weapons.values,t=v(U,()=>0);return a.forEach(i=>{const u=re(i.key).weaponType;t[u]=t[u]+1}),{weaponTally:t,weaponTotal:a.length}},[n]),{artifactTally:l,artifactTotal:g}=p.useMemo(()=>{const a=v(Q,()=>0),t=n.arts.values;return t.forEach(i=>{const u=i.slotKey;a[u]=a[u]+1}),{artifactTally:a,artifactTotal:t.length}},[n]),o=R(),c=!K(o.breakpoints.up("md"));return r(M,{children:[e(F,{title:e(C,{variant:"h5",children:s`inventoryCard.title`}),avatar:e(te,{fontSize:"large"})}),e(_,{}),r(I,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e(w,{children:r(b,{sx:{display:"flex",justifyContent:"space-between",p:2,gap:1,flexWrap:"wrap"},component:T,to:"/characters",children:[e(d,{label:r("strong",{children:[s("ui:tabs.characters")," ",y]}),icon:e(V,{}),sx:{flexBasis:c?"100%":"auto",flexGrow:1,cursor:"pointer"},color:y?"primary":"secondary"}),Object.entries(f).map(([a,t])=>e(d,{sx:{flexGrow:1,cursor:"pointer"},color:t?a:"secondary",icon:e(ae,{ele:a}),label:e("strong",{children:t})},a))]})}),e(w,{children:r(b,{sx:{display:"flex",justifyContent:"space-between",p:2,gap:1,flexWrap:"wrap"},component:T,to:"/weapons",children:[e(d,{label:r("strong",{children:[s("ui:tabs.weapons")," ",x]}),icon:e(X,{}),sx:{flexBasis:c?"100%":"auto",flexGrow:1,cursor:"pointer"},color:x?"primary":"secondary"}),Object.entries(D).map(([a,t])=>{var i;return e(d,{sx:{flexGrow:1,cursor:"pointer"},color:t?"success":"secondary",icon:e(z,{src:(i=W.weaponTypes)==null?void 0:i[a],size:2}),label:e("strong",{children:t})},a)})]})}),e(w,{children:r(b,{sx:{display:"flex",justifyContent:"space-between",p:2,gap:1,flexWrap:"wrap"},component:T,to:"/artifacts",children:[e(d,{label:r("strong",{children:[s("ui:tabs.artifacts")," ",g]}),icon:e($,{}),sx:{flexBasis:c?"100%":"auto",flexGrow:1,cursor:"pointer"},color:g?"primary":"secondary"}),Object.entries(l).map(([a,t])=>e(d,{sx:{flexGrow:1,cursor:"pointer"},color:t?"success":"secondary",icon:e(Y,{slotKey:a}),label:e("strong",{children:t})},a))]})})]})]})}function G(){const s=L(),[{timeZoneKey:n,resin:h,resinDate:f},y]=p.useState(()=>s.displayTool.get());p.useEffect(()=>s.displayTool.follow((o,c)=>y(c)),[s]);const[D,x]=p.useState(new Date(Date.now()+j[n]));p.useEffect(()=>{const o=()=>(x(new Date(Date.now()+j[n])),setTimeout(()=>{c=o()},k-Date.now()%k));let c=o();return()=>clearTimeout(c)},[n]);const l=p.useRef(void 0),g=o=>{o>=m?(l.current&&clearTimeout(l.current),l.current=void 0):l.current=setTimeout(()=>console.log("set resin",o+1),E),s.displayTool.set({resin:o,resinDate:new Date().getTime()})};return p.useEffect(()=>{if(h<m){const o=Date.now(),c=m-h,a=Math.min(Math.floor((o-f)/E),c),t=h+a,i=f+a*E;s.displayTool.set({resin:t,resinDate:i}),t<m&&(l.current=setTimeout(()=>g(t+1),o-i))}return()=>l.current&&clearTimeout(l.current)},[s]),r(M,{children:[e(F,{title:r(C,{variant:"h5",children:[n," ",D.toLocaleTimeString([],{timeZone:"UTC"})]}),avatar:e(ne,{fontSize:"large"})}),e(_,{}),e(I,{children:e(w,{children:e(b,{sx:{p:2},component:T,to:"/tools",children:r(C,{variant:"h2",sx:{textAlign:"center"},children:[e(z,{src:W.resin.fragile}),r("span",{children:[h,"/",m]})]})})})})]})}function me(){const s=R(),n=K(s.breakpoints.up("lg"));return q.send({hitType:"pageview",page:"/home"}),n?r(S,{container:!0,spacing:2,direction:"row-reverse",sx:{my:2},children:[e(S,{item:!0,xs:12,lg:5,xl:4,sx:{display:"flex",flexDirection:"column",gap:2},children:e(G,{})}),r(S,{item:!0,xs:12,lg:7,xl:8,sx:{display:"flex",flexDirection:"column",gap:2},children:[e(B,{}),e(A,{})]})]}):r(J,{my:1,display:"flex",flexDirection:"column",gap:1,children:[e(B,{}),e(A,{}),e(G,{})]})}function B(){return e(M,{children:e(I,{children:r(C,{variant:"subtitle1",children:["The ",e("strong",{children:"ultimate"})," ",e(se,{href:"https://genshin.mihoyo.com/",target:"_blank",rel:"noreferrer",children:e("i",{children:"Genshin Impact"})})," ","calculator, LB will keep track of your artifact/weapon/character inventory, and help you create the best build based on how you play, with what you have."]})})})}export{me as default};
