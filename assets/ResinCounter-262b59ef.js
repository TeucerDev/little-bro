import{z as M,E as _,j as k,a as y,r as m,R as i,a0 as E,i as r,G as c,k as t,I as S,T as p,D as w,a2 as j,s,C as z,n as A,a1 as L}from"./index-52652410.js";import{i as T,B as N}from"./ColoredText-fdad0407.js";var x={},B=_;Object.defineProperty(x,"__esModule",{value:!0});var F=x.default=void 0,G=B(M()),q=k,P=(0,G.default)((0,q.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm3.3 14.71L11 12.41V7h2v4.59l3.71 3.71-1.42 1.41z"}),"AccessTimeFilled");F=x.default=P;const u=8*L;function H(){const d=y(),[{resin:e,resinDate:o},R]=m.useState(()=>d.displayTool.get());m.useEffect(()=>d.displayTool.follow((a,f)=>R(f)),[d]);const l=m.useRef(void 0),n=a=>{a>=i?(l.current&&clearTimeout(l.current),l.current=void 0):l.current=setTimeout(()=>console.log("set resin",a+1),u),d.displayTool.set({resin:a,resinDate:new Date().getTime()})};m.useEffect(()=>{if(e<i){const a=Date.now(),f=i-e,D=Math.min(Math.floor((a-o)/u),f),g=e+D,C=o+D*u;d.displayTool.set({resin:g,resinDate:C}),g<i&&(l.current=setTimeout(()=>n(g+1),a-C))}return()=>l.current&&clearTimeout(l.current)},[]);const b=e>=i?o:o+u,I=e>=i?o:o+(i-e)*u,h=new Date(I),v=E(Math.abs(b-Date.now()));return r(A,{children:[r(c,{container:!0,sx:{px:2,py:1},spacing:2,children:[t(c,{item:!0,children:t(S,{src:T.resin.fragile,size:2})}),t(c,{item:!0,children:t(p,{variant:"h6",children:"Resin Counter"})})]}),t(w,{}),t(z,{children:r(c,{container:!0,spacing:2,children:[t(c,{item:!0,children:r(p,{variant:"h2",children:[t(S,{src:T.resin.fragile}),t(j,{type:"number",sx:{width:"2em",fontSize:"4rem"},value:e,inputProps:{min:0,max:999,sx:{textAlign:"right"}},onChange:a=>n(parseInt(a.target.value))}),r("span",{children:["/",i]})]})}),r(c,{item:!0,flexGrow:1,children:[r(N,{fullWidth:!0,children:[t(s,{onClick:()=>n(0),disabled:e===0,children:"0"}),t(s,{onClick:()=>n(e-1),disabled:e===0,children:"-1"}),t(s,{onClick:()=>n(e-20),disabled:e<20,children:"-20"}),t(s,{onClick:()=>n(e-40),disabled:e<40,children:"-40"}),t(s,{onClick:()=>n(e-60),disabled:e<60,children:"-60"}),t(s,{onClick:()=>n(e+1),children:"+1"}),t(s,{onClick:()=>n(e+60),children:"+60"}),r(s,{onClick:()=>n(i),disabled:e===i,children:["MAX ",i]})]}),t(p,{variant:"subtitle1",sx:{mt:2},children:e<i?r("span",{children:["Next resin in ",v,", full Resin at"," ",h.toLocaleTimeString()," ",h.toLocaleDateString()]}):r("span",{children:["Resin has been full for at least ",v,", since"," ",h.toLocaleTimeString()," ",h.toLocaleDateString()]})})]}),t(c,{item:!0,xs:12,children:t(p,{variant:"caption",children:"Because we do not provide a mechanism to synchronize resin time, actual resin recharge time might be as much as 8 minutes earlier than predicted."})})]})})]})}export{u as R,H as a,F as d};
