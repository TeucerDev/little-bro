"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[645],{29754:(e,t,a)=>{var n=a(95938);t.Z=void 0;var o=n(a(68671)),s=a(52322),l=(0,o.default)((0,s.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");t.Z=l},92252:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(6620),o=a(52322);const s=(0,n.Z)((0,o.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add")},66615:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(6620),o=a(52322);const s=(0,n.Z)((0,o.jsx)("path",{d:"M10 16v-1H3.01L3 19c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2v-4h-7v1h-4zm10-9h-4.01V5l-2-2h-4l-2 2v2H4c-1.1 0-2 .9-2 2v3c0 1.11.89 2 2 2h6v-2h4v2h6c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm-6 0h-4V5h4v2z"}),"BusinessCenter")},54278:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(6620),o=a(52322);const s=(0,n.Z)((0,o.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"}),"Lock")},40535:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(6620),o=a(52322);const s=(0,n.Z)((0,o.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"}),"LockOpen")},43007:(e,t,a)=>{a.d(t,{W:()=>v});var n=a(88294),o=a(66615),s=a(79906),l=a(2784),i=a(21560),r=a(51218),c=a(25870),d=a(10002),u=a(36893),p=a(86482),h=a(56748),Z=a(52903);let m,g=e=>e;function v({location:e,setLocation:t,filter:a=(()=>!0),autoCompleteProps:v={}}){const{t:f}=(0,i.$G)(["ui","artifact","charNames_gen"]),{database:w}=(0,l.useContext)(c.t),{gender:y}=(0,d.Z)(),x=(0,l.useCallback)((e=>f(`charNames_gen:${(0,u.LP)(w.chars.LocationToCharacterKey(e),y)}`)),[w,y,f]),b=(0,l.useCallback)((e=>""===e?(0,Z.tZ)(o.Z,{}):(0,Z.tZ)(h.Z,{src:(0,n.Li)(w.chars.LocationToCharacterKey(e),"iconSide",y),sx:{pr:1}})),[w,y]),C=(0,l.useCallback)((e=>"Traveler"===e?u._0.some((e=>w.charMeta.get(e).favorite)):!!e&&w.charMeta.get(e).favorite),[w]),k=(0,l.useMemo)((()=>[{key:"",label:f(m||(m=g`artifact:filterLocation.inventory`))},...Array.from(new Set(w.chars.keys.filter((e=>!(0,r.m)(e,y)||a((0,r.m)(e,y)))).map((e=>(0,u.V7)(e))))).map((e=>({key:e,label:x(e),favorite:C(e)}))).sort(((e,t)=>e.favorite&&!t.favorite?-1:!e.favorite&&t.favorite?1:e.label.localeCompare(t.label)))]),[f,x,C,w,a,y]);return(0,Z.tZ)(l.Suspense,{fallback:(0,Z.tZ)(s.Z,{variant:"text",width:100}),children:(0,Z.tZ)(p._,Object.assign({size:"small",options:k,valueKey:e,onChange:e=>t(null!=e?e:""),toImg:b},v))})}},37923:(e,t,a)=>{a.d(t,{Z:()=>Z});var n=a(88294),o=a(66615),s=a(62197),l=a(67550),i=a(2784),r=a(21560),c=a(51218),d=a(25870),u=a(10002),p=a(20353),h=a(52903);function Z({location:e}){const{t}=(0,r.$G)("ui"),{database:a}=(0,i.useContext)(d.t),{gender:Z}=(0,u.Z)(),m=(0,i.useMemo)((()=>e?(0,c.m)(a.chars.LocationToCharacterKey(e),Z):void 0),[e,Z,a]);return(0,h.tZ)(s.Z,{component:"span",children:e&&null!=m&&m.name?(0,h.BX)(l.Z,{children:[(0,h.tZ)(p.Z,{src:(0,n.Li)(a.chars.LocationToCharacterKey(e),"iconSide",Z),size:3,sideMargin:!0}),(0,h.tZ)(l.Z,{sx:{pr:1},component:"span",children:m.name})]}):(0,h.BX)("span",{children:[(0,h.tZ)(o.Z,{sx:{verticalAlign:"text-bottom"}})," ",t("inventory")]})})}},20353:(e,t,a)=>{a.d(t,{Z:()=>n});const n=(0,a(65992).ZP)("img",{name:"ImgIcon",slot:"Root",shouldForwardProp:e=>!["size","sideMargin"].includes(e)})((({size:e=2,sideMargin:t=!1})=>({display:"inline-block",width:`${e}em`,height:`${e}em`,marginTop:.85*(1-e)+"em",marginBottom:.15*(1-e)+"em",marginLeft:t?void 0:.3*(1-e)+"em",marginRight:t?void 0:.3*(1-e)+"em",verticalAlign:"text-bottom"})))},29117:(e,t,a)=>{a.d(t,{Z:()=>g});var n=a(98283),o=a(47746),s=a(86432),l=a(92794),i=a(66198),r=a(79536),c=a(82799),d=a(10618),u=a(26578),p=a(29432),h=a(52903);const Z=["value","totals","onChange"],m=(0,d.X)([...c.yd]);function g(e){let{value:t,totals:a,onChange:d}=e,g=(0,n.Z)(e,Z);const v=(0,o.Z)(),f=!(0,s.Z)(v.breakpoints.up("sm"));return(0,h.tZ)(p.Z,Object.assign({exclusive:!0,value:t},g,{children:c.yd.map((e=>{var n;return(0,h.BX)(l.Z,{value:e,sx:{p:f?1:void 0,minWidth:f?0:"7em",display:"flex",gap:f?0:1},onClick:()=>d(m(t,e)),children:[(0,h.tZ)(u.Z,{src:null==(n=r.Z.weaponTypes)?void 0:n[e],size:2,sideMargin:!0}),(0,h.tZ)(i.Z,{label:a[e],size:"small"})]},e)}))}))}},61523:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B});var n=a(82799),o=a(92252),s=a(67550),l=a(7671),i=a(13780),r=a(5896),c=a(79906),d=a(83249),u=a(41075),p=a(62197),h=a(2784),Z=a(61877),m=a(21560),g=a(87985),v=a(46026),f=a(62978),w=a(29117),y=a(59313),x=a(25870),b=a(36617),C=a(82716),k=a(1661),W=a(40775),z=a(41015),I=a(77712),S=a(64120),M=a(3694),L=a(52903);const T=h.lazy((()=>a.e(592).then(a.bind(a,89431)))),P=(0,h.lazy)((()=>a.e(878).then(a.bind(a,15878)))),V={xs:1,sm:2,md:3,lg:3,xl:4},$={xs:10,sm:12,md:24,lg:24,xl:24},j=Object.keys(I.gd);function B(){const{t:e}=(0,m.$G)(["page_weapon","ui","weaponNames_gen"]),{database:t}=(0,h.useContext)(x.t),[a,p]=(0,h.useState)(t.displayWeapon.get());(0,h.useEffect)((()=>t.displayWeapon.follow(((e,t)=>p(t)))),[t]);const[B,E]=(0,h.useState)(!1),[H,N]=(0,b.Z)(),_=(0,h.useRef)(null),[A,K]=(0,h.useState)(0);(0,h.useEffect)((()=>(Z.ZP.send({hitType:"pageview",page:"/weapon"}),t.weapons.followAny(((e,t)=>("new"===t||"remove"===t)&&N())))),[N,t]);const O=(0,C.Z)(),G=$[O],D=(0,h.useCallback)((async n=>{const o=t.weapons.get(n);if(!o)return;const s=e(`weaponNames_gen:${o.key}`);window.confirm(e("removeWeapon",{value:s}))&&(t.weapons.remove(n),a.editWeaponId===n&&t.displayWeapon.set({editWeaponId:""}))}),[a.editWeaponId,t,e]),R=(0,h.useCallback)((e=>{t.displayWeapon.set({editWeaponId:e})}),[t]),F=(0,h.useCallback)((e=>{R(t.weapons.new((0,S.xg)(e)))}),[t,R]),[q,U]=(0,h.useState)(""),J=(0,h.useDeferredValue)(q),{sortType:Q,ascending:Y,weaponType:ee,rarity:te}=a,{weaponIdList:ae,totalWeaponNum:ne}=(0,h.useMemo)((()=>{var e;const a=t.weapons.values,n=a.length,o=a.filter((0,k.C)({weaponType:ee,rarity:te,name:J},(0,I.Xg)())).sort((0,k.e)(null!=(e=I.gd[Q])?e:[],Y,(0,I.Sn)())).map((e=>e.id));return H&&{weaponIdList:o,totalWeaponNum:n}}),[H,t,Q,Y,te,ee,J]),{weaponIdsToShow:oe,numPages:se,currentPageIndex:le}=(0,h.useMemo)((()=>{const e=Math.ceil(ae.length/G),t=(0,z.uZ)(A,0,e-1);return{weaponIdsToShow:ae.slice(t*G,(t+1)*G),numPages:e,currentPageIndex:t}}),[ae,A,G]),ie=ae.length!==ne?`${ae.length}/${ne}`:`${ne}`,re=(0,h.useCallback)(((e,t)=>{var a;null==(a=_.current)||a.scrollIntoView({behavior:"smooth"}),K(t-1)}),[K,_]),ce=(0,h.useCallback)((()=>t.displayWeapon.set({editWeaponId:""})),[t]),{editWeaponId:de}=a;(0,h.useEffect)((()=>{de&&(t.weapons.get(de)||ce())}),[t,de,ce]);const ue=(0,h.useMemo)((()=>(0,W.W)(n.yd,(e=>Object.entries(t.weapons.data).forEach((([t,a])=>{const n=(0,y.ub)(a.key).weaponType;e[n].total++,ae.includes(t)&&e[n].current++}))))),[t,ae]),pe=(0,h.useMemo)((()=>(0,W.W)(n.U1,(e=>Object.entries(t.weapons.data).forEach((([t,a])=>{const n=(0,y.ub)(a.key).rarity;e[n].total++,ae.includes(t)&&e[n].current++}))))),[t,ae]);return(0,L.BX)(s.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:[(0,L.tZ)(h.Suspense,{fallback:!1,children:(0,L.tZ)(T,{show:B,onHide:()=>E(!1),onSelect:F})}),(0,L.tZ)(h.Suspense,{fallback:!1,children:(0,L.tZ)(P,{weaponId:de,footer:!0,onClose:ce})}),(0,L.tZ)(g.Z,{ref:_,children:(0,L.BX)(l.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,L.BX)(s.Z,{display:"flex",flexWrap:"wrap",gap:1,alignItems:"stretch",children:[(0,L.tZ)(w.Z,{onChange:e=>t.displayWeapon.set({weaponType:e}),value:ee,totals:ue,size:"small"}),(0,L.tZ)(f.Z,{sx:{height:"100%"},onChange:e=>t.displayWeapon.set({rarity:e}),value:te,totals:pe,size:"small"}),(0,L.tZ)(s.Z,{flexGrow:1}),(0,L.tZ)(i.Z,{autoFocus:!0,size:"small",value:q,onChange:e=>U(e.target.value),label:e("weaponName"),sx:{height:"100%"},InputProps:{sx:{height:"100%"}}})]}),(0,L.BX)(s.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:[(0,L.tZ)(r.Z,{count:se,page:le+1,onChange:re}),(0,L.tZ)(X,{numShowing:oe.length,total:ie,t:e}),(0,L.tZ)(v.Z,{sx:{height:"100%"},sortKeys:j,value:Q,onChange:e=>t.displayWeapon.set({sortType:e}),ascending:Y,onChangeAsc:e=>t.displayWeapon.set({ascending:e})})]})]})}),(0,L.BX)(h.Suspense,{fallback:(0,L.tZ)(c.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:500}}),children:[(0,L.tZ)(d.Z,{fullWidth:!0,onClick:()=>E(!0),color:"info",startIcon:(0,L.tZ)(o.Z,{}),children:e("page_weapon:addWeapon")}),(0,L.tZ)(u.ZP,{container:!0,spacing:1,columns:V,children:oe.map((e=>(0,L.tZ)(u.ZP,{item:!0,xs:1,children:(0,L.tZ)(M.Z,{weaponId:e,onDelete:D,onEdit:R,canEquip:!0})},e)))})]}),se>1&&(0,L.tZ)(g.Z,{children:(0,L.tZ)(l.Z,{children:(0,L.BX)(u.ZP,{container:!0,alignItems:"flex-end",children:[(0,L.tZ)(u.ZP,{item:!0,flexGrow:1,children:(0,L.tZ)(r.Z,{count:se,page:le+1,onChange:re})}),(0,L.tZ)(u.ZP,{item:!0,children:(0,L.tZ)(X,{numShowing:oe.length,total:ie,t:e})})]})})})]})}function X({numShowing:e,total:t,t:a}){return(0,L.tZ)(p.Z,{color:"text.secondary",children:(0,L.BX)(m.cC,{t:a,i18nKey:"showingNum",count:e,value:t,children:["Showing ",(0,L.tZ)("b",{children:{count:e}})," out of ",{value:t}," Weapons"]})})}},94758:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(2784),o=a(25870);function s(e=""){const{database:t}=(0,n.useContext)(o.t),[a,s]=(0,n.useState)(t.weapons.get(e));return(0,n.useEffect)((()=>s(t.weapons.get(e))),[t,e]),(0,n.useEffect)((()=>e?t.weapons.follow(e,((e,t,a)=>"update"===t&&s(a))):void 0),[e,s,t]),a}},40775:(e,t,a)=>{a.d(t,{A:()=>o,W:()=>s});var n=a(41015);function o(e,t){const a=(0,n.xh)(e,(e=>l(e)));return t(a),(0,n.xh)(a,(e=>i(e)))}function s(e,t){const a=l(e);return t(a),i(a)}function l(e){return Object.fromEntries(e.map((e=>[e,{total:0,current:0}])))}function i(e){return(0,n.xh)(e,(({total:e,current:t})=>t===e?`${e}`:`${t}/${e}`))}}}]);